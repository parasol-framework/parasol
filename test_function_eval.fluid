-- Test function evaluation count

local call_count = 0
local function returnString()
   call_count = call_count + 1
   print("returnString() called - count = " .. call_count)
   return "Result"
end

print("=== Test: Function call count ===")
local val
local v = '' .. (val ? returnString())

print("Final result: '" .. tostring(v) .. "'")
print("Function call count: " .. call_count)
print("Expected: 1")
if call_count != 1 then
   print("FAIL: Function called " .. call_count .. " times instead of 1!")
else
   print("PASS!")
end

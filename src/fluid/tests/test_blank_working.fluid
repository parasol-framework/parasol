-- Flute tests for blank identifier (function scope only)

function testBasicAssignment()
   local x, _ = 10, 20
   assert(x is 10, "Failed: expected x to be 10")
end

function testBlankFirst()
   local _, x = 10, 20
   assert(x is 20, "Failed: expected x to be 20")
end

function testBlankMiddle()
   local x, _, y = 1, 2, 3
   assert(x is 1, "Failed: expected x to be 1")
   assert(y is 3, "Failed: expected y to be 3")
end

function testForLoopBlankIndex()
   local t = {10, 20, 30}
   local sum = 0
   for _, value in ipairs(t) do
      sum += value
   end
   assert(sum is 60, "Failed: expected sum to be 60")
end

function testForLoopBlankValue()
   local t = {10, 20, 30}
   local count = 0
   for i, _ in ipairs(t) do
      count += 1
   end
   assert(count is 3, "Failed: expected count to be 3")
end

function testReadError()
   local success, err = pcall(function()
      local x = _
   end)
   assert(success is false, "Failed: should error when reading blank identifier")
end

return {
   tests = { 'testBasicAssignment', 'testBlankFirst', 'testBlankMiddle',
             'testForLoopBlankIndex', 'testForLoopBlankValue', 'testReadError' }
}

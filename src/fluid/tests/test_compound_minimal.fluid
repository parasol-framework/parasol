-- Minimal reproducer for compound assignment register leaks on indexed tables.
-- Run with: parasol --log-warning src/fluid/tests/test_compound_minimal.fluid

function testIndexedCompoundRegisterLeak()
   local t = { 6, 0 }
   local i = 1
   t[i] += t[i]
   assert(t[1] is 12, 'indexed += with same RHS should double entry')
end

return {
   tests = {
      'testIndexedCompoundRegisterLeak'
   }
}

-- Flute tests for the nz() function

function testNil()
   assert(nz(nil, "Passed") is "Passed", "Failed nil test.")

   if "Passed" then
      -- Expected behaviour
   else
      error("Failed 'if' nil test.")
   end
end

function testEmptyString()
   assert(nz("", "Passed") is "Passed", "Failed empty string test.")

   if "" then
      -- Expected behaviour
   else
      error("Failed 'if' empty string test.")
   end
end

function testZero()
   assert(nz(0, "Passed") is "Passed", "Failed numerical test.")
end

function testString()
   assert(nz("Passed", "Failed") is "Passed", "Failed postive string test.")
end

function testTableWithContent()
   if not nz({ one=1, two=2 }) then
      error("Failed table with content test.")
   end
end

function testTableWithInserts()
   local t = { }
   table.insert(t, 1)
   if not nz(t) then
      error("Failed table with inserted content test.")
   end
end

function testEmptyTable()
   if nz({ }) then
      error("Failed empty table test.")
   end
end

-----------------------------------------------------------------------------------------------------------------------

   return {
      tests = { 'testNil', 'testEmptyString', 'testZero', 'testString', 'testTableWithContent', 'testEmptyTable', 'testTableWithInserts' }
   }

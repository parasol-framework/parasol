<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.html">Modules</a></li><li class="active"><a href="module.html">Classes</a></li><li><a href="../fluid.html">Fluid</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>Module Class</h1></div><p class="lead">Manages the loading of system libraries.</p>
<p>The Module class is used to load and maintain the modules that are installed on the user's system.  A number of modules are available in the core platform as standard, which you can use in the development of your programs.  Examples of existing modules can be found in both the <code>modules:</code> folder.</p>
<p>To load a module and interact with its API, create a module object and initialise it.  The following code segment illustrates in C++:</p>
<pre>DisplayBase *DisplayBase;
auto modDisplay = objModule::create::global(fl::Name("display"));
if (modDisplay) modDisplay-&gt;getPtr(FID_ModBase, &amp;DisplayBase);
</pre>
<p>To do the same in Fluid:</p>
<pre>mGfx = mod.load('display')
</pre>
<p>It is critical that the module object is permanently retained until the program no longer needs its functionality.</p><h3>Structure</h3><p>The Module class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-Flags" class="clickable"><td class="col-md-1"><a id="tf-Flags"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">Flags</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Optional flags.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Flags" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">MOF_LINK_LIBRARY</th><td>Module refers to a symbolic link library (e.g. libz DLL or SO)</td></tr><tr><th class="col-md-1">MOF_STATIC</th><td>This flag prevents the loaded module code from being unloaded when the module object is freed.  This may be needed in cases where a module is designed with the presumption that it will remain in memory after being loaded by the developer.</td></tr><tr><th class="col-md-1">MOF_SYSTEM_PROBE</th><td>Indicates that the module is being probed.  Do not use outside of the core library.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-FunctionList" class="clickable"><td class="col-md-1"><a id="tf-FunctionList"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">FunctionList</th><td class="col-md-1"><span class="text-nowrap">const struct Function *</span></td><td>Refers to a list of public functions exported by the module.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-FunctionList" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>After initialisation, the FunctionList will refer to an array of public functions that are exported by the module.  The FunctionList array consists of Function structs, which are in the following format:</p>
<pre>struct Function {
   APTR Address;  // Address of the function routine.
   CSTRING Name;  // Name of the function.
   const struct FunctionField *Args; // Descriptor array for the function arguments.
};
</pre>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-ModBase" class="clickable"><td class="col-md-1"><a id="tf-ModBase"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">ModBase</th><td class="col-md-1"><span class="text-nowrap">APTR</span></td><td>The Module's function base (jump table) must be read from this field.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-ModBase" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Initialising a module will create a jump table that is referenced in the ModBase field.  The jump table contains vectors that point to all functions that are published by the module.</p>
<p>The jump table is unique to the instance of the module. This allows each module to use a different function model between versions, without losing backwards compatibility.  When a module is opened, it can check the requested <a data-toggle="tooltip" title="Minimum required version number." href="#tf-Version">Version</a> and return a custom-built jump table to the program.  Thus if a function were changed in a future module version, older programs would be re-routed to a routine that provides backwards compatibility to the newer function model.</p>
<p>By default, jump tables are arranged as an array of function pointers accessible through a well defined structure. The template for making calls is <code>FunctionBase-&gt;FunctionCall()</code></p>
<p>Header files will normally include macros to simplify the function call:</p>
<pre>#define FunctionCall      FunctionBase-&gt;FunctionCall</pre>
<p>The jump table is invalid once the module is destroyed.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Name" class="clickable"><td class="col-md-1"><a id="tf-Name"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Name</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>The name of the module.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Name" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>This string pointer specifies the name of the Module.  This name will be used to load the module from the <code>modules:</code> folder, so this field actually reflects part of the module file name.  It is also possible to specify sub-directories before the module name itself - this could become more common in module loading in future.</p>
<p>It is critical that file extensions do not appear in the Name string, e.g. <code>screen.dll</code> as not all systems may use a <code>.dll</code> extension.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Version" class="clickable"><td class="col-md-1"><a id="tf-Version"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">Version</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>Minimum required version number.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Version" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>When opening a module, the value that you insert in the Version field will reflect the minimum version and revision number required of the module file.  If the module's version number is less than the version that you specify, then the initialisation procedure will be aborted.</p>
<p>The Version field is also useful for ensuring that the function base returned by a module matches your program's expectations.  For instance, if you write your program against a 1.0 version of a module but the user's machine has a 2.0 version installed, there could be incompatibilities.  By specifying the required version number, the module can provide backwards-compatible functionality for your software.</p>
<p>After initialisation, the Version field will be updated to reflect the actual version of the Module.</p>
      </div></div></td></tr></tbody></table><h3>Methods</h3><p>The following methods are currently supported:</p><table class="table table-hover"><thead><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-ResolveSymbol" class="clickable"><th class="col-md-1 text-primary">ResolveSymbol</th><td><a id="tm-ResolveSymbol"></a>Resolves the symbol names in loaded link libraries to address pointers.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-ResolveSymbol" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR modResolveSymbol(OBJECTPTR Object, CSTRING Name, APTR * Address)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Name</td><td>The name of the symbol to resolve.</td></tr><tr><td>Address</td><td>The address of the symbol will be returned in this parameter.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method will convert symbol names to their respective address pointers.  The module code must have been successfully loaded into memory or an ERR_FieldNotSet error will be returned.  If the symbol was not found then ERR_NotFound is returned.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">NotFound</th><td>The symbol was not found.</td></tr><tr><th class="col-md-1">NoSupport</th><td>The host platform does not support this method.</td></tr><tr><th class="col-md-1">FieldNotSet</th><td>The module has not been successfully initialised.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="footer copyright text-right">Module module documentation © Paul Manias 1996-2023</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_MODULE</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>System</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/module.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.html">Audio</a></li><li><a href="sound.html">Sound</a></li></ul></li><li>Core<ul><li><a href="file.html">File</a></li><li><a href="metaclass.html">MetaClass</a></li><li><a href="module.html">Module</a></li><li><a href="storagedevice.html">StorageDevice</a></li><li><a href="task.html">Task</a></li><li><a href="thread.html">Thread</a></li><li><a href="time.html">Time</a></li></ul></li><li>Data<ul><li><a href="compression.html">Compression</a></li><li><a href="config.html">Config</a></li><li><a href="script.html">Script</a></li><li><a href="xml.html">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.html">BlurFX</a></li><li><a href="colourfx.html">ColourFX</a></li><li><a href="compositefx.html">CompositeFX</a></li><li><a href="convolvefx.html">ConvolveFX</a></li><li><a href="displacementfx.html">DisplacementFX</a></li><li><a href="floodfx.html">FloodFX</a></li><li><a href="imagefx.html">ImageFX</a></li><li><a href="lightingfx.html">LightingFX</a></li><li><a href="mergefx.html">MergeFX</a></li><li><a href="morphologyfx.html">MorphologyFX</a></li><li><a href="offsetfx.html">OffsetFX</a></li><li><a href="remapfx.html">RemapFX</a></li><li><a href="sourcefx.html">SourceFX</a></li><li><a href="turbulencefx.html">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.html">Scintilla</a></li><li><a href="scintillasearch.html">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.html">Bitmap</a></li><li><a href="clipboard.html">Clipboard</a></li><li><a href="display.html">Display</a></li><li><a href="document.html">Document</a></li><li><a href="font.html">Font</a></li><li><a href="picture.html">Picture</a></li><li><a href="pointer.html">Pointer</a></li><li><a href="surface.html">Surface</a></li><li><a href="svg.html">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.html">ClientSocket</a></li><li><a href="http.html">HTTP</a></li><li><a href="netsocket.html">NetSocket</a></li><li><a href="proxy.html">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.html">Vector</a></li><li><a href="vectorclip.html">VectorClip</a></li><li><a href="vectorcolour.html">VectorColour</a></li><li><a href="vectorellipse.html">VectorEllipse</a></li><li><a href="vectorfilter.html">VectorFilter</a></li><li><a href="vectorgradient.html">VectorGradient</a></li><li><a href="vectorimage.html">VectorImage</a></li><li><a href="vectorpath.html">VectorPath</a></li><li><a href="vectorpattern.html">VectorPattern</a></li><li><a href="vectorpolygon.html">VectorPolygon</a></li><li><a href="vectorrectangle.html">VectorRectangle</a></li><li><a href="vectorscene.html">VectorScene</a></li><li><a href="vectorshape.html">VectorShape</a></li><li><a href="vectorspiral.html">VectorSpiral</a></li><li><a href="vectortext.html">VectorText</a></li><li><a href="vectorviewport.html">VectorViewport</a></li><li><a href="vectorwave.html">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

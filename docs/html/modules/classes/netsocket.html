<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="../../index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.html">Modules</a></li><li class="active"><a href="module.html">Classes</a></li><li><a href="https://github.com/parasol-framework/parasol/wiki">Wiki</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>NetSocket Class</h1></div><p class="lead">Manages network connections via TCP/IP sockets.</p>
<p>The NetSocket class provides a simple way of managing TCP/IP socket communications.  Connections from a single client to the server and from the server to multiple clients are supported.  SSL functionality is also integrated.</p>
<p>The design of the NetSocket class caters to asynchronous (non-blocking) communication.  This is achieved primarily through callback fields - connection alerts are managed by <a data-toggle="tooltip" title="A callback trigger for when the state of the NetSocket is changed." href="#tf-Feedback">Feedback</a>, incoming data is received through <a data-toggle="tooltip" title="Callback that is triggered when the socket receives data." href="#tf-Incoming">Incoming</a> and readiness for outgoing data is supported by <a data-toggle="tooltip" title="Callback that is triggered when a socket is ready to send data." href="#tf-Outgoing">Outgoing</a>.</p>
<h3>Client-Server Connections</h3>
<p>After a connection has been established, data may be written using any of the following methods:</p>
<ul>
<li>Write directly to the socket with either the <a data-toggle="tooltip" title="Writes data to the socket." href="#ta-Write">Write()</a> action or <a data-toggle="tooltip" title="Writes a message to the socket." href="#tm-WriteMsg">WriteMsg()</a> method.</li>
<li>Subscribe to the socket by referring to a routine in the <a data-toggle="tooltip" title="Callback that is triggered when a socket is ready to send data." href="#tf-Outgoing">Outgoing</a> field.  The routine will be called to
initially fill the internal write buffer, thereafter it will be called whenever the buffer is empty.</li>
</ul>
<p>It is possible to write to a NetSocket object before the connection to a server is established.  Doing so will buffer the data in the socket until the connection with the server has been initiated, at which point the data will be immediately sent.</p>
<h3>Server-Client Connections</h3>
<p>To accept incoming client connections, create a NetSocket object with the SERVER flag set and define the <a data-toggle="tooltip" title="The port number to use for initiating a connection." href="#tf-Port">Port</a> value on which to listen for new clients.  If multiple connections from a single client IP address are allowed, set the <code>MULTICONNECT</code> flag.</p>
<p>When a new connection is detected, the <a data-toggle="tooltip" title="A callback trigger for when the state of the NetSocket is changed." href="#tf-Feedback">Feedback</a> function will be called as <code>Feedback(*NetSocket, *ClientSocket, LONG State)</code></p>
<p>The NetSocket parameter refers to the original NetSocket object, <a href="clientsocket.html">ClientSocket</a> applies if a client connection is involved and the State value will be set to <code>NTC::CONNECTED</code>.  If a client disconnects, the <a data-toggle="tooltip" title="A callback trigger for when the state of the NetSocket is changed." href="#tf-Feedback">Feedback</a> function will be called in the same manner but with a State value of <code>NTC::DISCONNECTED</code>.</p>
<p>Information on all active connections can be read from the <a data-toggle="tooltip" title="For server sockets, lists all clients connected to the server." href="#tf-Clients">Clients</a> field.  This contains a linked list of IP addresses and their connections to the server port.</p>
<p>To send data to a client, write it to the target <a href="clientsocket.html">ClientSocket</a>.</p>
<p>All data that is received from client sockets will be passed to the <a data-toggle="tooltip" title="Callback that is triggered when the socket receives data." href="#tf-Incoming">Incoming</a> feedback routine with a reference to a <a href="clientsocket.html">ClientSocket</a>.</p><h3>Structure</h3><p>The NetSocket class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-Address" class="clickable"><td class="col-md-1"><a id="tf-Address"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Address</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>An IP address or domain name to connect to.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Address" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>If this field is set with an IP address or domain name prior to initialisation, an attempt to connect to that location will be made when the NetSocket is initialised.  Post-initialisation this field cannot be set by the client, however calls to <a data-toggle="tooltip" title="Connects a NetSocket to an address." href="#tm-Connect">Connect()</a> will result in it being updated so that it always reflects the named address of the current connection.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Backlog" class="clickable"><td class="col-md-1"><a id="tf-Backlog"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">Backlog</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The maximum number of connections that can be queued against the socket.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Backlog" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Incoming connections to NetSocket objects are queued until they are answered by the object.  As there is a limit to the number of connections that can be queued, you can adjust the backlog by writing this field.  The default setting is 10 connections.</p>
<p>If the backlog is exceeded, subsequent connections to the socket will typically be met with a connection refused error.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-ClientData" class="clickable"><td class="col-md-1"><a id="tf-ClientData"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">ClientData</th><td class="col-md-1"><span class="text-nowrap">APTR</span></td><td>A client-defined value that can be useful in action notify events.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-ClientData" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>This is a free-entry field value that can store client data for future reference.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-ClientLimit" class="clickable"><td class="col-md-1"><a id="tf-ClientLimit"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">ClientLimit</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The maximum number of clients that can be connected to a server socket.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Clients" class="clickable"><td class="col-md-1"><a id="tf-Clients"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Clients</th><td class="col-md-1"><span class="text-nowrap">struct NetClient *</span></td><td>For server sockets, lists all clients connected to the server.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Error" class="clickable"><td class="col-md-1"><a id="tf-Error"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Error</th><td class="col-md-1"><span class="text-nowrap">ERR</span></td><td>Information about the last error that occurred during a NetSocket operation</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Error" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>This field describes the last error that occurred during a NetSocket operation:</p>
<p>In the case where a NetSocket object enters the <code>NTC::DISCONNECTED</code> state from the <code>NTC::CONNECTED</code> state, this field can be used to determine how a TCP connection was closed.</p>
<table class="table"><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">ERR::Okay</th><td>The connection was closed gracefully.  All data sent by the peer has been received.</td></tr><tr><th class="col-md-1">ERR::Disconnected</th><td>The connection was broken in a non-graceful fashion. Data may be lost.</td></tr><tr><th class="col-md-1">ERR::TimeOut</th><td>The connect operation timed out.</td></tr><tr><th class="col-md-1">ERR::ConnectionRefused</th><td>The connection was refused by the remote host.  Note: This error will not occur on Windows, and instead the Error field will be set to ERR::Failed.</td></tr><tr><th class="col-md-1">ERR::NetworkUnreachable</th><td>The network was unreachable.  Note: This error will not occur on Windows, and instead the Error field will be set to ERR::Failed.</td></tr><tr><th class="col-md-1">ERR::HostUnreachable</th><td>No path to host was found.  Note: This error will not occur on Windows, and instead the Error field will be set to ERR::Failed.</td></tr><tr><th class="col-md-1">ERR::Failed</th><td>An unspecified error occurred.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Feedback" class="clickable"><td class="col-md-1"><a id="tf-Feedback"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Feedback</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>A callback trigger for when the state of the NetSocket is changed.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Feedback" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Refer to a custom function in this field and it will be called whenever the <a data-toggle="tooltip" title="The current connection state of the netsocket object." href="#tf-State">State</a> of the socket (such as connection or disconnection) changes.</p>
<p>The function must be in the format <code>Function(*NetSocket, *ClientSocket, LONG State)</code></p>
<p>The NetSocket parameter will refer to the NetSocket object to which the Feedback function is subscribed.  The reflects the new value in the <a data-toggle="tooltip" title="The current connection state of the netsocket object." href="#tf-State">State</a> field.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Flags" class="clickable"><td class="col-md-1"><a id="tf-Flags"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">Flags</th><td class="col-md-1"><span class="text-nowrap">NSF</span></td><td>Optional flags.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Flags" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">NSF::LOG_ALL</th><td>Print extra log messages.</td></tr><tr><th class="col-md-1">NSF::MULTI_CONNECT</th><td>Allow multiple connections from the same IP when in server mode.</td></tr><tr><th class="col-md-1">NSF::SERVER</th><td>Puts the socket into server mode.  In this state the netsocket object will wait for incoming connections from clients.</td></tr><tr><th class="col-md-1">NSF::SSL</th><td>Use Secure Sockets Layer for all communication.</td></tr><tr><th class="col-md-1">NSF::SYNCHRONOUS</th><td>Use synchronous (blocking) network calls.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Incoming" class="clickable"><td class="col-md-1"><a id="tf-Incoming"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Incoming</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>Callback that is triggered when the socket receives data.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Incoming" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The Incoming field can be set with a custom function that will be called whenever the socket receives data.  The function must follow this definition: <code>ERR Incoming(*NetSocket, OBJECTPTR Context)</code></p>
<p>The NetSocket parameter refers to the NetSocket object.  The Context refers to the object that set the Incoming field.</p>
<p>Retrieve data from the socket with the <a data-toggle="tooltip" title="Read information from the socket." href="#ta-Read">Read()</a> action. Reading at least some of the data from the socket is compulsory - if the function does not do this then the data will be cleared from the socket when the function returns. If the callback function returns ERR::Terminate then the Incoming field will be cleared and the function will no longer be called.  All other error codes are ignored.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-MsgLimit" class="clickable"><td class="col-md-1"><a id="tf-MsgLimit"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">MsgLimit</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Limits the size of incoming and outgoing messages.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-MsgLimit" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>This field limits the size of incoming and outgoing message queues (each socket connection receives two queues assigned to both incoming and outgoing messages).  The size is defined in bytes.  Sending or receiving messages that overflow the queue results in the connection being terminated with an error.</p>
<p>The default setting is 1 megabyte.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-OutQueueSize" class="clickable"><td class="col-md-1"><a id="tf-OutQueueSize"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">OutQueueSize</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The number of bytes on the socket's outgoing queue.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Outgoing" class="clickable"><td class="col-md-1"><a id="tf-Outgoing"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Outgoing</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>Callback that is triggered when a socket is ready to send data.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Outgoing" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The Outgoing field can be set with a custom function that will be called whenever the socket is ready to send data. The function must be in the format <code>ERR Outgoing(*NetSocket, OBJECTPTR Context)</code></p>
<p>The NetSocket parameter refers to the NetSocket object.  The Context refers to the object that set the Outgoing field.</p>
<p>To send data to the NetSocket object, call the <a data-toggle="tooltip" title="Writes data to the socket." href="#ta-Write">Write()</a> action.  If the callback function returns ERR::Terminate then the Outgoing field will be cleared and the function will no longer be called.  All other error codes are ignored.</p>
<p>The Outgoing field is ineffective if the NetSocket is in server mode (target a connected client socket instead).</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Port" class="clickable"><td class="col-md-1"><a id="tf-Port"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">Port</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The port number to use for initiating a connection.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-SocketHandle" class="clickable"><td class="col-md-1"><a id="tf-SocketHandle"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">SocketHandle</th><td class="col-md-1"><span class="text-nowrap">APTR</span></td><td>Platform specific reference to the network socket handle.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-State" class="clickable"><td class="col-md-1"><a id="tf-State"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">State</th><td class="col-md-1"><span class="text-nowrap">NTC</span></td><td>The current connection state of the netsocket object.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-State" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">NTC::CONNECTED</th><td>There is an active connection at present.</td></tr><tr><th class="col-md-1">NTC::CONNECTING</th><td>A connection is being established.</td></tr><tr><th class="col-md-1">NTC::CONNECTING_SSL</th><td>An SSL connection is being established.</td></tr><tr><th class="col-md-1">NTC::DISCONNECTED</th><td>There is no connection.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-TotalClients" class="clickable"><td class="col-md-1"><a id="tf-TotalClients"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">TotalClients</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Indicates the total number of clients currently connected to the socket (if in server mode).</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-TotalClients" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>In server mode, the netsocket will maintain a count of the total number of clients currently connected to the socket. You can read the total number of connections from this field.</p>
<p>In client mode, this field is always set to zero.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-ValidCert" class="clickable"><td class="col-md-1"><a id="tf-ValidCert"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">ValidCert</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Indicates certificate validity if the socket is encrypted with a certificate.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-ValidCert" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>After an encrypted connection has been made to a server, the ValidCert field can be used to determine the validity of the server's certificate.</p>
<p>If encrypted communication is not supported, <code>ERR::NoSupport</code> is returned.  If the certificate is valid or the connection is not encrypted, a value of zero is returned to indicate that the connection is valid.</p>
      </div></div></td></tr></tbody></table><h3>Actions</h3><p>The following actions are currently supported:</p><table class="table table-hover"><thead><th style="width:1%; border-top-style: none; border-bottom-style: none;"></th><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Disable" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Disable"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Disable</a></th><td>Disables sending and receiving on the socket.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Disable" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>This method will stop all sending and receiving of data over the socket.  This is irreversible.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Failed</th><td>Shutdown operation failed.</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Read" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Read"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Read</a></th><td>Read information from the socket.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Read" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>The Read action will read incoming data from the socket and write it to the provided buffer.  If the socket connection is safe, success will always be returned by this action regardless of whether or not data was available.  Almost all other return codes indicate permanent failure and the socket connection will be closed when the action returns.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Read successful (if no data was on the socket, success is still indicated).</td></tr><tr><th class="col-md-1">Failed</th><td>A permanent failure has occurred and socket has been closed.</td></tr><tr><th class="col-md-1">Disconnected</th><td>The socket connection is closed.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Write" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Write"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Write</a></th><td>Writes data to the socket.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Write" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>Writing data to a socket will send raw data to the remote client or server.  Write connections are buffered, so any data overflow generated in a call to this action will be buffered into a software queue.  Resource limits placed on the software queue are governed by the <a data-toggle="tooltip" title="Limits the size of incoming and outgoing messages." href="#tf-MsgLimit">MsgLimit</a> field setting.</p>
<p>Do not use this action if in server mode.  Instead, write to the <a href="clientsocket.html">ClientSocket</a> object that will receive the data.</p>
<p>It is possible to write to a socket in advance of any connection being made. The netsocket will queue the data and automatically send it once the first connection has been made.</p>
      </div></div></td></tr></tbody></table><h3>Methods</h3><p>The following methods are currently supported:</p><table class="table table-hover"><thead><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Connect" class="clickable"><th class="col-md-1 text-primary">Connect</th><td><a id="tm-Connect"></a>Connects a NetSocket to an address.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-Connect" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR nsConnect(OBJECTPTR Object, CSTRING Address, LONG Port)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Address</td><td>String containing either a domain name (e.g. "www.google.com") or an IP address (e.g. "123.123.123.123")</td></tr><tr><td>Port</td><td>Remote port to connect to.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method initiates the connection process with a target IP address.  The address to connect to can be specified either as a domain name, in which case the domain name is first resolved to an IP address, or the address can be specified in standard IP notation.</p>
<p>This method is non-blocking.  It will return immediately and the connection will be resolved once the server responds to the connection request or an error occurs.  Client code should subscribe to the <a data-toggle="tooltip" title="The current connection state of the netsocket object." href="#tf-State">State</a> field to respond to changes to the connection state.</p>
<p>Pre-Condition: Must be in a connection state of <code>NTC::DISCONNECTED</code></p>
<p>Post-Condition: If this method returns <code>ERR::Okay</code>, will be in state <code>NTC::CONNECTING</code>.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>The NetSocket connecting process was successfully started.</td></tr><tr><th class="col-md-1">Failed</th><td>The connect failed for some other reason.</td></tr><tr><th class="col-md-1">Args</th><td>Address was NULL, or Port was not in the required range.</td></tr><tr><th class="col-md-1">InvalidState</th><td>The NetSocket was not in the state NTC::DISCONNECTED.</td></tr><tr><th class="col-md-1">HostNotFound</th><td>Host name resolution failed.</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DisconnectClient" class="clickable"><th class="col-md-1 text-primary">DisconnectClient</th><td><a id="tm-DisconnectClient"></a>Disconnects all sockets connected to a specific client IP.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DisconnectClient" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR nsDisconnectClient(OBJECTPTR Object, struct NetClient * Client)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Client</td><td>The client to be disconnected.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>For server sockets with client IP connections, this method will terminate all socket connections made to a specific client IP and free the resources allocated to it.  If <a data-toggle="tooltip" title="A callback trigger for when the state of the NetSocket is changed." href="#tf-Feedback">Feedback</a> is defined, a <code>DISCONNECTED</code> state message will also be issued for each socket connection.</p>
<p>If only one socket connection needs to be disconnected, please use <a data-toggle="tooltip" title="Disconnects a single socket that is connected to a client IP address." href="#tm-DisconnectSocket">DisconnectSocket()</a>.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DisconnectSocket" class="clickable"><th class="col-md-1 text-primary">DisconnectSocket</th><td><a id="tm-DisconnectSocket"></a>Disconnects a single socket that is connected to a client IP address.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DisconnectSocket" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR nsDisconnectSocket(OBJECTPTR Object, objClientSocket * Socket)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Socket</td><td>The client socket to be disconnected.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method will disconnect a socket connection for a given client.  If <a data-toggle="tooltip" title="A callback trigger for when the state of the NetSocket is changed." href="#tf-Feedback">Feedback</a> is defined, a <code>DISCONNECTED</code> state message will also be issued.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-GetLocalIPAddress" class="clickable"><th class="col-md-1 text-primary">GetLocalIPAddress</th><td><a id="tm-GetLocalIPAddress"></a>Returns the IP address that the socket is locally bound to.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-GetLocalIPAddress" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR nsGetLocalIPAddress(OBJECTPTR Object, struct IPAddress * Address)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Address</td><td>Pointer to an IPAddress structure which will be set to the result of the query if successful.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method performs the POSIX equivalent of getsockname().  It returns the current address to which the NetSocket is bound.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Failed</th><td>General failure.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-ReadMsg" class="clickable"><th class="col-md-1 text-primary">ReadMsg</th><td><a id="tm-ReadMsg"></a>Read a message from the socket.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-ReadMsg" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR nsReadMsg(OBJECTPTR Object, APTR * Message, LONG * Length, LONG * Progress, LONG * CRC)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Message</td><td>A pointer to the message buffer will be placed here if a message has been received.</td></tr><tr><td>Length</td><td>The length of the message is returned here.</td></tr><tr><td>Progress</td><td>The number of bytes that have been read for the incoming message.</td></tr><tr><td>CRC</td><td>Indicates the CRC value that the message is expected to match.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method reads messages that have been sent to the socket using Parasol Message Protocols.  Any message sent with the WriteMsg method will conform to this protocol, thus simplifying message transfers between programs based on the core platform at either point of the network link.</p>
<p>This method never returns a successful error code unless an entire message has been received from the sender.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>A complete message has been read and indicated in the result parameters.</td></tr><tr><th class="col-md-1">BadData</th><td>The message header or tail was invalid, or the message length exceeded internally imposed limits.</td></tr><tr><th class="col-md-1">LimitedSuccess</th><td>Some data has arrived, but the entire message is incomplete.  The length of the incoming message may be indicated in the Length parameter.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">NoData</th><td>No new data was found for the socket.</td></tr><tr><th class="col-md-1">AllocMemory</th><td>A message buffer could not be allocated.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-WriteMsg" class="clickable"><th class="col-md-1 text-primary">WriteMsg</th><td><a id="tm-WriteMsg"></a>Writes a message to the socket.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-WriteMsg" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR nsWriteMsg(OBJECTPTR Object, APTR Message, LONG Length)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Message</td><td>Pointer to the message to send.</td></tr><tr><td>Length</td><td>The length of the message.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Messages can be written to sockets with the WriteMsg method and read back by the receiver with <a data-toggle="tooltip" title="Read a message from the socket." href="#tm-ReadMsg">ReadMsg()</a>.  The message data is sent through the <a data-toggle="tooltip" title="Writes data to the socket." href="#ta-Write">Write()</a> action, so the standard process will apply (the message will be queued and does not block if buffers are full).</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">OutOfRange</th><td>A specified number is outside of the valid range.</td></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="footer copyright text-right">NetSocket module documentation © Paul Manias © 2005-2024</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_NETSOCKET</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>Network</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/netsocket.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.html">Audio</a></li><li><a href="sound.html">Sound</a></li></ul></li><li>Core<ul><li><a href="file.html">File</a></li><li><a href="metaclass.html">MetaClass</a></li><li><a href="module.html">Module</a></li><li><a href="storagedevice.html">StorageDevice</a></li><li><a href="task.html">Task</a></li><li><a href="thread.html">Thread</a></li><li><a href="time.html">Time</a></li></ul></li><li>Data<ul><li><a href="compression.html">Compression</a></li><li><a href="config.html">Config</a></li><li><a href="script.html">Script</a></li><li><a href="xml.html">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.html">BlurFX</a></li><li><a href="colourfx.html">ColourFX</a></li><li><a href="compositefx.html">CompositeFX</a></li><li><a href="convolvefx.html">ConvolveFX</a></li><li><a href="displacementfx.html">DisplacementFX</a></li><li><a href="floodfx.html">FloodFX</a></li><li><a href="imagefx.html">ImageFX</a></li><li><a href="lightingfx.html">LightingFX</a></li><li><a href="mergefx.html">MergeFX</a></li><li><a href="morphologyfx.html">MorphologyFX</a></li><li><a href="offsetfx.html">OffsetFX</a></li><li><a href="remapfx.html">RemapFX</a></li><li><a href="sourcefx.html">SourceFX</a></li><li><a href="turbulencefx.html">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.html">Scintilla</a></li><li><a href="scintillasearch.html">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.html">Bitmap</a></li><li><a href="clipboard.html">Clipboard</a></li><li><a href="display.html">Display</a></li><li><a href="document.html">Document</a></li><li><a href="font.html">Font</a></li><li><a href="picture.html">Picture</a></li><li><a href="pointer.html">Pointer</a></li><li><a href="surface.html">Surface</a></li><li><a href="svg.html">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.html">ClientSocket</a></li><li><a href="http.html">HTTP</a></li><li><a href="netsocket.html">NetSocket</a></li><li><a href="proxy.html">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.html">Vector</a></li><li><a href="vectorclip.html">VectorClip</a></li><li><a href="vectorcolour.html">VectorColour</a></li><li><a href="vectorellipse.html">VectorEllipse</a></li><li><a href="vectorfilter.html">VectorFilter</a></li><li><a href="vectorgradient.html">VectorGradient</a></li><li><a href="vectorgroup.html">VectorGroup</a></li><li><a href="vectorimage.html">VectorImage</a></li><li><a href="vectorpath.html">VectorPath</a></li><li><a href="vectorpattern.html">VectorPattern</a></li><li><a href="vectorpolygon.html">VectorPolygon</a></li><li><a href="vectorrectangle.html">VectorRectangle</a></li><li><a href="vectorscene.html">VectorScene</a></li><li><a href="vectorshape.html">VectorShape</a></li><li><a href="vectorspiral.html">VectorSpiral</a></li><li><a href="vectortext.html">VectorText</a></li><li><a href="vectortransition.html">VectorTransition</a></li><li><a href="vectorviewport.html">VectorViewport</a></li><li><a href="vectorwave.html">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

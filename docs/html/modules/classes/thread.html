<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="../../index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.html">Modules</a></li><li class="active"><a href="module.html">Classes</a></li><li><a href="../fluid.html">Fluid</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>Thread Class</h1></div><p class="lead">Threads are created and managed by the Thread class.</p>
<p>The Thread class provides the means to execute and manage threads within an application.</p>
<p>The following code illustrates how to create a temporary thread that is automatically destroyed after the thread_entry() function has completed:</p>
<pre>static ERROR thread_entry(objThread *Thread) {
   return ERR_Okay;
}

objThread::create thread = { fl::Routine(thread_entry), fl::Flags(THF::AUTO_FREE) };
if (thread.ok()) thread-&gt;activate(thread);

</pre>
<p>To initialise the thread with data, call <a data-toggle="tooltip" title="Attaches data to the thread." href="#tm-SetData">SetData()</a> prior to execution and read the <a data-toggle="tooltip" title="Pointer to initialisation data for the thread." href="#tf-Data">Data</a> field from within the thread routine.</p><h3>Structure</h3><p>The Thread class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-Callback" class="clickable"><td class="col-md-1"><a id="tf-Callback"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Callback</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>A function reference that will be called when the thread is started.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Callback" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Set a function reference here to receive a notification when the thread finishes processing.  The callback will be executed in the context of the main program loop to minimise resource locking issues.</p>
<p>The synopsis for the callback routine is <code>void Callback(objThread *Thread)</code>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Data" class="clickable"><td class="col-md-1"><a id="tf-Data"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Data</th><td class="col-md-1"><span class="text-nowrap">APTR</span></td><td>Pointer to initialisation data for the thread.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Data" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The Data field will point to a data buffer if the <a data-toggle="tooltip" title="Attaches data to the thread." href="#tm-SetData">SetData()</a> method has previously been called to store data in the thread object.  It is paired with the <a data-toggle="tooltip" title="The size of the buffer referenced in the Data field." href="#tf-DataSize">DataSize</a> field, which reflects the size of the data buffer.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-DataSize" class="clickable"><td class="col-md-1"><a id="tf-DataSize"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">DataSize</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The size of the buffer referenced in the Data field.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Error" class="clickable"><td class="col-md-1"><a id="tf-Error"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Error</th><td class="col-md-1"><span class="text-nowrap">ERROR</span></td><td>Reflects the error code returned by the thread routine.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Flags" class="clickable"><td class="col-md-1"><a id="tf-Flags"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">Flags</th><td class="col-md-1"><span class="text-nowrap">THF</span></td><td>Optional flags can be defined here.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Flags" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">THF_AUTO_FREE</th><td>Automatically destroy the Thread object when the user routine has completed.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Routine" class="clickable"><td class="col-md-1"><a id="tf-Routine"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Routine</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>A function reference that will be called when the thread is started.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Routine" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The routine that will be executed when the thread is activated must be specified here.  The function synopsis is <code>ERROR routine(objThread *Thread)</code>.</p>
<p>When the routine is called, a reference to the thread object is passed as a parameter.  Once the routine has finished processing, the resulting error code will be stored in the thread object's <a data-toggle="tooltip" title="Reflects the error code returned by the thread routine." href="#tf-Error">Error</a> field.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-StackSize" class="clickable"><td class="col-md-1"><a id="tf-StackSize"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">StackSize</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The stack size to allocate for the thread.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-StackSize" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The initial size of the thread's stack can be modified by setting this field.  It may also be read prior to activation in order to check the default stack size.  Changes to the stack size when the thread is active will have no effect.</p>
<p>On some platforms it may not be possible to preset the stack size and the provided value will be ignored.</p>
      </div></div></td></tr></tbody></table><h3>Actions</h3><p>The following actions are currently supported:</p><table class="table table-hover"><thead><th style="width:1%; border-top-style: none; border-bottom-style: none;"></th><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Activate" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Activate"></a></td><th class="col-md-1"><a href="actions.html">Activate</a></th><td>Spawn a new thread that calls the function referenced in the Routine field.</td></tr><tr data-toggle="collapse" data-target="#fl-Deactivate" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Deactivate"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Deactivate</a></th><td>Stops a thread.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Deactivate" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>Deactivating an active thread will cause it to stop immediately.  Stopping a thread in this manner is dangerous and could result in an unstable application.</p>
      </div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Free" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Free"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Free</a></th><td>Remove the object and its resources.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Free" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>Terminating a thread object will destroy the object unless the thread is currently active.  If an attempt to free an active thread is made then it will be marked for termination so as to avoid the risk of system corruption.</p>
      </div></div></td></tr></tbody></table><h3>Methods</h3><p>The following methods are currently supported:</p><table class="table table-hover"><thead><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-SetData" class="clickable"><th class="col-md-1 text-primary">SetData</th><td><a id="tm-SetData"></a>Attaches data to the thread.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-SetData" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR thSetData(OBJECTPTR Object, APTR Data, LONG Size)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Data</td><td>Pointer to the data buffer.</td></tr><tr><td>Size</td><td>Size of the data buffer.  If zero, the pointer is stored directly, with no copy operation taking place.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Use the SetData method prior to activating a thread so that it can be initialised with user data.  The thread will be able to read the data from the <a data-toggle="tooltip" title="Pointer to initialisation data for the thread." href="#tf-Data">Data</a> field.</p>
<p>A copy of the provided data buffer will be stored with the thread object, so there is no need to retain the original data after this method has returned.  In some cases it may be desirable to store a direct pointer value and bypass the copy operation.  To do this, set the Size parameter to zero.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">AllocMemory</th><td>A call to AllocMemory() failed to create a new memory block.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Wait" class="clickable"><th class="col-md-1 text-primary">Wait</th><td><a id="tm-Wait"></a>Waits for a thread to be completed.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-Wait" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR thWait(OBJECTPTR Object, LONG TimeOut)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>TimeOut</td><td>A timeout value measured in milliseconds.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Call the Wait method to wait for a thread to complete its activity.  Incoming messages will continue to be processed by ProcessMessages while waiting.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>The thread is no longer active.</td></tr><tr><th class="col-md-1">Args</th><td>The TimeOut value is invalid.</td></tr><tr><th class="col-md-1">TimeOut</th><td>The timeout was reached before the thread was terminated.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="footer copyright text-right">Thread module documentation © Paul Manias 1996-2023</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_THREAD</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>System</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/thread.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.html">Audio</a></li><li><a href="sound.html">Sound</a></li></ul></li><li>Core<ul><li><a href="file.html">File</a></li><li><a href="metaclass.html">MetaClass</a></li><li><a href="module.html">Module</a></li><li><a href="storagedevice.html">StorageDevice</a></li><li><a href="task.html">Task</a></li><li><a href="thread.html">Thread</a></li><li><a href="time.html">Time</a></li></ul></li><li>Data<ul><li><a href="compression.html">Compression</a></li><li><a href="config.html">Config</a></li><li><a href="script.html">Script</a></li><li><a href="xml.html">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.html">BlurFX</a></li><li><a href="colourfx.html">ColourFX</a></li><li><a href="compositefx.html">CompositeFX</a></li><li><a href="convolvefx.html">ConvolveFX</a></li><li><a href="displacementfx.html">DisplacementFX</a></li><li><a href="floodfx.html">FloodFX</a></li><li><a href="imagefx.html">ImageFX</a></li><li><a href="lightingfx.html">LightingFX</a></li><li><a href="mergefx.html">MergeFX</a></li><li><a href="morphologyfx.html">MorphologyFX</a></li><li><a href="offsetfx.html">OffsetFX</a></li><li><a href="remapfx.html">RemapFX</a></li><li><a href="sourcefx.html">SourceFX</a></li><li><a href="turbulencefx.html">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.html">Scintilla</a></li><li><a href="scintillasearch.html">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.html">Bitmap</a></li><li><a href="clipboard.html">Clipboard</a></li><li><a href="display.html">Display</a></li><li><a href="document.html">Document</a></li><li><a href="font.html">Font</a></li><li><a href="picture.html">Picture</a></li><li><a href="pointer.html">Pointer</a></li><li><a href="surface.html">Surface</a></li><li><a href="svg.html">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.html">ClientSocket</a></li><li><a href="http.html">HTTP</a></li><li><a href="netsocket.html">NetSocket</a></li><li><a href="proxy.html">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.html">Vector</a></li><li><a href="vectorclip.html">VectorClip</a></li><li><a href="vectorcolour.html">VectorColour</a></li><li><a href="vectorellipse.html">VectorEllipse</a></li><li><a href="vectorfilter.html">VectorFilter</a></li><li><a href="vectorgradient.html">VectorGradient</a></li><li><a href="vectorimage.html">VectorImage</a></li><li><a href="vectorpath.html">VectorPath</a></li><li><a href="vectorpattern.html">VectorPattern</a></li><li><a href="vectorpolygon.html">VectorPolygon</a></li><li><a href="vectorrectangle.html">VectorRectangle</a></li><li><a href="vectorscene.html">VectorScene</a></li><li><a href="vectorshape.html">VectorShape</a></li><li><a href="vectorspiral.html">VectorSpiral</a></li><li><a href="vectortext.html">VectorText</a></li><li><a href="vectorviewport.html">VectorViewport</a></li><li><a href="vectorwave.html">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

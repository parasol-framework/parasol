<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="../../index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.html">Modules</a></li><li class="active"><a href="module.html">Classes</a></li><li><a href="../fluid.html">Fluid</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>Compression Class</h1></div><p class="lead">Compresses data into archives, supporting a variety of compression formats.</p>
<p>The Compression class provides the necessary means to compress and decompress data.  It provides support for file based compression as well as memory based compression routines.  The base class uses zip algorithms to support pkzip files, while other forms of compressed data can be supported by installing additional compression sub-classes.</p>
<p>The following examples demonstrate basic usage of compression objects in Fluid:</p>
<pre>// Create a new zip archive and compress two files.

cmp = obj.new('compression', { path='temp:result.zip', flags='!NEW' } )
err = cmp.mtCompressFile('config:defs/compression.def', '')
err = cmp.mtCompressFile('config:defs/core.def', '')

// Decompress all *.def files in the root of an archive.

cmp = obj.new('compression', { path='temp:result.zip' } )
err = cmp.mtDecompressFile('*.def', 'temp:')
</pre>
<p>It is strongly advised that Compression objects are created for the purpose of either writing to, or reading from the target archive.  The class is not designed for both purposes simultaneously, particularly due to considerations for maximising operational speed.</p>
<p>If data is to be encrypted or decrypted, set the <a data-toggle="tooltip" title="Required if an archive needs an encryption password for access." href="#tf-Password">Password</a> field with a null-terminated encryption string. If the password for an encrypted file, errors will be returned when trying to decompress the information (the source archive may be reported as a corrupted file).</p>
<p>To list the contents of an archive, use the <a data-toggle="tooltip" title="Scan the archive's index of compressed data." href="#tm-Scan">Scan()</a> method.</p>
<p>To adjust the level of compression used to pack each file, set the <a data-toggle="tooltip" title="The compression level to use when compressing data." href="#tf-CompressionLevel">CompressionLevel</a> field to a value between 0 and 100%.</p>
<p>This code is based on the work of Jean-loup Gailly and Mark Adler.</p><h3>Structure</h3><p>The Compression class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-ArchiveName" class="clickable"><td class="col-md-1"><a id="tf-ArchiveName"></a><span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not readable"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">ArchiveName</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>Apply an archive name to the object, allowing it to be used as a named object in the file system.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-ArchiveName" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Setting the ArchiveName will allow a Compression object's files to be accessible using standard file system paths. This is achieved through use of the <code>archive:</code> volume, which is a file system extension included in the Compression module.  Please refer to the <a href="FileArchive.html">FileArchive</a> class for further information on this feature.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-CompressionLevel" class="clickable"><td class="col-md-1"><a id="tf-CompressionLevel"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">CompressionLevel</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The compression level to use when compressing data.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-CompressionLevel" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The level of compression that is used when compressing data is determined by the value in this field.  Values range between 0 for no compression and 100 for maximum compression.  The speed of compression decreases with higher values, but the compression ratio will improve.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Feedback" class="clickable"><td class="col-md-1"><a id="tf-Feedback"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Feedback</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>Provides feedback during the de/compression process.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Feedback" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>To receive feedback during any de/compression process, set a callback routine in this field. The format for the callback routine is <code>ERR Function(*Compression, *CompressionFeedback)</code>.</p>
<p>For object classes, the object that initiated the de/compression process can be learned by calling the Core's CurrentContext function.</p>
<p>During the processing of multiple files, any individual file can be skipped by returning <code>ERR::Skip</code> and the entire process can be cancelled by returning ERR::Terminate.  All other error codes are ignored.</p>
<p>The CompressionFeedback structure consists of the following fields:</p>
<table class="table"><thead><tr><th class="col-md-1">Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">FeedbackID</th><td>FDB</td><td>Set to one of the FDB event indicators</td></tr><tr><th class="col-md-1">Index</th><td>LONG</td><td>Index of the current file</td></tr><tr><th class="col-md-1">Path</th><td>CSTRING</td><td>Name of the current file/path in the archive</td></tr><tr><th class="col-md-1">Dest</th><td>CSTRING</td><td>Destination file/path during decompression</td></tr><tr><th class="col-md-1">Progress</th><td>LARGE</td><td>Progress indicator (byte position for the file being de/compressed).</td></tr><tr><th class="col-md-1">OriginalSize</th><td>LARGE</td><td>Original size of the file</td></tr><tr><th class="col-md-1">CompressedSize</th><td>LARGE</td><td>Compressed size of the file</td></tr><tr><th class="col-md-1">Year</th><td>WORD</td><td>Year of the original file's datestamp.</td></tr><tr><th class="col-md-1">Month</th><td>WORD</td><td>Month of the original file's datestamp.</td></tr><tr><th class="col-md-1">Day</th><td>WORD</td><td>Day of the original file's datestamp.</td></tr><tr><th class="col-md-1">Hour</th><td>WORD</td><td>Hour of the original file's datestamp.</td></tr><tr><th class="col-md-1">Minute</th><td>WORD</td><td>Minute of the original file's datestamp.</td></tr><tr><th class="col-md-1">Second</th><td>WORD</td><td>Second of the original file's datestamp.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Flags" class="clickable"><td class="col-md-1"><a id="tf-Flags"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">Flags</th><td class="col-md-1"><span class="text-nowrap">CMF</span></td><td>Optional flags.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Flags" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">CMF_APPLY_SECURITY</th><td>When decompressing, apply individual file permissions if they are available in the compression file.</td></tr><tr><th class="col-md-1">CMF_CREATE_FILE</th><td>Create a new archive only if the source file does not already exist.</td></tr><tr><th class="col-md-1">CMF_NEW</th><td>Force the creation of a new file archive.  Any existing file data at the target location will be destroyed.</td></tr><tr><th class="col-md-1">CMF_NO_LINKS</th><td>Treat symbolic links as normal files/folders.</td></tr><tr><th class="col-md-1">CMF_PASSWORD</th><td>A password has been set on the object.</td></tr><tr><th class="col-md-1">CMF_READ_ONLY</th><td>Forces read-only access, which is strongly recommended if an existing archive is being opened with no modifications intended.  If this flag is not set, initialisation can fail if the user does not have write access to the source file.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-MinOutputSize" class="clickable"><td class="col-md-1"><a id="tf-MinOutputSize"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">MinOutputSize</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Indicates the minimum output buffer size that will be needed during de/compression.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-MinOutputSize" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>This field indicates the minimum allowable buffer size for output during decompression and compression processing. This field must be checked before allocating your own buffers for holding compressed and decompressed output, as failing to allocate enough buffer space is extremely likely to result in overflow errors.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Output" class="clickable"><td class="col-md-1"><a id="tf-Output"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-cog text-danger" data-toggle="tooltip" title="Immutable"></span></td><th class="col-md-1">Output</th><td class="col-md-1"><span class="text-nowrap">OBJECTID</span></td><td>Resulting messages will be sent to the object referred to in this field.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Output" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>If this field is set to a valid ObjectID, text messages will be sent to that object when the compression object is used.  This can be helpful for notifying the user of the results of compression, decompression and removal of files.</p>
<p>The target object must be capable of processing incoming text from data channels.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Password" class="clickable"><td class="col-md-1"><a id="tf-Password"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Password</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>Required if an archive needs an encryption password for access.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Password" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Set the password field if an archive will use a password for the encryption of its contents.  The string must be null-terminated and not more than 128 bytes in length.</p>
<p>It is recommended that the Password is set before or immediately after initialisation.  To change the password of an existing archive, create a new compression object with the desired password and transfer the existing data across to it.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Path" class="clickable"><td class="col-md-1"><a id="tf-Path"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Path</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>Set if the compressed data originates from, or is to be saved to a file source.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Path" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>To load or create a new file archive, set the Path field to the path of that file.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Permissions" class="clickable"><td class="col-md-1"><a id="tf-Permissions"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct write access"></span></td><th class="col-md-1">Permissions</th><td class="col-md-1"><span class="text-nowrap">PERMIT</span></td><td>Default permissions for decompressed files are defined here.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Permissions" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>By default the permissions of files added to an archive are derived from their source location.  This behaviour can be over-ridden by setting the Permissions field.  Valid permission flags are outlined in the <a href="File.html">File</a> class.</p>
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">PERMIT_ALL_DELETE</th><td>Synonym for EVERYONE_DELETE</td></tr><tr><th class="col-md-1">PERMIT_ALL_EXEC</th><td>Synonym for EVERYONE_EXEC</td></tr><tr><th class="col-md-1">PERMIT_ALL_READ</th><td>Synonym for EVERYONE_READ</td></tr><tr><th class="col-md-1">PERMIT_ALL_WRITE</th><td>Synonym for EVERYONE_WRITE</td></tr><tr><th class="col-md-1">PERMIT_ARCHIVE</th><td>Marks the file for future backup.  The flag should be cleared after the backup has succeeded.</td></tr><tr><th class="col-md-1">PERMIT_DELETE</th><td>Owner can delete.  If the file system does not support this, deletion is enabled via the WRITE flag.</td></tr><tr><th class="col-md-1">PERMIT_EVERYONE_ACCESS</th><td>Synonym for EVERYONE_READ | EVERYONE_WRITE | EVERYONE_EXEC | EVERYONE_DELETE</td></tr><tr><th class="col-md-1">PERMIT_EVERYONE_DELETE</th><td>Synonym for DELETE | GROUP_DELETE | OTHERS_DELETE</td></tr><tr><th class="col-md-1">PERMIT_EVERYONE_EXEC</th><td>Synonym for EXEC | GROUP_EXEC | OTHERS_EXEC</td></tr><tr><th class="col-md-1">PERMIT_EVERYONE_READ</th><td>Synonym for READ | GROUP_READ | OTHERS_READ</td></tr><tr><th class="col-md-1">PERMIT_EVERYONE_READWRITE</th><td>Synonym for EVERYONE_READ | EVERYONE_WRITE</td></tr><tr><th class="col-md-1">PERMIT_EVERYONE_WRITE</th><td>Synonym for WRITE | GROUP_WRITE | OTHERS_WRITE</td></tr><tr><th class="col-md-1">PERMIT_EXEC</th><td>User/Owner can execute.</td></tr><tr><th class="col-md-1">PERMIT_GROUP</th><td>Synonym for GROUP_READ | GROUP_WRITE | GROUP_EXEC | GROUP_DELETE</td></tr><tr><th class="col-md-1">PERMIT_GROUPID</th><td>Allows executables to run with a set group id.</td></tr><tr><th class="col-md-1">PERMIT_GROUP_DELETE</th><td>Group members can delete.</td></tr><tr><th class="col-md-1">PERMIT_GROUP_EXEC</th><td>Group members can execute.</td></tr><tr><th class="col-md-1">PERMIT_GROUP_READ</th><td>Group members can read.</td></tr><tr><th class="col-md-1">PERMIT_GROUP_WRITE</th><td>Group members can write.</td></tr><tr><th class="col-md-1">PERMIT_HIDDEN</th><td>Recommends that the file is hidden from view by default.</td></tr><tr><th class="col-md-1">PERMIT_INHERIT</th><td>Inherit permissions from parent folder and logical OR them with preset permission flags.</td></tr><tr><th class="col-md-1">PERMIT_NETWORK</th><td>File is hosted on another machine.</td></tr><tr><th class="col-md-1">PERMIT_OFFLINE</th><td>File content for this networked file has not been cached on the local PC.</td></tr><tr><th class="col-md-1">PERMIT_OTHERS</th><td>Synonym for OTHERS_READ | OTHERS_WRITE | OTHERS_EXEC | OTHERS_DELETE</td></tr><tr><th class="col-md-1">PERMIT_OTHERS_DELETE</th><td>Others can delete.</td></tr><tr><th class="col-md-1">PERMIT_OTHERS_EXEC</th><td>Others can execute.</td></tr><tr><th class="col-md-1">PERMIT_OTHERS_READ</th><td>Others can read.</td></tr><tr><th class="col-md-1">PERMIT_OTHERS_WRITE</th><td>Others can write.</td></tr><tr><th class="col-md-1">PERMIT_PASSWORD</th><td>File is password protected.</td></tr><tr><th class="col-md-1">PERMIT_READ</th><td>User/Owner has read access.  This will not allow compiled code to be executed.</td></tr><tr><th class="col-md-1">PERMIT_USER</th><td>Synonym for READ | WRITE | EXEC | DELETE</td></tr><tr><th class="col-md-1">PERMIT_USERID</th><td>Allows executables to run with a set user id.</td></tr><tr><th class="col-md-1">PERMIT_USER_EXEC</th><td>Synonym for EXEC</td></tr><tr><th class="col-md-1">PERMIT_USER_READ</th><td>Synonym for READ</td></tr><tr><th class="col-md-1">PERMIT_USER_WRITE</th><td>Synonym for WRITE</td></tr><tr><th class="col-md-1">PERMIT_WRITE</th><td>User/Owner can write.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Size" class="clickable"><td class="col-md-1"><a id="tf-Size"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Size</th><td class="col-md-1"><span class="text-nowrap">BIGINT</span></td><td>Indicates the size of the source archive, in bytes.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-TotalOutput" class="clickable"><td class="col-md-1"><a id="tf-TotalOutput"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">TotalOutput</th><td class="col-md-1"><span class="text-nowrap">BIGINT</span></td><td>The total number of bytes that have been output during the compression or decompression of streamed data.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-UncompressedSize" class="clickable"><td class="col-md-1"><a id="tf-UncompressedSize"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">UncompressedSize</th><td class="col-md-1"><span class="text-nowrap">BIGINT</span></td><td>The total decompressed size of all files in an archive.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-UncompressedSize" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>If you would like to know the total number of bytes that have been compressed into a compression object, read this field.  This will tell you the maximum byte count used if every file were to be decompressed.  Header and tail information that may identify the compressed data is not included in the total.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-WindowBits" class="clickable"><td class="col-md-1"><a id="tf-WindowBits"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">WindowBits</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Special option for certain compression formats.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-WindowBits" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The WindowBits field defines the size of the sliding window frame for the default compression format (DEFLATE), but may also be of use to other compression formats that use this technique.</p>
<p>For DEFLATE compression, the window bits range must lie between 8 and 15.  Please note that if the value is negative, the algorithm will not output the traditional zlib header information.</p>
<p>To support GZIP decompression, please set the WindowBits value to 47.</p>
      </div></div></td></tr></tbody></table><h3>Actions</h3><p>The following actions are currently supported:</p><table class="table table-hover"><thead><th style="width:1%; border-top-style: none; border-bottom-style: none;"></th><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Flush" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Flush"></a></td><th class="col-md-1"><a href="actions.html">Flush</a></th><td>Flushes all pending actions.</td></tr></tbody></table><h3>Methods</h3><p>The following methods are currently supported:</p><table class="table table-hover"><thead><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-CompressBuffer" class="clickable"><th class="col-md-1 text-primary">CompressBuffer</th><td><a id="tm-CompressBuffer"></a>Compresses a plain memory area into an empty buffer.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-CompressBuffer" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpCompressBuffer(OBJECTPTR Object, APTR Input, LONG InputSize, APTR Output, LONG OutputSize, LONG * Result)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Input</td><td>Pointer to the source data.</td></tr><tr><td>InputSize</td><td>Byte length of the source data.</td></tr><tr><td>Output</td><td>Pointer to a destination buffer.</td></tr><tr><td>OutputSize</td><td>Available space in the destination buffer.</td></tr><tr><td>Result</td><td>The size of the compressed data will be returned in this parameter.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method provides a simple way of compressing a memory area into a buffer.  It requires a reference to the source data and a buffer large enough to accept the compressed information.  Generally the destination buffer should be no smaller than 75% of the size of the source data.  If the destination buffer is not large enough, an error of <code>ERR::BufferOverflow</code> will be returned.  The size of the compressed data will be returned in the Result parameter.</p>
<p>To decompress the data that is output by this function, use the <a data-toggle="tooltip" title="Decompresses data originating from the CompressBuffer method." href="#tm-DecompressBuffer">DecompressBuffer()</a> method.</p>
<p>The compression method used to compress the data will be identified in the first 32 bits of output, for example, <code>ZLIB</code>.  The following 32 bits will indicate the length of the compressed data section, followed by the data itself.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>The data was compressed successfully.  The Result parameter indicates the size of the compressed data.</td></tr><tr><th class="col-md-1">Failed</th><td>General failure.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">BufferOverflow</th><td>The output buffer is not large enough.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-CompressFile" class="clickable"><th class="col-md-1 text-primary">CompressFile</th><td><a id="tm-CompressFile"></a>Add files to a compression object.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-CompressFile" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpCompressFile(OBJECTPTR Object, CSTRING Location, CSTRING Path)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Location</td><td>The location of the file(s) to add.</td></tr><tr><td>Path</td><td>The path that is prefixed to the file name when added to the compression object.  May be NULL for no path.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>The CompressFile method is used to add new files and folders to a compression object. You need to supply the location of the file to compress, as well as the path that is prefixed to the file name when it is in the compression object. The Location parameter accepts wildcards, allowing you to add multiple files in a single function call if you require this convenience.</p>
<p>To compress all contents of a folder, specify its path in the Location parameter and ensure that it is fully qualified by appending a forward slash or colon character.</p>
<p>The Path parameter must include a slash when targeting a folder, otherwise the source file will be renamed to suit the target path.  If the Path starts with a forward slash and the source is a folder, the name of that folder will be used in the target path for the compressed files and folders.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>The file was added to the compression object.</td></tr><tr><th class="col-md-1">File</th><td>An error was encountered when trying to open the source file.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">NoSupport</th><td>The sub-class does not support this method.</td></tr><tr><th class="col-md-1">NoPermission</th><td>The READ_ONLY flag has been set on the compression object.</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-CompressStream" class="clickable"><th class="col-md-1 text-primary">CompressStream</th><td><a id="tm-CompressStream"></a>Compresses streamed data into a buffer.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-CompressStream" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpCompressStream(OBJECTPTR Object, APTR Input, LONG Length, FUNCTION * Callback, APTR Output, LONG OutputSize)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Input</td><td>Pointer to the source data.</td></tr><tr><td>Length</td><td>Amount of data to compress, in bytes.</td></tr><tr><td>Callback</td><td>This callback function will be called with a pointer to the compressed data.</td></tr><tr><td>Output</td><td>Optional.  Points to a buffer that will receive the compressed data.  Must be equal to or larger than the MinOutputSize field.</td></tr><tr><td>OutputSize</td><td>Indicates the size of the Output buffer, otherwise set to zero.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Use the CompressStream method to compress incoming streams of data whilst using a minimal amount of memory.  The compression process is handled in three phases of Start, Compress and End.  The methods provided for each phase are <a data-toggle="tooltip" title="Initialises a new compression stream." href="#tm-CompressStreamStart">CompressStreamStart()</a>, <a data-toggle="tooltip" title="Compresses streamed data into a buffer." href="#tm-CompressStream">CompressStream()</a> and <a data-toggle="tooltip" title="Ends the compression of an open stream." href="#tm-CompressStreamEnd">CompressStreamEnd()</a>.</p>
<p>A compression object can manage only one compression stream at any given time.  If it is necessary to compress multiple streams at once, create a compression object for each individual stream.</p>
<p>No meta-information is written to the stream, so the client will need a way to record the total number of bytes that have been output during the compression process. This value must be stored somewhere in order to decompress the stream correctly.  There is also no header information recorded to identify the type of algorithm used to compress the stream.  We recommend that the compression object's sub-class ID is stored for future reference.</p>
<p>The following C code illustrates a simple means of compressing a file to another file using a stream:</p>
<pre>ERR error = mtCompressStreamStart(compress);

if (!error) {
   LONG len;
   LONG cmpsize = 0;
   UBYTE input[4096];
   while (!(error = acRead(file, input, sizeof(input), &amp;len))) {
      if (!len) break; // No more data to read.

      error = mtCompressStream(compress, input, len, &amp;callback, NULL, 0);
      if (error) break;

      if (result &gt; 0) {
         cmpsize += result;
         error = acWrite(outfile, output, result, &amp;len);
         if (error) break;
      }
   }

   if (!error) {
      if (!(error = mtCompressStreamEnd(compress, NULL, 0))) {
         cmpsize += result;
         error = acWrite(outfile, output, result, &amp;len);
      }
   }
}
</pre>
<p>Please note that, depending on the type of algorithm, this method will not always write data to the output buffer.  The algorithm may store a copy of the input and wait for more data for efficiency reasons.  Any unwritten data will be resolved when the stream is terminated with <a data-toggle="tooltip" title="Ends the compression of an open stream." href="#tm-CompressStreamEnd">CompressStreamEnd()</a>.  To check if data was output by this function, either set a flag in the callback function or compare the <a data-toggle="tooltip" title="The total number of bytes that have been output during the compression or decompression of streamed data." href="#tf-TotalOutput">TotalOutput</a> value to its original setting before CompressStream was called.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Retry</th><td>Please recall the method using a larger output buffer.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">BufferOverflow</th><td>The output buffer is not large enough to contain the compressed data.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-CompressStreamEnd" class="clickable"><th class="col-md-1 text-primary">CompressStreamEnd</th><td><a id="tm-CompressStreamEnd"></a>Ends the compression of an open stream.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-CompressStreamEnd" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpCompressStreamEnd(OBJECTPTR Object, FUNCTION * Callback, APTR Output, LONG OutputSize)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Callback</td><td>Refers to a function that will be called for each compressed block of data.</td></tr><tr><td>Output</td><td>Optional pointer to a buffer that will receive the compressed data.  If not set, the compression object will use its own buffer.</td></tr><tr><td>OutputSize</td><td>Size of the buffer specified in Output (value ignored if Output is NULL).</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>To end the compression process, this method must be called to write any final blocks of data and remove the resources that were allocated.</p>
<p>The expected format of the Callback function is specified in the <a data-toggle="tooltip" title="Compresses streamed data into a buffer." href="#tm-CompressStream">CompressStream()</a> method.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">BufferOverflow</th><td>The supplied Output buffer is not large enough (check the MinOutputSize field for the minimum allowable size).</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-CompressStreamStart" class="clickable"><th class="col-md-1 text-primary">CompressStreamStart</th><td><a id="tm-CompressStreamStart"></a>Initialises a new compression stream.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-CompressStreamStart" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpCompressStreamStart(OBJECTPTR Object)</samp></div></div><div class="docs-content" style="margin:30px 20px;">
<p>The level of compression is determined by the <a data-toggle="tooltip" title="The compression level to use when compressing data." href="#tf-CompressionLevel">CompressionLevel</a> field value.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Failed</th><td>Failed to initialise the decompression process.</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DecompressBuffer" class="clickable"><th class="col-md-1 text-primary">DecompressBuffer</th><td><a id="tm-DecompressBuffer"></a>Decompresses data originating from the CompressBuffer method.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DecompressBuffer" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpDecompressBuffer(OBJECTPTR Object, APTR Input, APTR Output, LONG OutputSize, LONG * Result)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Input</td><td>Pointer to the compressed data.</td></tr><tr><td>Output</td><td>Pointer to the decompression buffer.</td></tr><tr><td>OutputSize</td><td>Size of the decompression buffer.</td></tr><tr><td>Result</td><td>The amount of bytes decompressed will be returned in this parameter.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method is used to decompress data that has been packed using the <a data-toggle="tooltip" title="Compresses a plain memory area into an empty buffer." href="#tm-CompressBuffer">CompressBuffer()</a> method.  A pointer to the compressed data and an output buffer large enough to contain the decompressed data are required.  If the output buffer is not large enough to contain the data, the method will write out as much information as it can and then return with an error code of <code>ERR::BufferOverflow</code>.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">BufferOverflow</th><td>The output buffer is not large enough to hold the decompressed information.</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DecompressFile" class="clickable"><th class="col-md-1 text-primary">DecompressFile</th><td><a id="tm-DecompressFile"></a>Extracts one or more files from a compression object.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DecompressFile" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpDecompressFile(OBJECTPTR Object, CSTRING Path, CSTRING Dest, LONG Flags)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Path</td><td>The full path name of the file to extract from the archive.</td></tr><tr><td>Dest</td><td>The destination to extract the file to.</td></tr><tr><td>Flags</td><td>Optional flags.  Currently unused.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Use the DecompressFile method to decompress a file or files to a destination folder.  The exact path name of the compressed file is required for extraction unless using wildcards.  A single asterisk in the Path parameter will extract all files in a compression object.</p>
<p>When specifying the Dest parameter, it is recommended that you specify a folder location by using a forward slash at the end of the string.  If this is omitted, the destination will be interpreted as a file name.  If the destination file already exists, it will be overwritten by the decompressed data.</p>
<p>This method sends feedback at regular intervals during decompression.  For further information on receiving feedback, please refer to the <a data-toggle="tooltip" title="Provides feedback during the de/compression process." href="#tf-Feedback">Feedback</a> field.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>The file was successfully extracted.</td></tr><tr><th class="col-md-1">Cancelled</th><td>The decompression process was cancelled by the feedback mechanism.</td></tr><tr><th class="col-md-1">Failed</th><td>General failure.</td></tr><tr><th class="col-md-1">File</th><td>A destination file could not be created.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">NoData</th><td>No data is available for use.</td></tr><tr><th class="col-md-1">Write</th><td>Failed to write uncompressed information to a destination file.</td></tr><tr><th class="col-md-1">MissingPath</th><td>The object is missing a setting in the Path or Location field.</td></tr><tr><th class="col-md-1">Seek</th><td>An error occurred during a seek operation.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DecompressObject" class="clickable"><th class="col-md-1 text-primary">DecompressObject</th><td><a id="tm-DecompressObject"></a>Decompresses one file to a target object.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DecompressObject" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpDecompressObject(OBJECTPTR Object, CSTRING Path, OBJECTPTR Object)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Path</td><td>The location of the source file within the archive.  If a wildcard is used, the first matching file is extracted.</td></tr><tr><td>Object</td><td>The target object for the decompressed source data.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>The DecompressObject method will decompress a file to a target object, using a series of <a data-toggle="tooltip" title="" href="#ta-Write">Write()</a> calls.</p>
<p>This method sends feedback at regular intervals during decompression.  For further information on receiving feedback, please refer to the <a data-toggle="tooltip" title="Provides feedback during the de/compression process." href="#tf-Feedback">Feedback</a> field.</p>
<p>Note that if decompressing to a <a href="File.html">File</a> object, the seek position will point to the end of the file after this method returns.  Reset the seek position to zero if the decompressed data needs to be read back.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Failed</th><td>General failure.</td></tr><tr><th class="col-md-1">Write</th><td>Error writing data to file.</td></tr><tr><th class="col-md-1">MissingPath</th><td>The object is missing a setting in the Path or Location field.</td></tr><tr><th class="col-md-1">Seek</th><td>An error occurred during a seek operation.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DecompressStream" class="clickable"><th class="col-md-1 text-primary">DecompressStream</th><td><a id="tm-DecompressStream"></a>Decompresses streamed data to an output buffer.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DecompressStream" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpDecompressStream(OBJECTPTR Object, APTR Input, LONG Length, FUNCTION * Callback, APTR Output, LONG OutputSize)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Input</td><td>Pointer to data to decompress.</td></tr><tr><td>Length</td><td>Amount of data to decompress from the Input parameter.</td></tr><tr><td>Callback</td><td>Refers to a function that will be called for each decompressed block of information.</td></tr><tr><td>Output</td><td>Optional pointer to a buffer that will receive the decompressed data.  If not set, the compression object will use its own buffer.</td></tr><tr><td>OutputSize</td><td>Size of the buffer specified in Output (value ignored if Output is NULL).</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Call DecompressStream repeatedly to decompress a data stream and process the results in a callback routine.  The client will need to provide a pointer to the data in the Input parameter and indicate its size in Length.  The decompression routine will call the routine that was specified in Callback for each block that is decompressed.</p>
<p>The format of the Callback routine is <code>ERR Function(*Compression, APTR Buffer, LONG Length)</code></p>
<p>The Buffer will refer to the start of the decompressed data and its size will be indicated in Length.  If the Callback routine returns an error of any kind, the decompression process will be stopped and the error code will be immediately returned by the method.</p>
<p>Optionally, the client can specify an output buffer in the Output parameter.  This can be a valuable optimisation technique, as it will eliminate the need to copy data out of the compression object's internal buffer.</p>
<p>When there is no more data in the decompression stream or if an error has occurred, the client must call <a data-toggle="tooltip" title="Must be called at the end of the decompression process." href="#tm-DecompressStreamEnd">DecompressStreamEnd()</a>.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">AllocMemory</th><td>A call to AllocMemory() failed to create a new memory block.</td></tr><tr><th class="col-md-1">BufferOverflow</th><td>The output buffer is not large enough.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DecompressStreamEnd" class="clickable"><th class="col-md-1 text-primary">DecompressStreamEnd</th><td><a id="tm-DecompressStreamEnd"></a>Must be called at the end of the decompression process.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DecompressStreamEnd" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpDecompressStreamEnd(OBJECTPTR Object, FUNCTION * Callback)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Callback</td><td>Refers to a function that will be called for each decompressed block of information.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>To end the decompression process, this method must be called to write any final blocks of data and remove the resources that were allocated during decompression.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-DecompressStreamStart" class="clickable"><th class="col-md-1 text-primary">DecompressStreamStart</th><td><a id="tm-DecompressStreamStart"></a>Initialises a new decompression stream.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-DecompressStreamStart" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpDecompressStreamStart(OBJECTPTR Object)</samp></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Use the DecompressStreamStart method to initialise a new decompression stream.  No parameters are required.</p>
<p>If a decompression stream is already active at the time that this method is called, all resources associated with that stream will be deallocated so that the new stream can be initiated.</p>
<p>To decompress the data stream, follow this call with repeated calls to <a data-toggle="tooltip" title="Decompresses streamed data to an output buffer." href="#tm-DecompressStream">DecompressStream()</a> until all the data has been processed, then call <a data-toggle="tooltip" title="Must be called at the end of the decompression process." href="#tm-DecompressStreamEnd">DecompressStreamEnd()</a>.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Failed</th><td>Failed to initialise the decompression process.</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Find" class="clickable"><th class="col-md-1 text-primary">Find</th><td><a id="tm-Find"></a>Find the first item that matches a given filter.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-Find" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpFind(OBJECTPTR Object, CSTRING Path, STR Flags, struct CompressedItem ** Item)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Path</td><td>Search for a specific item or items, using wildcards.</td></tr><tr><td><a href="#" onclick="showPage('STR');">Flags</a></td><td>String comparison flags used by StrCompare().</td></tr><tr><td>Item</td><td>The discovered item is returned in this parameter, or NULL if the search failed.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Use the Find method to search for a specific item in an archive.  The algorithm will return the first item that matches the Path parameter string in conjunction with the options in Flags.  The options match those in the StrCompare function - in particular <code>STR::CASE</code>, <code>STR::MATCH_LEN</code> and <code>STR::WILDCARD</code> are the most useful.</p>
<p>Please refer to the <a data-toggle="tooltip" title="Scan the archive's index of compressed data." href="#tm-Scan">Scan()</a> method for a break-down of the CompressedItem structure that is returned by this method.  The resulting structure is temporary and values will be discarded on the next call to this method.  If persistent values are required, copy the resulting structure immediately after the call.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Search</th><td>A search routine in this function failed.</td></tr><tr><th class="col-md-1">NoSupport</th><td>This request is not supported.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-RemoveFile" class="clickable"><th class="col-md-1 text-primary">RemoveFile</th><td><a id="tm-RemoveFile"></a>Deletes one or more files from a compression object.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-RemoveFile" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpRemoveFile(OBJECTPTR Object, CSTRING Path)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Path</td><td>The full path name of the file to delete from the archive.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method deletes compressed files from a compression object.  If the file is in a folder then the client must specify the complete path in conjunction with the file name.  Wild cards are accepted if you want to delete multiple files.  A Path setting of <code>*</code> will delete an archive's entire contents, while a more conservative Path of <code>documents/ *</code> would delete all files and directories under the documents path.  Directories can be declared using either the back-slash or the forward-slash characters.</p>
<p>Depending on internal optimisation techniques, the compressed file may not shrink from deletions until the compression object is closed or the <a data-toggle="tooltip" title="Flushes all pending actions." href="#ta-Flush">Flush()</a> action is called.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>The file was successfully deleted.</td></tr><tr><th class="col-md-1">NoSupport</th><td>This request is not supported.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Scan" class="clickable"><th class="col-md-1 text-primary">Scan</th><td><a id="tm-Scan"></a>Scan the archive's index of compressed data.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-Scan" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERR cmpScan(OBJECTPTR Object, CSTRING Folder, CSTRING Filter, FUNCTION * Callback)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Folder</td><td>If defined, only items within the specified folder are returned.  Use an empty string for files in the root folder.</td></tr><tr><td>Filter</td><td>Search for a specific item or items by name, using wildcards.  If NULL or an empty string, all items will be scanned.</td></tr><tr><td>Callback</td><td>This callback function will be called with a pointer to a CompressedItem structure.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Use the Scan method to search an archive's list of items.  Optional filtering can be applied using the Folder parameter to limit results to those within a folder, and Filter parameter to apply wildcard matching to item names.  Each item that is discovered during the scan will be passed to the function referenced in the Callback parameter.  If the Callback function returns ERR::Terminate, the scan will stop immediately.  The synopsis of the callback function is <code>ERR Function(*Compression, *CompressedItem)</code>.</p>
<p>The CompressedItem structure consists of the following fields:</p>
<table class="table"><thead><tr><th class="col-md-1">Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">OriginalSize</th><td>LARGE</td><td>Original size of the file</td></tr><tr><th class="col-md-1">CompressedSize</th><td>LARGE</td><td>Compressed size of the file</td></tr><tr><th class="col-md-1">Next</th><td>struct CompressedItem *</td><td>Used only if this is a linked-list.</td></tr><tr><th class="col-md-1">Path</th><td>CSTRING</td><td>Path to the file (includes folder prefixes).  Archived folders will include the trailing slash.</td></tr><tr><th class="col-md-1">Permissions</th><td>PERMIT</td><td>Original permissions - see PERMIT flags.</td></tr><tr><th class="col-md-1">UserID</th><td>LONG</td><td>Original user ID</td></tr><tr><th class="col-md-1">GroupID</th><td>LONG</td><td>Original group ID</td></tr><tr><th class="col-md-1">OthersID</th><td>LONG</td><td>Original others ID</td></tr><tr><th class="col-md-1">Flags</th><td>FL</td><td>FL flags</td></tr><tr><th class="col-md-1">Created</th><td>struct DateTime</td><td>Date and time of the file's creation.</td></tr><tr><th class="col-md-1">Modified</th><td>struct DateTime</td><td>Date and time last modified.</td></tr></tbody></table>
<p>To search for a single item with a path and name already known, please use the <a data-toggle="tooltip" title="Find the first item that matches a given filter." href="#tm-Find">Find()</a> method instead.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">NoSupport</th><td>This request is not supported.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="footer copyright text-right">Compression module documentation © Paul Manias 1996-2024</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_COMPRESSION</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>Data</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/compression.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.html">Audio</a></li><li><a href="sound.html">Sound</a></li></ul></li><li>Core<ul><li><a href="file.html">File</a></li><li><a href="metaclass.html">MetaClass</a></li><li><a href="module.html">Module</a></li><li><a href="storagedevice.html">StorageDevice</a></li><li><a href="task.html">Task</a></li><li><a href="thread.html">Thread</a></li><li><a href="time.html">Time</a></li></ul></li><li>Data<ul><li><a href="compression.html">Compression</a></li><li><a href="config.html">Config</a></li><li><a href="script.html">Script</a></li><li><a href="xml.html">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.html">BlurFX</a></li><li><a href="colourfx.html">ColourFX</a></li><li><a href="compositefx.html">CompositeFX</a></li><li><a href="convolvefx.html">ConvolveFX</a></li><li><a href="displacementfx.html">DisplacementFX</a></li><li><a href="floodfx.html">FloodFX</a></li><li><a href="imagefx.html">ImageFX</a></li><li><a href="lightingfx.html">LightingFX</a></li><li><a href="mergefx.html">MergeFX</a></li><li><a href="morphologyfx.html">MorphologyFX</a></li><li><a href="offsetfx.html">OffsetFX</a></li><li><a href="remapfx.html">RemapFX</a></li><li><a href="sourcefx.html">SourceFX</a></li><li><a href="turbulencefx.html">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.html">Scintilla</a></li><li><a href="scintillasearch.html">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.html">Bitmap</a></li><li><a href="clipboard.html">Clipboard</a></li><li><a href="display.html">Display</a></li><li><a href="document.html">Document</a></li><li><a href="font.html">Font</a></li><li><a href="picture.html">Picture</a></li><li><a href="pointer.html">Pointer</a></li><li><a href="surface.html">Surface</a></li><li><a href="svg.html">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.html">ClientSocket</a></li><li><a href="http.html">HTTP</a></li><li><a href="netsocket.html">NetSocket</a></li><li><a href="proxy.html">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.html">Vector</a></li><li><a href="vectorclip.html">VectorClip</a></li><li><a href="vectorcolour.html">VectorColour</a></li><li><a href="vectorellipse.html">VectorEllipse</a></li><li><a href="vectorfilter.html">VectorFilter</a></li><li><a href="vectorgradient.html">VectorGradient</a></li><li><a href="vectorimage.html">VectorImage</a></li><li><a href="vectorpath.html">VectorPath</a></li><li><a href="vectorpattern.html">VectorPattern</a></li><li><a href="vectorpolygon.html">VectorPolygon</a></li><li><a href="vectorrectangle.html">VectorRectangle</a></li><li><a href="vectorscene.html">VectorScene</a></li><li><a href="vectorshape.html">VectorShape</a></li><li><a href="vectorspiral.html">VectorSpiral</a></li><li><a href="vectortext.html">VectorText</a></li><li><a href="vectorviewport.html">VectorViewport</a></li><li><a href="vectorwave.html">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

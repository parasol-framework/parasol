<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.xml">Modules</a></li><li class="active"><a href="module.xml">Classes</a></li><li><a href="../fluid.html">Fluid</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>LightingFX Class</h1></div><p class="lead">Enables the application of lighting effects.</p>
<p>The lighting effect class applies a diffuse or specular lighting effect to the alpha channel of an input bitmap, which functions as a bump map.  The output is an RGBA representation of the light effect.  If no light <a data-toggle="tooltip" title="Defines the colour of the light source." href="#tf-Colour">Colour</a> is specified by the client then the output will be in grey scale.</p>
<p>For diffuse lighting, the resulting RGBA image is computed as follows:</p>
<pre>Dr = kd * N.L * Lr
Dg = kd * N.L * Lg
Db = kd * N.L * Lb
Da = 1.0
</pre>
<p>where</p>
<pre>kd = Diffuse lighting constant
N  = Surface normal unit vector, a function of x and y
L  = Unit vector pointing from surface to light, a function of x and y in the point and spot light cases
Lr,Lg,Lb = RGB components of light, a function of x and y in the spot light case
</pre>
<p>For specular lighting, the resulting RGBA image is computed as follows:</p>
<pre>Sr = ks * pow(N.H, specularExponent) * Lr
Sg = ks * pow(N.H, specularExponent) * Lg
Sb = ks * pow(N.H, specularExponent) * Lb
Sa = max(Sr, Sg, Sb)
</pre>
<p>where</p>
<pre>ks = Specular lighting constant
N  = Surface normal unit vector, a function of x and y
H  = "Halfway" unit vector between eye unit vector and light unit vector

Lr,Lg,Lb = RGB components of light
</pre>
<p>The definition of <code>H</code> reflects our assumption of the constant eye vector <code>E = (0,0,1)</code>:</p>
<pre>H = (L + E) / Norm(L + E)
</pre>
<p>where <code>L</code> is the light unit vector.</p><h3>Structure</h3><p>The LightingFX class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-Colour" class="clickable"><td class="col-md-1"><a id="tf-Colour"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Colour</th><td class="col-md-1"><span class="text-nowrap">ARRAY</span></td><td>Defines the colour of the light source.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Colour" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Set the Colour field to define the colour of the light source.  The colour is defined as an array of four 32-bit floating point values between 0 and 1.0.  The array elements consist of Red, Green, Blue and Alpha values in that order.</p>
<p>If the algorithm supports it, the Alpha component defines the intensity of the light source.</p>
<p>The default colour is pure white, <code>1.0,1.0,1.0,1.0</code>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Constant" class="clickable"><td class="col-md-1"><a id="tf-Constant"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Constant</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>Specifies the ks/kd value in Phong lighting model.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Constant" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>In the Phong lighting model, this field specifies the kd value in diffuse mode, or ks value in specular mode.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Exponent" class="clickable"><td class="col-md-1"><a id="tf-Exponent"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Exponent</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>Exponent for specular lighting, larger is more "shiny".  Ranges from 1.0 to 128.0.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Exponent" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>This field defines the exponent value for specular lighting, within a range of 1.0 to 128.0.  The larger the value, shinier the end result.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Scale" class="clickable"><td class="col-md-1"><a id="tf-Scale"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Scale</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>The maximum height of the input surface (bump map) when the alpha input is 1.0.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Type" class="clickable"><td class="col-md-1"><a id="tf-Type"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Type</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Defines the type of surface light scattering, which can be specular or diffuse.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Type" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th class="col-md-1">LT_DIFFUSE</th><td>Select diffuse lighting.</td></tr><tr><th class="col-md-1">LT_SPECULAR</th><td>Select specular lighting.</td></tr></tbody></table>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-UnitX" class="clickable"><td class="col-md-1"><a id="tf-UnitX"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">UnitX</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>The intended distance in current filter units for dx in the surface normal calculation formulas.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-UnitX" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Indicates the intended distance in current filter units (i.e. as determined by the value of PrimitiveUnits) for dx in the surface normal calculation formulas.</p>
<p>By specifying value(s) for <a data-toggle="tooltip" title="The intended distance in current filter units for dx in the surface normal calculation formulas." href="#tf-UnitX">UnitX</a>, the kernel becomes defined in a scalable, abstract coordinate system.  If <a data-toggle="tooltip" title="The intended distance in current filter units for dx in the surface normal calculation formulas." href="#tf-UnitX">UnitX</a> is not specified, the default value is one pixel in the offscreen bitmap, which is a pixel-based coordinate system, and thus potentially not scalable.  For some level of consistency across display media and user agents, it is necessary that a value be provided for at least one of ResX and <a data-toggle="tooltip" title="The intended distance in current filter units for dx in the surface normal calculation formulas." href="#tf-UnitX">UnitX</a>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-UnitY" class="clickable"><td class="col-md-1"><a id="tf-UnitY"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">UnitY</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>The intended distance in current filter units for dy in the surface normal calculation formulas.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-UnitY" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Indicates the intended distance in current filter units (i.e. as determined by the value of PrimitiveUnits) for dy in the surface normal calculation formulas.</p>
<p>By specifying value(s) for <a data-toggle="tooltip" title="The intended distance in current filter units for dy in the surface normal calculation formulas." href="#tf-UnitY">UnitY</a>, the kernel becomes defined in a scalable, abstract coordinate system.  If <a data-toggle="tooltip" title="The intended distance in current filter units for dy in the surface normal calculation formulas." href="#tf-UnitY">UnitY</a> is not specified, the default value is one pixel in the offscreen bitmap, which is a pixel-based coordinate system, and thus potentially not scalable.  For some level of consistency across display media and user agents, it is necessary that a value be provided for at least one of ResY and <a data-toggle="tooltip" title="The intended distance in current filter units for dy in the surface normal calculation formulas." href="#tf-UnitY">UnitY</a>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-XMLDef" class="clickable"><td class="col-md-1"><a id="tf-XMLDef"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">XMLDef</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>Returns an SVG compliant XML string that describes the filter.</td></tr></tbody></table><h3>Actions</h3><p>The following actions are currently supported:</p><table class="table table-hover"><thead><th style="width:1%; border-top-style: none; border-bottom-style: none;"></th><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Draw" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Draw"></a></td><th class="col-md-1"><a href="actions.xml">Draw</a></th><td>Render the effect to the target bitmap.</td></tr></tbody></table><h3>Methods</h3><p>The following methods are currently supported:</p><table class="table table-hover"><thead><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-SetDistantLight" class="clickable"><th class="col-md-1 text-primary">SetDistantLight</th><td><a id="tm-SetDistantLight"></a>Configure lighting with a distant light source.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-SetDistantLight" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR ltSetDistantLight(OBJECTPTR Object, DOUBLE Azimuth, DOUBLE Elevation)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Azimuth</td><td>Direction angle for the light source on the XY plane (clockwise), in degrees from the X axis.</td></tr><tr><td>Elevation</td><td>Direction angle for the light source from the XY plane towards the Z axis, in degrees.  A positive value points towards the viewer of the content.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method applies a distant light configuration to the lighting effect.  It will override any previously defined light source setting.</p>
<p>A distant light can be thought of as like the light from the sun.  An infinite amount of parallel light rays travel in the direction that the distant light points to.  Distant lights are handy when you want equal illumination on objects in a scene.</p>
      </div></div></td></tr><tr data-toggle="collapse" data-target="#fl-SetPointLight" class="clickable"><th class="col-md-1 text-primary">SetPointLight</th><td><a id="tm-SetPointLight"></a>Configure lighting with a pointed light source.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-SetPointLight" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR ltSetPointLight(OBJECTPTR Object, DOUBLE X, DOUBLE Y, DOUBLE Z)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>X</td><td>X location for the light source.</td></tr><tr><td>Y</td><td>Y location for the light source.</td></tr><tr><td>Z</td><td>Z location for the light source.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method applies a pointed light configuration to the lighting effect.  It will override any previously defined light source setting.</p>
<p>A point light sends light out from the specified (X, Y, Z) location equally in all directions.  A light bulb or open flame is a good example of a point light.  The intensity of the light can be controlled by altering the alpha component of the light <a data-toggle="tooltip" title="Defines the colour of the light source." href="#tf-Colour">Colour</a>.</p>
      </div></div></td></tr><tr data-toggle="collapse" data-target="#fl-SetSpotLight" class="clickable"><th class="col-md-1 text-primary">SetSpotLight</th><td><a id="tm-SetSpotLight"></a>Configure lighting with a spot light source.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-SetSpotLight" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR ltSetSpotLight(OBJECTPTR Object, DOUBLE X, DOUBLE Y, DOUBLE Z, DOUBLE PX, DOUBLE PY, DOUBLE PZ, DOUBLE Exponent, DOUBLE ConeAngle)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>X</td><td>X location for the light source.</td></tr><tr><td>Y</td><td>Y location for the light source.</td></tr><tr><td>Z</td><td>Z location for the light source.  The positive Z-axis comes out towards the person viewing the content and assuming that one unit along the Z-axis equals one unit in X and Y.</td></tr><tr><td>PX</td><td>X location of the light source's target.</td></tr><tr><td>PY</td><td>Y location of the light source's target.</td></tr><tr><td>PZ</td><td>Z location of the light source's target.</td></tr><tr><td>Exponent</td><td>Exponent value controlling the focus for the light source.</td></tr><tr><td>ConeAngle</td><td>A limiting cone which restricts the region where the light is projected, or 0 to disable.  Specified in degrees.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method applies a spot light configuration to the lighting effect.  It will override any previously defined light source setting.</p>
<p>A spot light beams light rays from the defined (X, Y, Z) position to the (PX, PY, PZ) position.  The Exponent and ConeAngle work together to constrain the edge of the light projection.</p>
      </div></div></td></tr></tbody></table></div><div class="footer copyright text-right">LightingFX module documentation © Paul Manias © 2010-2023</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_LIGHTINGFX</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>Graphics</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/lightingfx.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.xml">Audio</a></li><li><a href="sound.xml">Sound</a></li></ul></li><li>Core<ul><li><a href="file.xml">File</a></li><li><a href="metaclass.xml">MetaClass</a></li><li><a href="module.xml">Module</a></li><li><a href="storagedevice.xml">StorageDevice</a></li><li><a href="task.xml">Task</a></li><li><a href="thread.xml">Thread</a></li><li><a href="time.xml">Time</a></li></ul></li><li>Data<ul><li><a href="compression.xml">Compression</a></li><li><a href="config.xml">Config</a></li><li><a href="script.xml">Script</a></li><li><a href="xml.xml">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.xml">BlurFX</a></li><li><a href="colourfx.xml">ColourFX</a></li><li><a href="compositefx.xml">CompositeFX</a></li><li><a href="convolvefx.xml">ConvolveFX</a></li><li><a href="displacementfx.xml">DisplacementFX</a></li><li><a href="floodfx.xml">FloodFX</a></li><li><a href="imagefx.xml">ImageFX</a></li><li><a href="lightingfx.xml">LightingFX</a></li><li><a href="mergefx.xml">MergeFX</a></li><li><a href="morphologyfx.xml">MorphologyFX</a></li><li><a href="offsetfx.xml">OffsetFX</a></li><li><a href="remapfx.xml">RemapFX</a></li><li><a href="sourcefx.xml">SourceFX</a></li><li><a href="turbulencefx.xml">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.xml">Scintilla</a></li><li><a href="scintillasearch.xml">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.xml">Bitmap</a></li><li><a href="clipboard.xml">Clipboard</a></li><li><a href="display.xml">Display</a></li><li><a href="document.xml">Document</a></li><li><a href="font.xml">Font</a></li><li><a href="picture.xml">Picture</a></li><li><a href="pointer.xml">Pointer</a></li><li><a href="surface.xml">Surface</a></li><li><a href="svg.xml">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.xml">ClientSocket</a></li><li><a href="http.xml">HTTP</a></li><li><a href="netsocket.xml">NetSocket</a></li><li><a href="proxy.xml">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.xml">Vector</a></li><li><a href="vectorclip.xml">VectorClip</a></li><li><a href="vectorcolour.xml">VectorColour</a></li><li><a href="vectorellipse.xml">VectorEllipse</a></li><li><a href="vectorfilter.xml">VectorFilter</a></li><li><a href="vectorgradient.xml">VectorGradient</a></li><li><a href="vectorimage.xml">VectorImage</a></li><li><a href="vectorpath.xml">VectorPath</a></li><li><a href="vectorpattern.xml">VectorPattern</a></li><li><a href="vectorpolygon.xml">VectorPolygon</a></li><li><a href="vectorrectangle.xml">VectorRectangle</a></li><li><a href="vectorscene.xml">VectorScene</a></li><li><a href="vectorshape.xml">VectorShape</a></li><li><a href="vectorspiral.xml">VectorSpiral</a></li><li><a href="vectortext.xml">VectorText</a></li><li><a href="vectorviewport.xml">VectorViewport</a></li><li><a href="vectorwave.xml">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

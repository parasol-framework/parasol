<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.xml">Modules</a></li><li class="active"><a href="module.xml">Classes</a></li><li><a href="../fluid.html">Fluid</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>ConvolveFX Class</h1></div><p class="lead">Applies a matrix convolution filter effect.</p>
<p>Convolve applies a matrix convolution filter effect to an input source.  A convolution combines pixels in the input image with neighbouring pixels to produce a resulting image.  A wide variety of imaging operations can be achieved through convolutions, including blurring, edge detection, sharpening, embossing and beveling.</p>
<p>A matrix convolution is based on an n-by-m matrix (the convolution kernel) which describes how a given pixel value in the input image is combined with its neighbouring pixel values to produce a resulting pixel value. Each result pixel is determined by applying the kernel matrix to the corresponding source pixel and its neighbouring pixels.  The basic convolution formula which is applied to each colour value for a given pixel is:</p>
<pre>COLOURX,Y = (
     SUM I=0 to [MatrixRows-1] {
       SUM J=0 to [MatrixColumns-1] {
         SOURCE X - TargetX + J, Y - TargetY + I * Matrix * MatrixColumns - J - 1,  MatrixRows - I - 1
       }
     }
   ) / Divisor + Bias * ALPHAX,Y
</pre>
<p>Note in the above formula that the values in the kernel matrix are applied such that the kernel matrix is rotated 180 degrees relative to the source and destination images in order to match convolution theory as described in many computer graphics textbooks.</p>
<p>Because they operate on pixels, matrix convolutions are inherently resolution-dependent.  To make resolution-independent results, an explicit value should be provided for either the ResX and ResY attributes on the parent VectorFilter and/or <a data-toggle="tooltip" title="The distance in filter units between rows in the Matrix." href="#tf-UnitX">UnitX</a> and <a data-toggle="tooltip" title="The distance in filter units between columns in the Matrix." href="#tf-UnitY">UnitY</a>.</p><h3>Structure</h3><p>The ConvolveFX class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-Bias" class="clickable"><td class="col-md-1"><a id="tf-Bias"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Bias</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>Used to adjust the final result of each computed RGB value.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Bias" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>After applying the <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a> to the input image to yield a number and applying the <a data-toggle="tooltip" title="Defines the divisor value in the convolution algorithm." href="#tf-Divisor">Divisor</a>, the Bias value is added to each component.  One application of Bias is when it is desirable to have .5 gray value be the zero response of the filter.  The Bias value shifts the range of the filter.  This allows representation of values that would otherwise be clamped to 0 or 1.  The default is 0.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Divisor" class="clickable"><td class="col-md-1"><a id="tf-Divisor"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Divisor</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>Defines the divisor value in the convolution algorithm.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Divisor" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>After applying the <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a> to the input image to yield a number, that number is divided by <a data-toggle="tooltip" title="Defines the divisor value in the convolution algorithm." href="#tf-Divisor">Divisor</a> to yield the final destination color value.  A divisor that is the sum of all the matrix values tends to have an evening effect on the overall color intensity of the result.  The default value is the sum of all values in <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a>, with the exception that if the sum is zero, then the divisor is set to 1.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-EdgeMode" class="clickable"><td class="col-md-1"><a id="tf-EdgeMode"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">EdgeMode</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Defines the behaviour of the convolve algorithm around the edges of the input image.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-EdgeMode" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>The EdgeMode determines how to extend the input image with color values so that the matrix operations can be applied when the <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a> is positioned at or near the edge of the input image.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Matrix" class="clickable"><td class="col-md-1"><a id="tf-Matrix"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">Matrix</th><td class="col-md-1"><span class="text-nowrap">DOUBLE []</span></td><td>A list of numbers that make up the kernel matrix for the convolution.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-Matrix" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>A list of numbers that make up the kernel matrix for the convolution.  The number of entries in the list must equal <code>MatrixColumns * MatrixRows</code>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-MatrixColumns" class="clickable"><td class="col-md-1"><a id="tf-MatrixColumns"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">MatrixColumns</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The number of columns in the Matrix.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-MatrixColumns" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Indicates the number of columns represented in <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a>.  A typical value is <code>3</code>.  It is recommended that only small values are used; higher values may result in very high CPU overhead and usually do not produce results that justify the impact on performance.  The default value is 3.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-MatrixRows" class="clickable"><td class="col-md-1"><a id="tf-MatrixRows"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">MatrixRows</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The number of rows in the Matrix.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-MatrixRows" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Indicates the number of rows represented in <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a>.  A typical value is <code>3</code>.  It is recommended that only small values are used; higher values may result in very high CPU overhead and usually do not produce results that justify the impact on performance.  The default value is 3.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-PreserveAlpha" class="clickable"><td class="col-md-1"><a id="tf-PreserveAlpha"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">PreserveAlpha</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>If TRUE, the alpha channel is protected from the effects of the convolve algorithm.</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-TargetX" class="clickable"><td class="col-md-1"><a id="tf-TargetX"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">TargetX</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The X position of the matrix in relation to the input image.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-TargetX" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Determines the positioning in X of the convolution matrix relative to a given target pixel in the input image.  The left-most column of the matrix is column number zero.  The value must be such that <code>0 &lt;= TargetX &lt; MatrixColumns</code>.  By default, the convolution matrix is centered in X over each pixel of the input image, i.e. <code>TargetX = floor(MatrixColumns / 2)</code>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-TargetY" class="clickable"><td class="col-md-1"><a id="tf-TargetY"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">TargetY</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>The Y position of the matrix in relation to the input image.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-TargetY" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Determines the positioning in Y of the convolution matrix relative to a given target pixel in the input image.  The left-most column of the matrix is column number zero.  The value must be such that <code>0 &lt;= TargetY &lt; MatrixRows</code>.  By default, the convolution matrix is centered in Y over each pixel of the input image, i.e. <code>TargetY = floor(MatrixRows / 2)</code>.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-UnitX" class="clickable"><td class="col-md-1"><a id="tf-UnitX"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">UnitX</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>The distance in filter units between rows in the Matrix.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-UnitX" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Indicates the intended distance in current filter units (i.e. as determined by the value of PrimitiveUnits) between successive columns and rows, respectively, in the <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a>.  By specifying value(s) for <a data-toggle="tooltip" title="The distance in filter units between rows in the Matrix." href="#tf-UnitX">UnitX</a>, the kernel becomes defined in a scalable, abstract coordinate system.  If <a data-toggle="tooltip" title="The distance in filter units between rows in the Matrix." href="#tf-UnitX">UnitX</a> is not specified, the default value is one pixel in the offscreen bitmap, which is a pixel-based coordinate system, and thus potentially not scalable.  For some level of consistency across display media and user agents, it is necessary that a value be provided for at least one of ResX and <a data-toggle="tooltip" title="The distance in filter units between rows in the Matrix." href="#tf-UnitX">UnitX</a>.</p>
<p>The most consistent results and the fastest performance will be achieved if the pixel grid of the offscreen bitmap aligns with the pixel grid of the kernel.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-UnitY" class="clickable"><td class="col-md-1"><a id="tf-UnitY"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional write access"></span></td><th class="col-md-1">UnitY</th><td class="col-md-1"><span class="text-nowrap">DOUBLE</span></td><td>The distance in filter units between columns in the Matrix.</td></tr><tr class="no-hover"><td colspan="4" class="hiddenRow"><div id="fl-UnitY" class="accordion-body collapse"><div class="doc-content" style="margin:20px">
<p>Indicates the intended distance in current filter units (i.e. as determined by the value of PrimitiveUnits) between successive columns and rows, respectively, in the <a data-toggle="tooltip" title="A list of numbers that make up the kernel matrix for the convolution." href="#tf-Matrix">Matrix</a>.  By specifying value(s) for <a data-toggle="tooltip" title="The distance in filter units between columns in the Matrix." href="#tf-UnitY">UnitY</a>, the kernel becomes defined in a scalable, abstract coordinate system.  If <a data-toggle="tooltip" title="The distance in filter units between columns in the Matrix." href="#tf-UnitY">UnitY</a> is not specified, the default value is one pixel in the offscreen bitmap, which is a pixel-based coordinate system, and thus potentially not scalable.  For some level of consistency across display media and user agents, it is necessary that a value be provided for at least one of ResY and <a data-toggle="tooltip" title="The distance in filter units between columns in the Matrix." href="#tf-UnitY">UnitY</a>.</p>
<p>The most consistent results and the fastest performance will be achieved if the pixel grid of the offscreen bitmap aligns with the pixel grid of the kernel.</p>
      </div></div></td></tr><tr id="_" data-toggle="collapse" data-target="#fl-XMLDef" class="clickable"><td class="col-md-1"><a id="tf-XMLDef"></a><span class="glyphicon glyphicon-ok text-danger" data-toggle="tooltip" title="Functional read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">XMLDef</th><td class="col-md-1"><span class="text-nowrap">STRING</span></td><td>Returns an SVG compliant XML string that describes the effect.</td></tr></tbody></table><h3>Actions</h3><p>The following actions are currently supported:</p><table class="table table-hover"><thead><th style="width:1%; border-top-style: none; border-bottom-style: none;"></th><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Draw" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Draw"></a></td><th class="col-md-1"><a href="actions.xml">Draw</a></th><td>Draws object graphics to drawable areas.</td></tr></tbody></table></div><div class="footer copyright text-right">ConvolveFX module documentation © Paul Manias © 2010-2023</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_CONVOLVEFX</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>Graphics</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/convolvefx.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.xml">Audio</a></li><li><a href="sound.xml">Sound</a></li></ul></li><li>Core<ul><li><a href="file.xml">File</a></li><li><a href="metaclass.xml">MetaClass</a></li><li><a href="module.xml">Module</a></li><li><a href="storagedevice.xml">StorageDevice</a></li><li><a href="task.xml">Task</a></li><li><a href="thread.xml">Thread</a></li><li><a href="time.xml">Time</a></li></ul></li><li>Data<ul><li><a href="compression.xml">Compression</a></li><li><a href="config.xml">Config</a></li><li><a href="script.xml">Script</a></li><li><a href="xml.xml">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.xml">BlurFX</a></li><li><a href="colourfx.xml">ColourFX</a></li><li><a href="compositefx.xml">CompositeFX</a></li><li><a href="convolvefx.xml">ConvolveFX</a></li><li><a href="displacementfx.xml">DisplacementFX</a></li><li><a href="floodfx.xml">FloodFX</a></li><li><a href="imagefx.xml">ImageFX</a></li><li><a href="lightingfx.xml">LightingFX</a></li><li><a href="mergefx.xml">MergeFX</a></li><li><a href="morphologyfx.xml">MorphologyFX</a></li><li><a href="offsetfx.xml">OffsetFX</a></li><li><a href="remapfx.xml">RemapFX</a></li><li><a href="sourcefx.xml">SourceFX</a></li><li><a href="turbulencefx.xml">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.xml">Scintilla</a></li><li><a href="scintillasearch.xml">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.xml">Bitmap</a></li><li><a href="clipboard.xml">Clipboard</a></li><li><a href="display.xml">Display</a></li><li><a href="document.xml">Document</a></li><li><a href="font.xml">Font</a></li><li><a href="picture.xml">Picture</a></li><li><a href="pointer.xml">Pointer</a></li><li><a href="surface.xml">Surface</a></li><li><a href="svg.xml">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.xml">ClientSocket</a></li><li><a href="http.xml">HTTP</a></li><li><a href="netsocket.xml">NetSocket</a></li><li><a href="proxy.xml">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.xml">Vector</a></li><li><a href="vectorclip.xml">VectorClip</a></li><li><a href="vectorcolour.xml">VectorColour</a></li><li><a href="vectorellipse.xml">VectorEllipse</a></li><li><a href="vectorfilter.xml">VectorFilter</a></li><li><a href="vectorgradient.xml">VectorGradient</a></li><li><a href="vectorimage.xml">VectorImage</a></li><li><a href="vectorpath.xml">VectorPath</a></li><li><a href="vectorpattern.xml">VectorPattern</a></li><li><a href="vectorpolygon.xml">VectorPolygon</a></li><li><a href="vectorrectangle.xml">VectorRectangle</a></li><li><a href="vectorscene.xml">VectorScene</a></li><li><a href="vectorshape.xml">VectorShape</a></li><li><a href="vectorspiral.xml">VectorSpiral</a></li><li><a href="vectortext.xml">VectorText</a></li><li><a href="vectorviewport.xml">VectorViewport</a></li><li><a href="vectorwave.xml">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN">
<html xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Parasol Framework documentation, machine generated from source"><meta name="author" content="Paul Manias"><link rel="icon" href="/favicon.ico"><title>Parasol Framework Manual</title><link href="../../css/bootstrap.min.css" rel="stylesheet"><link href="../../css/module-template.css" rel="stylesheet"><script>
          var shiftWindow = function() { scrollBy(0, -100) };
          window.addEventListener("hashchange", shiftWindow);
          function load() { if (window.location.hash) shiftWindow(); }
        </script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/index.html">Parasol Framework</a></div><div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="../core.html">Modules</a></li><li class="active"><a href="module.html">Classes</a></li><li><a href="../fluid.html">Fluid</a></li></ul></div></div></nav><div id="container-body" class="container"><div id="row-body" class="row"><div class="col-sm-9"><div class="docs-content" id="default-page"><div class="page-header"><h1>ClientSocket Class</h1></div><p class="lead">Represents a single socket connection to a client IP address.</p>
<p>If a <a href="Netsocket.html">Netsocket</a> is running in server mode then it will create a new ClientSocket object every time that a new connection is opened by a client.  This is a very simple class that assists in the management of I/O between the client and server.</p><h3>Structure</h3><p>The ClientSocket class consists of the following fields:</p><table class="table table-hover"><thead><th class="col-md-1"><div data-toggle="tooltip" title="Read/Write access indicators are listed below">Access</div></th><th class="col-md-1">Name</th><th class="col-md-1">Type</th><th>Comment</th></thead><tbody><tr id="_" data-toggle="collapse" data-target="#fl-Client" class="clickable"><td class="col-md-1"><a id="tf-Client"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Client</th><td class="col-md-1"><span class="text-nowrap">struct NetClient *</span></td><td>Parent client structure</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-ConnectTime" class="clickable"><td class="col-md-1"><a id="tf-ConnectTime"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">ConnectTime</th><td class="col-md-1"><span class="text-nowrap">BIGINT</span></td><td>System time for the creation of this socket</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Incoming" class="clickable"><td class="col-md-1"><a id="tf-Incoming"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Incoming</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>Callback for data being received from the socket</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-MsgLen" class="clickable"><td class="col-md-1"><a id="tf-MsgLen"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">MsgLen</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>Length of the current incoming message</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Next" class="clickable"><td class="col-md-1"><a id="tf-Next"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Next</th><td class="col-md-1"><span class="text-nowrap"><a href="ClientSocket.html">*ClientSocket</a></span></td><td>Next socket in the chain</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Outgoing" class="clickable"><td class="col-md-1"><a id="tf-Outgoing"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Outgoing</th><td class="col-md-1"><span class="text-nowrap">FUNCTION</span></td><td>Callback for data being sent over the socket</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-Prev" class="clickable"><td class="col-md-1"><a id="tf-Prev"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">Prev</th><td class="col-md-1"><span class="text-nowrap"><a href="ClientSocket.html">*ClientSocket</a></span></td><td>Previous socket in the chain</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-ReadCalled" class="clickable"><td class="col-md-1"><a id="tf-ReadCalled"></a><span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not readable"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">ReadCalled</th><td class="col-md-1"><span class="text-nowrap">INT</span></td><td>TRUE if the Read action has been called</td></tr><tr id="_" data-toggle="collapse" data-target="#fl-UserData" class="clickable"><td class="col-md-1"><a id="tf-UserData"></a><span class="glyphicon glyphicon-ok text-success" data-toggle="tooltip" title="Direct read access"></span>
                           
                          <span class="glyphicon glyphicon-minus text-muted" data-toggle="tooltip" title="Not writeable"></span></td><th class="col-md-1">UserData</th><td class="col-md-1"><span class="text-nowrap">APTR</span></td><td>Free for user data storage.</td></tr></tbody></table><h3>Actions</h3><p>The following actions are currently supported:</p><table class="table table-hover"><thead><th style="width:1%; border-top-style: none; border-bottom-style: none;"></th><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-Read" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Read"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Read</a></th><td>Read incoming data from a client socket.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Read" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>The Read action will read incoming data from the socket and write it to the provided buffer.  If the socket connection is safe, success will always be returned by this action regardless of whether or not data was available.  Almost all other return codes indicate permanent failure, and the socket connection will be closed when the action returns.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Read successful (if no data was on the socket, success is still indicated).</td></tr><tr><th class="col-md-1">Failed</th><td>A permanent failure has occurred and socket has been closed.</td></tr><tr><th class="col-md-1">Disconnected</th><td>The socket connection is closed.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-Write" class="clickable"><td style="width:1%; border-top-style: none; border-bottom-style: none;"><a id="ta-Write"></a><span class="glyphicon glyphicon-chevron-right"></span></td><th class="col-md-1"><a href="actions.html">Write</a></th><td>Writes data to the socket.</td></tr><tr class="no-hover"><td class="hiddenRow" style="width:1%; border-top-style: none; border-bottom-style: none;"></td><td colspan="2" class="hiddenRow"><div id="fl-Write" class="accordion-body collapse"><div class="docs-content" style="margin:10px 10px 0px 30px">
<p>Write raw data to a client socket with this action.  Write connections are buffered, so any data overflow generated in a call to this action will be buffered into a software queue.  Resource limits placed on the software queue are governed by the #MsgLimit field setting.</p>
      </div></div></td></tr></tbody></table><h3>Methods</h3><p>The following methods are currently supported:</p><table class="table table-hover"><thead><th class="col-md-1">Name</th><th>Comment</th></thead><tbody><tr data-toggle="collapse" data-target="#fl-ReadClientMsg" class="clickable"><th class="col-md-1 text-primary">ReadClientMsg</th><td><a id="tm-ReadClientMsg"></a>Read a message from the socket.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-ReadClientMsg" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR csReadClientMsg(OBJECTPTR Object, APTR * Message, LONG * Length, LONG * Progress, LONG * CRC)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Message</td><td>A pointer to the message buffer will be placed here if a message has been received.</td></tr><tr><td>Length</td><td>The length of the message is returned here.</td></tr><tr><td>Progress</td><td>The number of bytes that have been read for the incoming message.</td></tr><tr><td>CRC</td><td>Indicates the CRC value that the message is expected to match.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>This method reads messages that have been sent to the socket using Parasol Message Protocols.  Any message sent with the WriteClientMsg method will conform to this protocol, thus simplifying message transfers between programs based on the core platform at either point of the network link.</p>
<p>This method never returns a successful error code unless an entire message has been received from the sender.</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>A complete message has been read and indicated in the result parameters.</td></tr><tr><th class="col-md-1">BadData</th><td>The message header or tail was invalid, or the message length exceeded internally imposed limits.</td></tr><tr><th class="col-md-1">LimitedSuccess</th><td>Some data has arrived, but the entire message is incomplete.  The length of the incoming message may be indicated in the Length parameter.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">NoData</th><td>No new data was found for the socket.</td></tr><tr><th class="col-md-1">AllocMemory</th><td>A message buffer could not be allocated.</td></tr><tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr></tbody></table></div></div></td></tr><tr data-toggle="collapse" data-target="#fl-WriteClientMsg" class="clickable"><th class="col-md-1 text-primary">WriteClientMsg</th><td><a id="tm-WriteClientMsg"></a>Writes a message to the socket.</td></tr><tr class="no-hover"><td colspan="2" class="hiddenRow"><div id="fl-WriteClientMsg" class="accordion-body collapse"><div class="panel panel-info" style="border-radius: 0;"><div class="panel-heading" style="border-radius: 0;"><samp>ERROR csWriteClientMsg(OBJECTPTR Object, APTR Message, LONG Length)</samp></div><div class="panel-body"><table class="table" style="border: 4px; margin-bottom: 0px; border: 0px; border-bottom: 0px;"><thead><tr><th class="col-md-1">Input</th><th>Description</th></tr></thead><tbody><tr><td>Message</td><td>Pointer to the message to send.</td></tr><tr><td>Length</td><td>The length of the message.</td></tr></tbody></table></div></div><div class="docs-content" style="margin:30px 20px;">
<p>Messages can be written to sockets with the WriteClientMsg method and read back by the receiver with <a data-toggle="tooltip" title="Read a message from the socket." href="#tm-ReadClientMsg">ReadClientMsg()</a>.  The message data is sent through the <a data-toggle="tooltip" title="Writes data to the socket." href="#ta-Write">Write()</a> action, so the standard process will apply (the message will be queued and does not block if buffers are full).</p>
      <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr><tr><th class="col-md-1">Args</th><td>Invalid arguments passed to function.</td></tr><tr><th class="col-md-1">OutOfRange</th><td>A specified number is outside of the valid range.</td></tr></tbody></table></div></div></td></tr></tbody></table></div><div class="footer copyright text-right">ClientSocket module documentation © Paul Manias © 2005-2023</div></div><div class="col-sm-3"><div id="nav-tree"><div class="panel-group" id="accordion"><table class="table "><thead><th colspan="2"><h4>Class Info</h4></th></thead><tbody><tr><th class="col-md-1 text-primary">ID</th><td>ID_CLIENTSOCKET</td></tr><tr><th class="col-md-1 text-primary">Category</th><td>Network</td></tr><tr><th class="col-md-1 text-primary">Include</th><td>modules/clientsocket.h</td></tr><tr><th class="col-md-1 text-primary">Version</th><td>1</td></tr></tbody></table><div class="panel panel-primary"><div class="panel-heading"><h4 class="panel-title">Class List</h4></div><div id="structures" class="panel-collapse"><div class="panel-body"><ul class="list-unstyled"><li>Audio<ul><li><a href="audio.html">Audio</a></li><li><a href="sound.html">Sound</a></li></ul></li><li>Core<ul><li><a href="file.html">File</a></li><li><a href="metaclass.html">MetaClass</a></li><li><a href="module.html">Module</a></li><li><a href="storagedevice.html">StorageDevice</a></li><li><a href="task.html">Task</a></li><li><a href="thread.html">Thread</a></li><li><a href="time.html">Time</a></li></ul></li><li>Data<ul><li><a href="compression.html">Compression</a></li><li><a href="config.html">Config</a></li><li><a href="script.html">Script</a></li><li><a href="xml.html">XML</a></li></ul></li><li>Effects<ul><li><a href="blurfx.html">BlurFX</a></li><li><a href="colourfx.html">ColourFX</a></li><li><a href="compositefx.html">CompositeFX</a></li><li><a href="convolvefx.html">ConvolveFX</a></li><li><a href="displacementfx.html">DisplacementFX</a></li><li><a href="floodfx.html">FloodFX</a></li><li><a href="imagefx.html">ImageFX</a></li><li><a href="lightingfx.html">LightingFX</a></li><li><a href="mergefx.html">MergeFX</a></li><li><a href="morphologyfx.html">MorphologyFX</a></li><li><a href="offsetfx.html">OffsetFX</a></li><li><a href="remapfx.html">RemapFX</a></li><li><a href="sourcefx.html">SourceFX</a></li><li><a href="turbulencefx.html">TurbulenceFX</a></li></ul></li><li>Extensions<ul><li><a href="scintilla.html">Scintilla</a></li><li><a href="scintillasearch.html">ScintillaSearch</a></li></ul></li><li>Graphics<ul><li><a href="bitmap.html">Bitmap</a></li><li><a href="clipboard.html">Clipboard</a></li><li><a href="display.html">Display</a></li><li><a href="document.html">Document</a></li><li><a href="font.html">Font</a></li><li><a href="picture.html">Picture</a></li><li><a href="pointer.html">Pointer</a></li><li><a href="surface.html">Surface</a></li><li><a href="svg.html">SVG</a></li></ul></li><li>Network<ul><li><a href="clientsocket.html">ClientSocket</a></li><li><a href="http.html">HTTP</a></li><li><a href="netsocket.html">NetSocket</a></li><li><a href="proxy.html">Proxy</a></li></ul></li><li>Vectors<ul><li><a href="vector.html">Vector</a></li><li><a href="vectorclip.html">VectorClip</a></li><li><a href="vectorcolour.html">VectorColour</a></li><li><a href="vectorellipse.html">VectorEllipse</a></li><li><a href="vectorfilter.html">VectorFilter</a></li><li><a href="vectorgradient.html">VectorGradient</a></li><li><a href="vectorimage.html">VectorImage</a></li><li><a href="vectorpath.html">VectorPath</a></li><li><a href="vectorpattern.html">VectorPattern</a></li><li><a href="vectorpolygon.html">VectorPolygon</a></li><li><a href="vectorrectangle.html">VectorRectangle</a></li><li><a href="vectorscene.html">VectorScene</a></li><li><a href="vectorshape.html">VectorShape</a></li><li><a href="vectorspiral.html">VectorSpiral</a></li><li><a href="vectortext.html">VectorText</a></li><li><a href="vectorviewport.html">VectorViewport</a></li><li><a href="vectorwave.html">VectorWave</a></li></ul></li></ul></div></div></div></div></div></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script><script src="../../js/bootstrap.min.js"></script><script src="../../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

$(document).ready(function() {
   glCurrentMethod = document.getElementById("Introduction");

  $('[data-toggle="tooltip"]').tooltip()

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) {
      showPage("default-page");
   }
   else showPage(page);
});

function showPage(Name)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) { // Hide previous method.
         glCurrentMethod.style.display = "none";
      }
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + Name + "' not found.");
}
         </script></body></html>

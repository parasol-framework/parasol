<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><script type="text/javascript" async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script type="text/javascript">
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="description" content="Parasol Framework documentation, machine generated from source"></meta><meta name="author" content="Paul Manias"></meta><link rel="icon" href="/favicon.ico"></link><title>Parasol Framework Manual</title><link href="../css/bootstrap.min.css" rel="stylesheet"></link><link href="../css/module-template.css" rel="stylesheet"></link></head><body><nav class="navbar navbar-expand-sm navbar-dark bg-dark"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="../index.html">Parasol Framework</a></div><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
<div id="navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav"><li class="nav-item"><a class="nav-link" href="../gallery.html">Gallery</a></li><li class="nav-item"><a class="nav-link" href="api.html">API</a></li><li class="nav-item"><a class="nav-link" href="../wiki/Home.html">Wiki</a></li><li class="nav-item"><a class="nav-link" href="https://github.com/parasol-framework/parasol">GitHub</a></li></ul>
</div></div></nav>
<div class="container-fluid"><div class="row"><div class="d-sm-block d-none col-3 sidebar" style="max-width: 230px;"><div class="flex-shrink-1 pt-2 pe-2 sticky-top overflow-auto vh-100 b-shadow"><ul class="list-unstyled"><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#func-collapse" aria-expanded="true">XPath API</button><div class="collapse show" id="func-collapse">
<ul class="btn-toggle-nav list-unstyled fw-normal">
<li><a class="rounded" role="button" onclick="showPage('default-page');"><i class="bi bi-house"></i> Overview</a></li><li class="border-top my-1"></li>
<li><a role="button" class="rounded" onclick="showPage('Compile');">Compile()</a></li><li><a role="button" class="rounded" onclick="showPage('Evaluate');">Evaluate()</a></li><li><a role="button" class="rounded" onclick="showPage('Query');">Query()</a></li>
</ul></div></li></ul><ul class="list-unstyled"><li class="border-top my-3"></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#mod-collapse" aria-expanded="false">Modules</button><div class="collapse" id="mod-collapse"><ul class="btn-toggle-nav list-unstyled fw-normal"><li class="api-ref"><a href="audio.html" class="rounded">Audio</a></li><li class="api-ref"><a href="core.html" class="rounded">Core</a></li><li class="api-ref"><a href="display.html" class="rounded">Display</a></li><li class="api-ref"><a href="fluid.html" class="rounded">Fluid</a></li><li class="api-ref"><a href="font.html" class="rounded">Font</a></li><li class="api-ref"><a href="network.html" class="rounded">Network</a></li><li class="api-ref"><a href="regex.html" class="rounded">Regex</a></li><li class="api-ref"><a href="vector.html" class="rounded">Vector</a></li><li class="api-ref"><a href="xml.html" class="rounded">XML</a></li><li class="api-ref"><a href="xpath.html" class="rounded">XPath</a></li></ul></div></li></ul><ul class="list-unstyled"><li class="border-top my-3"></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#class-collapse" aria-expanded="false">Classes</button><div class="collapse" id="class-collapse"><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3"><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#audio-collapse" aria-expanded="false">Audio</button><div class="collapse" id="audio-collapse"><ul class="btn-toggle-nav list-unstyled fw-normal pb-1"><li><a href="classes/audio.html" class="rounded">Audio</a></li><li><a href="classes/sound.html" class="rounded">Sound</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#core-collapse" aria-expanded="false">Core</button><div class="collapse" id="core-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a href="classes/file.html" class="rounded">File</a></li><li><a href="classes/metaclass.html" class="rounded">MetaClass</a></li><li><a href="classes/module.html" class="rounded">Module</a></li><li><a href="classes/storagedevice.html" class="rounded">StorageDevice</a></li><li><a href="classes/task.html" class="rounded">Task</a></li><li><a href="classes/thread.html" class="rounded">Thread</a></li><li><a href="classes/time.html" class="rounded">Time</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#data-collapse" aria-expanded="false">Data</button><div class="collapse" id="data-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a href="classes/compression.html" class="rounded">Compression</a></li><li><a href="classes/compressedstream.html" class="rounded">CompressedStream</a></li><li><a href="classes/config.html" class="rounded">Config</a></li><li><a href="classes/script.html" class="rounded">Script</a></li><li><a href="classes/xml.html" class="rounded">XML</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#devices-collapse" aria-expanded="false">Devices</button><div class="collapse" id="devices-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a href="classes/controller.html" class="rounded">Controller</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#effects-collapse" aria-expanded="false">Effects</button><div class="collapse" id="effects-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a class="rounded" href="classes/blurfx.html">BlurFX</a></li><li><a class="rounded" href="classes/colourfx.html">ColourFX</a></li><li><a class="rounded" href="classes/compositefx.html">CompositeFX</a></li><li><a class="rounded" href="classes/convolvefx.html">ConvolveFX</a></li><li><a class="rounded" href="classes/displacementfx.html">DisplacementFX</a></li><li><a class="rounded" href="classes/filtereffect.html">FilterEffect</a></li><li><a class="rounded" href="classes/floodfx.html">FloodFX</a></li><li><a class="rounded" href="classes/imagefx.html">ImageFX</a></li><li><a class="rounded" href="classes/lightingfx.html">LightingFX</a></li><li><a class="rounded" href="classes/mergefx.html">MergeFX</a></li><li><a class="rounded" href="classes/morphologyfx.html">MorphologyFX</a></li><li><a class="rounded" href="classes/offsetfx.html">OffsetFX</a></li><li><a class="rounded" href="classes/remapfx.html">RemapFX</a></li><li><a class="rounded" href="classes/sourcefx.html">SourceFX</a></li><li><a class="rounded" href="classes/turbulencefx.html">TurbulenceFX</a></li><li><a class="rounded" href="classes/wavefunctionfx.html">WaveFunctionFX</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#ext-collapse" aria-expanded="false">Extensions</button><div class="collapse" id="ext-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a class="rounded" href="classes/scintilla.html">Scintilla</a></li><li><a class="rounded" href="classes/scintillasearch.html">ScintillaSearch</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#gfx-collapse" aria-expanded="false">Graphics</button><div class="collapse" id="gfx-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a class="rounded" href="classes/bitmap.html">Bitmap</a></li><li><a class="rounded" href="classes/clipboard.html">Clipboard</a></li><li><a class="rounded" href="classes/display.html">Display</a></li><li><a class="rounded" href="classes/document.html">Document</a></li><li><a class="rounded" href="classes/font.html">Font</a></li><li><a class="rounded" href="classes/picture.html">Picture</a></li><li><a class="rounded" href="classes/pointer.html">Pointer</a></li><li><a class="rounded" href="classes/surface.html">Surface</a></li><li><a class="rounded" href="classes/svg.html">SVG</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#net-collapse" aria-expanded="false">Network</button><div class="collapse" id="net-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a class="rounded" href="classes/clientsocket.html">ClientSocket</a></li><li><a class="rounded" href="classes/http.html">HTTP</a></li><li><a class="rounded" href="classes/netclient.html">NetClient</a></li><li><a class="rounded" href="classes/netlookup.html">NetLookup</a></li><li><a class="rounded" href="classes/netsocket.html">NetSocket</a></li><li><a class="rounded" href="classes/proxy.html">Proxy</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#vectors-collapse" aria-expanded="false">Vectors</button><div class="collapse" id="vectors-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a class="rounded" href="classes/vector.html">Vector</a></li><li><a class="rounded" href="classes/vectorclip.html">VectorClip</a></li><li><a class="rounded" href="classes/vectorcolour.html">VectorColour</a></li><li><a class="rounded" href="classes/vectorellipse.html">VectorEllipse</a></li><li><a class="rounded" href="classes/vectorfilter.html">VectorFilter</a></li><li><a class="rounded" href="classes/vectorgradient.html">VectorGradient</a></li><li><a class="rounded" href="classes/vectorgroup.html">VectorGroup</a></li><li><a class="rounded" href="classes/vectorimage.html">VectorImage</a></li><li><a class="rounded" href="classes/vectorpath.html">VectorPath</a></li><li><a class="rounded" href="classes/vectorpattern.html">VectorPattern</a></li><li><a class="rounded" href="classes/vectorpolygon.html">VectorPolygon</a></li><li><a class="rounded" href="classes/vectorrectangle.html">VectorRectangle</a></li><li><a class="rounded" href="classes/vectorscene.html">VectorScene</a></li><li><a class="rounded" href="classes/vectorshape.html">VectorShape</a></li><li><a class="rounded" href="classes/vectorspiral.html">VectorSpiral</a></li><li><a class="rounded" href="classes/vectortext.html">VectorText</a></li><li><a class="rounded" href="classes/vectortransition.html">VectorTransition</a></li><li><a class="rounded" href="classes/vectorviewport.html">VectorViewport</a></li><li><a class="rounded" href="classes/vectorwave.html">VectorWave</a></li></ul></div></li></ul></div></li></ul><ul class="list-unstyled"><li class="border-top my-3"></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#wiki-collapse" aria-expanded="false">Wiki</button><div class="collapse" id="wiki-collapse"><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3"><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#bp-collapse" aria-expanded="false">Build Process</button><div class="collapse" id="bp-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/Linux-Builds.html">Linux Builds</a></li><li class="api-ref"><a class="rounded" href="../wiki/Windows-Builds.html">Windows Builds</a></li><li class="api-ref"><a class="rounded" href="../wiki/Customising-Your-Build.html">Customising Your Build</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#tm-collapse" aria-expanded="false">Technical Manuals</button><div class="collapse" id="tm-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/Parasol-Objects.html">Parasol Objects</a></li><li class="api-ref"><a class="rounded" href="../wiki/Parasol-In-Depth.html">Parasol In Depth</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#fg-collapse" aria-expanded="false">Fluid</button><div class="collapse" id="fg-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/Fluid-Reference-Manual.html">Fluid Reference Manual</a></li><li class="api-ref"><a class="rounded" href="../wiki/Fluid-Common-API.html">Common API</a></li><li class="api-ref"><a class="rounded" href="../wiki/Fluid-FileSearch-API.html">FileSearch API</a></li><li class="api-ref"><a class="rounded" href="../wiki/Fluid-GUI-API.html">GUI API</a></li><li class="api-ref"><a class="rounded" href="../wiki/Fluid-JSON-API.html">JSON API</a></li><li class="api-ref"><a class="rounded" href="../wiki/Fluid-VFX-API.html">VFX API</a></li><li class="api-ref"><a class="rounded" href="../wiki/Widgets.html">Widgets</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#rrm-collapse" aria-expanded="false">RIPL</button><div class="collapse" id="rrm-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/RIPL-Reference-Manual.html">RIPL Reference Manual</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#tools-collapse" aria-expanded="false">Tools</button><div class="collapse" id="tools-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/Parasol-Cmd-Tool.html">Parasol Cmd Tool</a></li><li class="api-ref"><a class="rounded" href="../wiki/Unit-Testing.html">Flute / Unit Testing</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#doc-collapse" aria-expanded="false">Doc Generation</button><div class="collapse" id="doc-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/Embedded-Document-Formatting.html">Embedded Document Format</a></li><li class="api-ref"><a class="rounded" href="../wiki/FDL-Reference-Manual.html">FDL Reference Manual</a></li><li class="api-ref"><a class="rounded" href="../wiki/FDL-Tools.html">FDL Tools</a></li></ul></div></li><li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#app-collapse" aria-expanded="false">Appendix</button><div class="collapse" id="app-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li class="api-ref"><a class="rounded" href="../wiki/Action-Reference-Manual.html">Action Reference Manual</a></li><li class="api-ref"><a class="rounded" href="../wiki/System-Error-Codes.html">System Error Codes</a></li></ul></div></li></ul></div></li></ul></div></div><div class="col-sm-9" style="max-width: 1200px;"><div class="docs-content" style="display:none;" id="default-page"><div class="page-header"><h1>XPath Module</h1></div><p class="lead">Provides XPath 2.0 and XQuery support for the XML module.</p>
<p>The XPath module provides comprehensive support for XPath 2.0 and XQuery languages, enabling powerful querying and navigation of XML documents.  It operates in conjunction with the <a href="classes/xml.html">XML</a> class to provide a standards-compliant query engine with extensive functionality.</p>
<h4>XPath 2.0 Path Expressions</h4>
<p>The module supports the full XPath 2.0 specification for navigating XML documents, including all 13 standard axes (<code>child</code>, <code>descendant</code>, <code>descendant-or-self</code>, <code>following</code>, <code>following-sibling</code>, <code>parent</code>, <code>ancestor</code>, <code>ancestor-or-self</code>, <code>preceding</code>, <code>preceding-sibling</code>, <code>self</code>, <code>attribute</code>, and <code>namespace</code>), node tests for element names, wildcards (<code>*</code>), and attribute selectors (<code>@attr</code>), numeric position filters (<code>[1]</code>, <code>[2]</code>), comparison operators, and complex boolean expressions in predicates.  Both absolute paths (<code>/root/element</code>), relative paths (<code>element/subelement</code>), and recursive descent (<code>//element</code>) are supported.</p>
<h4>XQuery Language Support</h4>
<p>The module implements core XQuery functionality including FLWOR expressions (<code>for</code>, <code>let</code>, <code>where</code>, <code>order by</code>, and <code>return</code> clauses) for advanced querying, sequence operations for constructing, filtering, and manipulating sequences of nodes and values, and a comprehensive type system supporting strings, numbers, booleans, node sets, dates, durations, and QNames.</p>
<h4>Function Library</h4>
<p>A rich set of standard functions is provided across multiple categories:</p>
<ul>
<li>Node Functions: <code>position()</code>, <code>last()</code>, <code>count()</code>, <code>id()</code>, <code>name()</code>, <code>local-name()</code>, <code>namespace-uri()</code>, <code>root()</code>, <code>node-name()</code>, <code>base-uri()</code></li>
<li>String Functions: <code>concat()</code>, <code>substring()</code>, <code>contains()</code>, <code>starts-with()</code>, <code>ends-with()</code>, <code>string-length()</code>, <code>normalize-space()</code>, <code>upper-case()</code>, <code>lower-case()</code>, <code>translate()</code>, <code>string-join()</code>, <code>encode-for-uri()</code>, <code>escape-html-uri()</code></li>
<li>Numeric Functions: <code>number()</code>, <code>sum()</code>, <code>floor()</code>, <code>ceiling()</code>, <code>round()</code>, <code>round-half-to-even()</code>, <code>abs()</code>, <code>min()</code>, <code>max()</code>, <code>avg()</code></li>
<li>Boolean Functions: <code>boolean()</code>, <code>not()</code>, <code>true()</code>, <code>false()</code>, <code>exists()</code>, <code>empty()</code>, <code>lang()</code></li>
<li>Sequence Functions: <code>distinct-values()</code>, <code>index-of()</code>, <code>insert-before()</code>, <code>remove()</code>, <code>reverse()</code>, <code>subsequence()</code>, <code>unordered()</code>, <code>deep-equal()</code>, <code>zero-or-one()</code>, <code>one-or-more()</code>, <code>exactly-one()</code></li>
<li>Regular Expressions: <code>matches()</code>, <code>replace()</code>, <code>tokenize()</code>, <code>analyze-string()</code></li>
<li>Date and Time Functions: <code>current-date()</code>, <code>current-time()</code>, <code>current-dateTime()</code>, date and time component extractors, timezone adjustments, duration calculations</li>
<li>Document Functions: <code>doc()</code>, <code>doc-available()</code>, <code>collection()</code>, <code>unparsed-text()</code>, <code>unparsed-text-lines()</code>, <code>document-uri()</code></li>
<li>QName Functions: <code>QName()</code>, <code>resolve-QName()</code>, <code>prefix-from-QName()</code>, <code>local-name-from-QName()</code>, <code>namespace-uri-from-QName()</code>, <code>namespace-uri-for-prefix()</code>, <code>in-scope-prefixes()</code></li>
<li>URI Functions: <code>resolve-uri()</code>, <code>iri-to-uri()</code></li>
<li>Formatting Functions: <code>format-date()</code>, <code>format-time()</code>, <code>format-dateTime()</code>, <code>format-integer()</code></li>
<li>Utility Functions: <code>error()</code>, <code>trace()</code></li>
</ul>
<h4>Expression Compilation</h4>
<p>XPath and XQuery expressions are compiled into an optimised internal representation for efficient reuse.  Compiled expressions are thread-safe and can be shared across multiple XML documents.  The compilation step validates syntax and reports detailed error messages.  Compiled expressions are managed as resources and can be freed when no longer needed.</p>
<h4>Evaluation Modes</h4>
<p>The module provides two distinct modes for query evaluation.  Value evaluation returns typed results (&amp;XPathValue) that can represent node sets, strings, numbers, booleans, dates, or sequences.  Node iteration invokes a callback function for each matching node, enabling streaming processing of large result sets.</p>
<h4>Usage Patterns</h4>
<p>Compiling and evaluating queries:</p>
<pre>APTR query;
if (xp::Compile(xml, "/bookstore/book[@price &lt; 10]/title", &amp;query) IS ERR::Okay) {
   XPathValue *result;
   if (xp::Evaluate(xml, query, &amp;result) IS ERR::Okay) {
      // Process result...
      FreeResource(result);
   }
   FreeResource(query);
}
</pre>
<p>Node iteration with callbacks:</p>
<pre>APTR query;
if (xp::Compile(xml, "//chapter[@status='draft']", &amp;query) IS ERR::Okay) {
   auto callback = C_FUNCTION(process_node);
   xp::Query(xml, query, &amp;callback);
   FreeResource(query);
}
</pre>
<h4>Extensions</h4>
<p>The module includes several Parasol-specific extensions beyond the standard specification.  Content matching with the <code>[=...]</code> syntax allows matching on encapsulated content, e.g., <code>/menu[=contentmatch]</code>.  Backslash (<code>\</code>) can be used as an escape character in attribute strings.  The <code>@*</code> syntax matches any attribute, e.g., <code>/root/section[@*="alpha"]</code>.</p>
<h3>Functions</h3><p class="appendix"><a role="button" onclick="showPage('Compile');">Compile</a> | <a role="button" onclick="showPage('Evaluate');">Evaluate</a> | <a role="button" onclick="showPage('Query');">Query</a></p><h3>Constants</h3><p class="appendix"><a role="button" onclick="showPage('XPathNodeType');">XPathNodeType</a></p></div><div class="docs-content" style="display:none;" id="Compile"><h2>Compile()</h2><p class="lead">Compiles an XPath or XQuery expression into an executable form.</p><div class="card card-info mb-3"><div class="card-header"><samp>ERR xp::Compile(objXML * XML, CSTRING Query, APTR * Result)</samp></div><div class="card-body" style="padding:0px"><table class="table mb-3 thead-light"><thead><tr><th class="col-md-1">Parameter</th><th>Description</th></tr></thead><tbody><tr><td>XML</td><td>The XML document context for the query (can be NULL if not needed).</td></tr>
<tr><td>Query</td><td>A valid XPath or XQuery expression string.</td></tr>
<tr><td>Result</td><td>Receives a pointer to an XPathNode object on success.</td></tr>
</tbody></table></div></div>
<p>Call the Compile function to convert a valid XPath or XQuery expression string into a compiled form that can be executed against an XML document.  The resulting compiled expression can be reused multiple times for efficiency and must be freed using FreeResource when no longer needed.  They are re-usable between different XML documents and are treated as read-only for thread-safety.</p>
<p>The XML parameter is not required for compilation, but can potentially enhance syntax checking when parsing the expression.  An additional benefit is that error messages will be defined in the #ErrorMsg field of the XML object if parsing fails.</p>
    <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr>
<tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr>
</tbody></table><div class="footer copyright text-right">XPath module documentation © Paul Manias © 2025</div></div>
<div class="docs-content" style="display:none;" id="Evaluate"><h2>Evaluate()</h2><p class="lead">Evaluates a compiled XPath or XQuery expression against an XML document.</p><div class="card card-info mb-3"><div class="card-header"><samp>ERR xp::Evaluate(objXML * XML, APTR Query, struct XPathValue ** Result)</samp></div><div class="card-body" style="padding:0px"><table class="table mb-3 thead-light"><thead><tr><th class="col-md-1">Parameter</th><th>Description</th></tr></thead><tbody><tr><td>XML</td><td>The XML document to evaluate the query against.</td></tr>
<tr><td>Query</td><td>The compiled XPath or XQuery expression.</td></tr>
<tr><td>Result</td><td>Receives the result of the evaluation.</td></tr>
</tbody></table></div></div>
<p>Use Evaluate to run a previously compiled XPath or XQuery expression against an XML document.  The result of the evaluation is returned in the Result parameter as !XPathValue, which can represent various types of data including node sets, strings, numbers, or booleans.</p>
    <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>Operation successful.</td></tr>
<tr><th class="col-md-1">NullArgs</th><td>Function call missing argument value(s)</td></tr>
</tbody></table><div class="footer copyright text-right">XPath module documentation © Paul Manias © 2025</div></div>
<div class="docs-content" style="display:none;" id="Query"><h2>Query()</h2><p class="lead">For node-based queries, evaluates a compiled expression and calls a function for each matching node.</p><div class="card card-info mb-3"><div class="card-header"><samp>ERR xp::Query(objXML * XML, APTR Query, FUNCTION * Callback)</samp></div><div class="card-body" style="padding:0px"><table class="table mb-3 thead-light"><thead><tr><th class="col-md-1">Parameter</th><th>Description</th></tr></thead><tbody><tr><td>XML</td><td>The XML document to evaluate the query against.</td></tr>
<tr><td>Query</td><td>The compiled XPath or XQuery expression.</td></tr>
<tr><td>Callback</td><td>Pointer to a callback function that will be called for each matching node.  Can be NULL if searching for the first matching node.</td></tr>
</tbody></table></div></div>
<p>Use the Query function to scan an XML document for tags or attributes that match a compiled XPath or XQuery expression. For every matching node, a user-defined callback function is invoked, allowing custom processing of each result.</p>
<p>If no callback is provided, the search stops after the first match and the <a href="classes/xml.html">XML</a> object's cursor markers will reflect the position of the node.</p>
<p>Note that valid function execution can return <code>ERR:Search</code> if zero matches are found.</p>
    <h3>Error Codes</h3><table class="table table-sm borderless"><tbody><tr><th class="col-md-1">Okay</th><td>At least one matching node was found and processed.</td></tr>
<tr><th class="col-md-1">Search</th><td>No matching node was found.</td></tr>
<tr><th class="col-md-1">NoData</th><td>The XML document contains no data to search.</td></tr>
<tr><th class="col-md-1">Syntax</th><td>The provided query expression has syntax errors.</td></tr>
<tr><th class="col-md-1">NullArgs</th><td>At least one required parameter was not provided.</td></tr>
</tbody></table><div class="footer copyright text-right">XPath module documentation © Paul Manias © 2025</div></div>
<div class="docs-content" style="display:none;" id="XPathNodeType"><h1>XPathNodeType Type</h1><p class="lead"></p><table class="table"><thead><tr><th class="col-md-1">Name</th><th>Description</th></tr></thead><tbody><tr><th>XPathNodeType::ATTRIBUTE_VALUE_TEMPLATE</th><td></td></tr>
<tr><th>XPathNodeType::AXIS_SPECIFIER</th><td></td></tr>
<tr><th>XPathNodeType::BINARY_OP</th><td></td></tr>
<tr><th>XPathNodeType::COMMENT_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::COMPUTED_ATTRIBUTE_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::COMPUTED_ELEMENT_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::CONDITIONAL</th><td></td></tr>
<tr><th>XPathNodeType::CONSTRUCTOR_CONTENT</th><td></td></tr>
<tr><th>XPathNodeType::COUNT_CLAUSE</th><td></td></tr>
<tr><th>XPathNodeType::DIRECT_ATTRIBUTE_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::DIRECT_ELEMENT_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::DIRECT_TEXT_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::DOCUMENT_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::EMPTY_SEQUENCE</th><td></td></tr>
<tr><th>XPathNodeType::EXPRESSION</th><td></td></tr>
<tr><th>XPathNodeType::FILTER</th><td></td></tr>
<tr><th>XPathNodeType::FLWOR_EXPRESSION</th><td></td></tr>
<tr><th>XPathNodeType::FOR_BINDING</th><td></td></tr>
<tr><th>XPathNodeType::FOR_EXPRESSION</th><td></td></tr>
<tr><th>XPathNodeType::FUNCTION_CALL</th><td></td></tr>
<tr><th>XPathNodeType::GROUP_CLAUSE</th><td></td></tr>
<tr><th>XPathNodeType::GROUP_KEY</th><td></td></tr>
<tr><th>XPathNodeType::LET_BINDING</th><td></td></tr>
<tr><th>XPathNodeType::LET_EXPRESSION</th><td></td></tr>
<tr><th>XPathNodeType::LITERAL</th><td></td></tr>
<tr><th>XPathNodeType::LOCATION_PATH</th><td></td></tr>
<tr><th>XPathNodeType::NAME_TEST</th><td></td></tr>
<tr><th>XPathNodeType::NODE_TEST</th><td></td></tr>
<tr><th>XPathNodeType::NODE_TYPE_TEST</th><td></td></tr>
<tr><th>XPathNodeType::NUMBER</th><td></td></tr>
<tr><th>XPathNodeType::ORDER_CLAUSE</th><td></td></tr>
<tr><th>XPathNodeType::ORDER_SPEC</th><td></td></tr>
<tr><th>XPathNodeType::PATH</th><td></td></tr>
<tr><th>XPathNodeType::PI_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::PREDICATE</th><td></td></tr>
<tr><th>XPathNodeType::PROCESSING_INSTRUCTION_TEST</th><td></td></tr>
<tr><th>XPathNodeType::QUANTIFIED_BINDING</th><td></td></tr>
<tr><th>XPathNodeType::QUANTIFIED_EXPRESSION</th><td></td></tr>
<tr><th>XPathNodeType::ROOT</th><td></td></tr>
<tr><th>XPathNodeType::STEP</th><td></td></tr>
<tr><th>XPathNodeType::STRING</th><td></td></tr>
<tr><th>XPathNodeType::TEXT_CONSTRUCTOR</th><td></td></tr>
<tr><th>XPathNodeType::UNARY_OP</th><td></td></tr>
<tr><th>XPathNodeType::UNION</th><td></td></tr>
<tr><th>XPathNodeType::VARIABLE_REFERENCE</th><td></td></tr>
<tr><th>XPathNodeType::WHERE_CLAUSE</th><td></td></tr>
<tr><th>XPathNodeType::WILDCARD</th><td></td></tr>
</tbody></table><div class="footer copyright text-right">XPath module documentation © Paul Manias © 2025</div></div>
</div></div></div><script type="text/javascript" src="../js/bootstrap.bundle.min.js"></script><script type="text/javascript" src="../js/base.js"></script><script type="text/javascript">
var glCurrentMethod;

const ready = fn => document.readyState !== 'loading' ? fn() : document.addEventListener('DOMContentLoaded', fn);

   var xslt = false;
   var url = window.location.pathname;
   var filename = url.substring(url.lastIndexOf('/')+1);
   if (filename.endsWith(".xml")) { // XSLT is being used to view this document
      filename = filename.substr(0, filename.length-3) + 'html';
      xslt = true;
   }

ready(function(){
   // Initialise tooltips
   var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
   var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
     return new bootstrap.Tooltip(tooltipTriggerEl)
   })

   glCurrentMethod = document.getElementById("Introduction");

   var page = glParameters["page"];
   if (isEmpty(page)) page = glParameters["function"];

   if (isEmpty(page)) showPage("default-page", true);
   else showPage(page, true);

   window.onpopstate = popState;

   // In XSLT mode, changing all HTML links to XML is helpful for navigation (if heavy handed)
   if (xslt) {
      var nl = document.querySelectorAll('a[href$=".html"]');
      nl.forEach((el) => {
         el.href = el.href.substr(0, el.href.length-5) + '.xml'
      })
   }
});

function popState(event) {
   console.log("popState() to " + JSON.stringify(event.state));

   state = event.state
   if (!state) state = { page: 'default-page' }

   var div
   if (state.page) div = document.getElementById(state.page);
   else div =  document.getElementById('default-page');

   if (div) {
      if (glCurrentMethod) glCurrentMethod.style.display = "none"; // Hide previous method.
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;
   }
   else console.log("Div for '" + state.page + "' not found.");
}

function showPage(Name, NoHistory)
{
   var div = document.getElementById(Name);
   if (div) {
      if (glCurrentMethod) glCurrentMethod.style.display = "none"; // Hide previous method.
      div.style.display = "block"; // Show selected method.
      glCurrentMethod = div;

      if (!NoHistory) {
         history.pushState({ page: Name }, null, "?page=" + Name);
      }
      window.scrollTo(0, 0)
   }
   else console.log("Div for '" + Name + "' not found.");

   return false;
}
         </script></body></html>

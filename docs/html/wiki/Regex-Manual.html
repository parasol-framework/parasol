<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Parasol Framework documentation, machine generated from source">
<meta name="author" content="Paul Manias">
<link rel="icon" href="/favicon.ico">
<title>Parasol Wiki - Regex Manual</title>
<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../css/module-template.css" rel="stylesheet">
<link href="../css/github-markdown.css" rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
  <div class="container-fluid">
    <div class="navbar-header"><a class="navbar-brand" href="../index.html">Parasol Framework</a></div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav"><li class="nav-item">
        <li class="nav-item"><a class="nav-link" href="../gallery.html">Gallery</a></li>
        <li class="nav-item"><a class="nav-link" href="../modules/api.html">API</a></li>
        <li class="nav-item"><a class="nav-link" href="Home.html">Wiki</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/parasol-framework/parasol">GitHub</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="d-sm-block d-none col-3 sidebar" style="max-width: 230px;">
      <div class="flex-shrink-1 pt-2 pe-2 sticky-top overflow-auto vh-100 b-shadow">

<ul class="list-unstyled">
  <li>
    <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#wiki-collapse" aria-expanded="true">Wiki</button>
    <div class="collapse show" id="wiki-collapse">
      <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3">
         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#bp-collapse" aria-expanded="false">Build Process</button>
         <div class="collapse" id="bp-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="Linux-Builds.html">Linux Builds</a></li>
              <li class="api-ref"><a class="rounded" href="Windows-Builds.html">Windows Builds</a></li>
              <li class="api-ref"><a class="rounded" href="Customising-Your-Build.html">Customising Your Build</a></li>
            </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#tm-collapse" aria-expanded="false">Technical Manuals</button>
         <div class="collapse" id="tm-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
             <li class="api-ref"><a class="rounded" href="Parasol-Objects.html">Parasol Objects</a></li>
             <li class="api-ref"><a class="rounded" href="Parasol-In-Depth.html">Parasol In Depth</a></li>
             <li class="api-ref"><a class="rounded" href="Coding-With-AI.html">Coding With AI</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#fg-collapse" aria-expanded="false">Fluid</button>
         <div class="collapse" id="fg-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
            <li class="api-ref"><a class="rounded" href="Fluid-Reference-Manual.html">Fluid Reference Manual</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-Common-API.html">Common API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-FileSearch-API.html">FileSearch API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-GUI-API.html">GUI API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-HTTPServer-API.html">HTTPServer API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-IO-API.html">I/O API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-JSON-API.html">JSON API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-URL-API.html">URL API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-VFX-API.html">VFX API</a></li>
            <li class="api-ref"><a class="rounded" href="Widgets.html">Widgets</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#rrm-collapse" aria-expanded="false">RIPL</button>
         <div class="collapse" id="rrm-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="RIPL-Reference-Manual.html">RIPL Reference Manual</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#tools-collapse" aria-expanded="false">Tools</button>
         <div class="collapse" id="tools-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="Parasol-Cmd-Tool.html">Parasol Cmd Tool</a></li>
              <li class="api-ref"><a class="rounded" href="Unit-Testing.html">Flute / Unit Testing</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#doc-collapse" aria-expanded="false">Doc Generation</button>
         <div class="collapse" id="doc-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="Embedded-Document-Formatting.html">Embedded Document Format</a></li>
              <li class="api-ref"><a class="rounded" href="FDL-Reference-Manual.html">FDL Reference Manual</a></li>
              <li class="api-ref"><a class="rounded" href="FDL-Tools.html">FDL Tools</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#app-collapse" aria-expanded="false">Appendix</button>
         <div class="collapse" id="app-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
             <li class="api-ref"><a class="rounded" href="Action-Reference-Manual.html">Action Reference Manual</a></li>
             <li class="api-ref"><a class="rounded" href="System-Error-Codes.html">System Error Codes</a></li>
           </ul>
         </div></li>
      </ul>
    </div>
  </li>
</ul>

<ul class="list-unstyled">
  <li class="border-top my-3"></li>
  <li>
    <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#mod-collapse" aria-expanded="false">Modules</button>
    <div class="collapse" id="mod-collapse">
      <ul class="btn-toggle-nav list-unstyled fw-normal">
      <li class="api-ref"><a href="../modules/audio.html" class="rounded">Audio</a></li>
      <li class="api-ref"><a href="../modules/core.html" class="rounded">Core</a></li>
      <li class="api-ref"><a href="../modules/display.html" class="rounded">Display</a></li>
      <li class="api-ref"><a href="../modules/fluid.html" class="rounded">Fluid</a></li>
      <li class="api-ref"><a href="../modules/font.html" class="rounded">Font</a></li>
      <li class="api-ref"><a href="../modules/network.html" class="rounded">Network</a></li>
      <li class="api-ref"><a href="../modules/regex.html" class="rounded">Regex</a></li>
      <li class="api-ref"><a href="../modules/vector.html" class="rounded">Vector</a></li>
      <li class="api-ref"><a href="../modules/xml.html" class="rounded">XML</a></li>
      <li class="api-ref"><a href="../modules/xpath.html" class="rounded">XPath</a></li>
      </ul>
    </div>
  </li>
</ul>

<ul class="list-unstyled">
  <li class="border-top my-3"></li>
  <li>
    <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#class-collapse" aria-expanded="false">Classes</button>
    <div class="collapse" id="class-collapse">
      <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3">
        <li>
          <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#audio-collapse" aria-expanded="false">Audio</button>
          <div class="collapse" id="audio-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1">
            <li><a href="../modules/classes/audio.html" class="rounded">Audio</a></li>
            <li><a href="../modules/classes/sound.html" class="rounded">Sound</a></li>
            </ul>
          </div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#core-collapse" aria-expanded="false">Core</button><div class="collapse" id="core-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a href="../modules/classes/file.html" class="rounded">File</a></li>
        <li><a href="../modules/classes/metaclass.html" class="rounded">MetaClass</a></li>
        <li><a href="../modules/classes/module.html" class="rounded">Module</a></li>
        <li><a href="../modules/classes/storagedevice.html" class="rounded">StorageDevice</a></li>
        <li><a href="../modules/classes/task.html" class="rounded">Task</a></li>
        <li><a href="../modules/classes/thread.html" class="rounded">Thread</a></li>
        <li><a href="../modules/classes/time.html" class="rounded">Time</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#data-collapse" aria-expanded="false">Data</button><div class="collapse" id="data-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a href="../modules/classes/compression.html" class="rounded">Compression</a></li>
        <li><a href="../modules/classes/compressedstream.html" class="rounded">CompressedStream</a></li>
        <li><a href="../modules/classes/config.html" class="rounded">Config</a></li>
        <li><a href="../modules/classes/script.html" class="rounded">Script</a></li>
        <li><a href="../modules/classes/xml.html" class="rounded">XML</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#devices-collapse" aria-expanded="false">Devices</button><div class="collapse" id="devices-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a href="../modules/classes/controller.html" class="rounded">Controller</a></li></ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#effects-collapse" aria-expanded="false">Effects</button><div class="collapse" id="effects-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/blurfx.html">BlurFX</a></li>
        <li><a class="rounded" href="../modules/classes/colourfx.html">ColourFX</a></li>
        <li><a class="rounded" href="../modules/classes/compositefx.html">CompositeFX</a></li>
        <li><a class="rounded" href="../modules/classes/convolvefx.html">ConvolveFX</a></li>
        <li><a class="rounded" href="../modules/classes/displacementfx.html">DisplacementFX</a></li>
        <li><a class="rounded" href="../modules/classes/filtereffect.html">FilterEffect</a></li>
        <li><a class="rounded" href="../modules/classes/floodfx.html">FloodFX</a></li>
        <li><a class="rounded" href="../modules/classes/imagefx.html">ImageFX</a></li>
        <li><a class="rounded" href="../modules/classes/lightingfx.html">LightingFX</a></li>
        <li><a class="rounded" href="../modules/classes/mergefx.html">MergeFX</a></li>
        <li><a class="rounded" href="../modules/classes/morphologyfx.html">MorphologyFX</a></li>
        <li><a class="rounded" href="../modules/classes/offsetfx.html">OffsetFX</a></li>
        <li><a class="rounded" href="../modules/classes/remapfx.html">RemapFX</a></li>
        <li><a class="rounded" href="../modules/classes/sourcefx.html">SourceFX</a></li>
        <li><a class="rounded" href="../modules/classes/turbulencefx.html">TurbulenceFX</a></li>
        <li><a class="rounded" href="../modules/classes/wavefunctionfx.html">WaveFunctionFX</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#ext-collapse" aria-expanded="false">Extensions</button><div class="collapse" id="ext-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/scintilla.html">Scintilla</a></li>
        <li><a class="rounded" href="../modules/classes/scintillasearch.html">ScintillaSearch</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#gfx-collapse" aria-expanded="false">Graphics</button><div class="collapse" id="gfx-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/bitmap.html">Bitmap</a></li>
        <li><a class="rounded" href="../modules/classes/clipboard.html">Clipboard</a></li>
        <li><a class="rounded" href="../modules/classes/display.html">Display</a></li>
        <li><a class="rounded" href="../modules/classes/document.html">Document</a></li>
        <li><a class="rounded" href="../modules/classes/font.html">Font</a></li>
        <li><a class="rounded" href="../modules/classes/picture.html">Picture</a></li>
        <li><a class="rounded" href="../modules/classes/pointer.html">Pointer</a></li>
        <li><a class="rounded" href="../modules/classes/surface.html">Surface</a></li>
        <li><a class="rounded" href="../modules/classes/svg.html">SVG</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#net-collapse" aria-expanded="false">Network</button><div class="collapse" id="net-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/clientsocket.html">ClientSocket</a></li>
        <li><a class="rounded" href="../modules/classes/http.html">HTTP</a></li>
        <li><a class="rounded" href="../modules/classes/netclient.html">NetClient</a></li>
        <li><a class="rounded" href="../modules/classes/netlookup.html">NetLookup</a></li>
        <li><a class="rounded" href="../modules/classes/netsocket.html">NetSocket</a></li>
        <li><a class="rounded" href="../modules/classes/proxy.html">Proxy</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#vectors-collapse" aria-expanded="false">Vectors</button><div class="collapse" id="vectors-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/vector.html">Vector</a></li>
        <li><a class="rounded" href="../modules/classes/vectorclip.html">VectorClip</a></li>
        <li><a class="rounded" href="../modules/classes/vectorcolour.html">VectorColour</a></li>
        <li><a class="rounded" href="../modules/classes/vectorellipse.html">VectorEllipse</a></li>
        <li><a class="rounded" href="../modules/classes/vectorfilter.html">VectorFilter</a></li>
        <li><a class="rounded" href="../modules/classes/vectorgradient.html">VectorGradient</a></li>
        <li><a class="rounded" href="../modules/classes/vectorgroup.html">VectorGroup</a></li>
        <li><a class="rounded" href="../modules/classes/vectorimage.html">VectorImage</a></li>
        <li><a class="rounded" href="../modules/classes/vectorpath.html">VectorPath</a></li>
        <li><a class="rounded" href="../modules/classes/vectorpattern.html">VectorPattern</a></li>
        <li><a class="rounded" href="../modules/classes/vectorpolygon.html">VectorPolygon</a></li>
        <li><a class="rounded" href="../modules/classes/vectorrectangle.html">VectorRectangle</a></li>
        <li><a class="rounded" href="../modules/classes/vectorscene.html">VectorScene</a></li>
        <li><a class="rounded" href="../modules/classes/vectorshape.html">VectorShape</a></li>
        <li><a class="rounded" href="../modules/classes/vectorspiral.html">VectorSpiral</a></li>
        <li><a class="rounded" href="../modules/classes/vectortext.html">VectorText</a></li>
        <li><a class="rounded" href="../modules/classes/vectortransition.html">VectorTransition</a></li>
        <li><a class="rounded" href="../modules/classes/vectorviewport.html">VectorViewport</a></li>
        <li><a class="rounded" href="../modules/classes/vectorwave.html">VectorWave</a></li>
        </ul></div>
        </li>
      </ul>
    </div>
  </li>
</ul>

</div>
</div>

<div class="col-sm-9" style="max-width: 1200px;">
<div class="docs-content" id="default-page">
<h1>Regex Manual</h1>
<h1 id="regex-manual">Regex Manual</h1>
<p>This manual provides comprehensive technical documentation for regular expression support in the Parasol Framework. It covers pattern syntax, behaviour, and all supported features for both Fluid and C++ developers.</p>
<p>For information on how to use the Regex class and its methods in your code, please refer to the Regex module API documentation.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#character-matching">Character Matching</a></li>
<li><a href="#alternatives">Alternatives</a></li>
<li><a href="#character-classes">Character Classes</a>
<ul>
<li><a href="#basic-character-classes">Basic Character Classes</a></li>
<li><a href="#predefined-character-classes">Predefined Character Classes</a></li>
<li><a href="#set-operations">Set Operations</a></li>
</ul></li>
<li><a href="#quantifiers">Quantifiers</a></li>
<li><a href="#grouping-and-backreferences">Grouping and Backreferences</a></li>
<li><a href="#flag-modifiers">Flag Modifiers</a></li>
<li><a href="#assertions">Assertions</a></li>
<li><a href="#unicode-support">Unicode Support</a></li>
<li><a href="#compilation-flags">Compilation Flags</a></li>
<li><a href="#match-flags">Match Flags</a></li>
<li><a href="#regular-expression-features">Regular Expression Features</a></li>
<li><a href="#performance-considerations">Performance Considerations</a></li>
<li><a href="#common-patterns-and-examples">Common Patterns and Examples</a></li>
<li><a href="#error-handling">Error Handling</a></li>
</ul>
<hr>
<h2 id="introduction">Introduction</h2>
<p>Parasol&#39;s regex support is based on the regular expression syntax defined in the <a href="https://tc39.es/ecma262/multipage/text-processing.html#sec-regexp-regular-expression-objects">ECMAScript Specification</a>. The implementation provides full Unicode support with UTF-8 encoding enabled by default.</p>
<p>Key features include:</p>
<ul>
<li><strong>ECMAScript Compliance</strong>: Supports expressions defined in the latest ECMAScript specification draft</li>
<li><strong>Unicode Support</strong>: Full UTF-8 Unicode support with property matching</li>
<li><strong>Set Operations</strong>: Character class intersection, subtraction, and string sequences</li>
<li><strong>Named Captures</strong>: Named and numbered capture groups with backreferences</li>
<li><strong>Lookahead and Lookbehind</strong>: Zero-width assertions for complex matching</li>
<li><strong>Flag Modifiers</strong>: Inline flag control for case sensitivity, multiline, and dotall modes</li>
</ul>
<p>Regular expressions are compiled into pattern objects that can be reused for efficient matching operations.</p>
<hr>
<h2 id="character-matching">Character Matching</h2>
<p>Regular expressions match characters in the target text based on pattern specifications. The following table describes all character matching forms:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Pattern</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>.</code></td>
<td style="text-align: left;">Matches any character except line terminators (U+000A, U+000D, U+2028, U+2029). With the <code>dotall</code> flag, matches every code point.</td>
<td style="text-align: left;"><code>a.c</code> matches <code>&quot;abc&quot;</code>, <code>&quot;aXc&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>\0</code></td>
<td style="text-align: left;">Matches NULL character (U+0000)</td>
<td style="text-align: left;"><code>\0</code> matches null byte</td>
</tr>
<tr>
<td style="text-align: left;"><code>\t</code></td>
<td style="text-align: left;">Matches Horizontal Tab (U+0009)</td>
<td style="text-align: left;"><code>a\tb</code> matches <code>&quot;a   b&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>\n</code></td>
<td style="text-align: left;">Matches Line Feed (U+000A)</td>
<td style="text-align: left;"><code>a\nb</code> matches <code>&quot;a\nb&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>\v</code></td>
<td style="text-align: left;">Matches Vertical Tab (U+000B)</td>
<td style="text-align: left;"><code>\v</code> matches vertical tab</td>
</tr>
<tr>
<td style="text-align: left;"><code>\f</code></td>
<td style="text-align: left;">Matches Form Feed (U+000C)</td>
<td style="text-align: left;"><code>\f</code> matches form feed</td>
</tr>
<tr>
<td style="text-align: left;"><code>\r</code></td>
<td style="text-align: left;">Matches Carriage Return (U+000D)</td>
<td style="text-align: left;"><code>\r\n</code> matches Windows line ending</td>
</tr>
<tr>
<td style="text-align: left;"><code>\cX</code></td>
<td style="text-align: left;">Matches control character where X is A-Z or a-z. Value is <code>(code point of X) &amp; 0x1F</code></td>
<td style="text-align: left;"><code>\cA</code> matches Ctrl-A (U+0001)</td>
</tr>
<tr>
<td style="text-align: left;"><code>\\</code></td>
<td style="text-align: left;">Matches backslash character (U+005C)</td>
<td style="text-align: left;"><code>\\</code> matches <code>&quot;\&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>\xHH</code></td>
<td style="text-align: left;">Matches character with hexadecimal code <code>HH</code> (00-FF)</td>
<td style="text-align: left;"><code>\x41</code> matches <code>&quot;A&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>\uHHHH</code></td>
<td style="text-align: left;">Matches character with Unicode code point <code>HHHH</code></td>
<td style="text-align: left;"><code>\u0041</code> matches <code>&quot;A&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>\u{H...}</code></td>
<td style="text-align: left;">Matches character with Unicode code point represented by hex digits (up to 10FFFF)</td>
<td style="text-align: left;"><code>\u{1F600}</code> matches 😀</td>
</tr>
<tr>
<td style="text-align: left;"><code>\X</code></td>
<td style="text-align: left;">When X is one of <code>^ $ . * + ? ( ) [ ] { } | /</code>, matches X literally</td>
<td style="text-align: left;"><code>\(</code> matches <code>&quot;(&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;">Character</td>
<td style="text-align: left;">Any character not listed above matches itself</td>
<td style="text-align: left;"><code>abc</code> matches <code>&quot;abc&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="line-terminators">Line Terminators</h3>
<p>Line terminator code points are: U+000A (Line Feed), U+000D (Carriage Return), U+2028 (Line Separator), and U+2029 (Paragraph Separator).</p>
<h3 id="escape-sequences">Escape Sequences</h3>
<p>All escape sequences must be complete and valid. If <code>\c</code> is not followed by a letter A-Z or a-z, <code>\x</code> is not followed by two hexadecimal digits, <code>\u</code> is not followed by four hexadecimal digits, or <code>\u{...}</code> does not contain valid hexadecimal or exceeds U+10FFFF, an <code>error_escape</code> exception is thrown.</p>
<h3 id="special-character-escaping">Special Character Escaping</h3>
<p>In character classes (see <a href="#character-classes">Character Classes</a>), the hyphen <code>-</code> can also be escaped as <code>\-</code>. The character <code>]</code> must always be escaped as <code>\]</code> to be matched literally.</p>
<hr>
<h2 id="alternatives">Alternatives</h2>
<p>The <code>|</code> operator matches one of multiple alternative patterns, evaluated from left to right:</p>
<pre><code>A|B|C</code></pre>
<p>This matches pattern A, or pattern B, or pattern C. The first successful match is adopted, and remaining alternatives are not evaluated.</p>
<h3 id="example">Example</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;abc|abcdef&#39;</span><span class="op">)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;abcdef&#39;</span><span class="op">)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;abc&quot; (not &quot;abcdef&quot;)</span></span></code></pre></div>
<p>Even though <code>&quot;abcdef&quot;</code> would match the second alternative completely, the pattern matches <code>&quot;abc&quot;</code> from the first alternative because alternatives are evaluated left to right.</p>
<p>Multiple alternatives can be combined:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;cat|dog|bird|fish&#39;</span><span class="op">)</span></span></code></pre></div>
<hr>
<h2 id="character-classes">Character Classes</h2>
<p>Character classes define sets of characters that can match at a single position in the target text.</p>
<h3 id="basic-character-classes">Basic Character Classes</h3>
<p>A character class is enclosed in square brackets <code>[...]</code> and matches any single character from the set:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Pattern</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>[ABC]</code></td>
<td style="text-align: left;">Matches any of A, B, or C</td>
<td style="text-align: left;"><code>[ABC]</code> matches <code>&quot;A&quot;</code>, <code>&quot;B&quot;</code>, or <code>&quot;C&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[^DEF]</code></td>
<td style="text-align: left;">Matches any character except D, E, or F (negated class)</td>
<td style="text-align: left;"><code>[^DEF]</code> matches any character but <code>&quot;D&quot;</code>, <code>&quot;E&quot;</code>, <code>&quot;F&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[G^H]</code></td>
<td style="text-align: left;">Matches G, ^, or H (^ not first, so literal)</td>
<td style="text-align: left;"><code>[G^H]</code> matches <code>&quot;G&quot;</code>, <code>&quot;^&quot;</code>, or <code>&quot;H&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[I-K]</code></td>
<td style="text-align: left;">Matches any character from I to K inclusive (range)</td>
<td style="text-align: left;"><code>[I-K]</code> matches <code>&quot;I&quot;</code>, <code>&quot;J&quot;</code>, <code>&quot;K&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[-LM]</code></td>
<td style="text-align: left;">Matches -, L, or M (leading hyphen is literal)</td>
<td style="text-align: left;"><code>[-LM]</code> matches <code>&quot;-&quot;</code>, <code>&quot;L&quot;</code>, <code>&quot;M&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[N-P-R]</code></td>
<td style="text-align: left;">Matches N, O, P, -, or R (trailing hyphen after range is literal)</td>
<td style="text-align: left;"><code>[N-P-R]</code> matches <code>&quot;N&quot;</code>, <code>&quot;O&quot;</code>, <code>&quot;P&quot;</code>, <code>&quot;-&quot;</code>, <code>&quot;R&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[S\-U]</code></td>
<td style="text-align: left;">Matches S, -, or U (escaped hyphen)</td>
<td style="text-align: left;"><code>[S\-U]</code> matches <code>&quot;S&quot;</code>, <code>&quot;-&quot;</code>, <code>&quot;U&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[.({|]</code></td>
<td style="text-align: left;">Special regex characters lose their special meaning in character classes</td>
<td style="text-align: left;"><code>[.({|]</code> matches <code>&quot;.&quot;</code>, <code>&quot;(&quot;</code>, <code>&quot;{&quot;</code>, <code>&quot;|&quot;</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>[]</code></td>
<td style="text-align: left;">Empty class matches no code points (always fails)</td>
<td style="text-align: left;"><code>[]</code> never matches</td>
</tr>
<tr>
<td style="text-align: left;"><code>[^]</code></td>
<td style="text-align: left;">Complement of empty class matches any code point</td>
<td style="text-align: left;"><code>[^]</code> matches any character including line terminators</td>
</tr>
</tbody>
</table>
<h3 id="character-class-rules">Character Class Rules</h3>
<ol type="1">
<li><strong>Negation</strong>: When <code>^</code> is the first character in <code>[]</code>, the class is negated and matches any character NOT in the set.</li>
<li><strong>Closing Bracket</strong>: The <code>]</code> character must always be escaped as <code>\]</code> to be included literally in a character class.</li>
<li><strong>Hyphen</strong>: The <code>-</code> character creates a range when between two characters. To match <code>-</code> literally, place it first, last, or escape it as <code>\-</code>.</li>
<li><strong>Special Characters</strong>: Most special regex characters (<code>.</code>, <code>*</code>, <code>+</code>, etc.) lose their special meaning inside character classes.</li>
</ol>
<h3 id="character-ranges">Character Ranges</h3>
<p>Ranges define a span of consecutive Unicode code points:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A-Z]&#39;</span><span class="op">)</span>     <span class="co">-- Matches any uppercase letter A-Z</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[0-9]&#39;</span><span class="op">)</span>     <span class="co">-- Matches any digit</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-zA-Z]&#39;</span><span class="op">)</span>  <span class="co">-- Matches any letter</span></span></code></pre></div>
<p>If the range is invalid (e.g., <code>[b-a]</code> where the starting code point is greater than the ending code point), an <code>error_range</code> exception is thrown.</p>
<h3 id="case-insensitive-matching">Case-Insensitive Matching</h3>
<p>When case-insensitive matching is enabled (with the <code>icase</code> flag), character classes expand to include case-folded variations:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[E-F]&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches &#39;E&#39;, &#39;F&#39;, &#39;e&#39;, &#39;f&#39;, and any Unicode case variants</span></span></code></pre></div>
<p><strong>Note</strong>: Range <code>[E-f]</code> with <code>icase</code> flag will match all characters from U+0045 (&#39;E&#39;) to U+0066 (&#39;f&#39;), including brackets, backslash, and other punctuation, plus their case-folded variants.</p>
<h3 id="predefined-character-classes">Predefined Character Classes</h3>
<p>Predefined character classes provide convenient shortcuts for common character sets:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Pattern</th>
<th style="text-align: left;">Equivalent</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>\d</code></td>
<td style="text-align: left;"><code>[0-9]</code></td>
<td style="text-align: left;">Matches any decimal digit</td>
</tr>
<tr>
<td style="text-align: left;"><code>\D</code></td>
<td style="text-align: left;"><code>[^0-9]</code></td>
<td style="text-align: left;">Matches any non-digit</td>
</tr>
<tr>
<td style="text-align: left;"><code>\s</code></td>
<td style="text-align: left;"><code>[ \t\n\v\f\r\u00a0\u1680\u2000-\u200a\u2028-\u2029\u202f\u205f\u3000\ufeff]</code></td>
<td style="text-align: left;">Matches any whitespace character (WhiteSpace + LineTerminator)</td>
</tr>
<tr>
<td style="text-align: left;"><code>\S</code></td>
<td style="text-align: left;"><code>[^ \t\n\v\f\r\u00a0\u1680\u2000-\u200a\u2028-\u2029\u202f\u205f\u3000\ufeff]</code></td>
<td style="text-align: left;">Matches any non-whitespace</td>
</tr>
<tr>
<td style="text-align: left;"><code>\w</code></td>
<td style="text-align: left;"><code>[0-9A-Za-z_]</code></td>
<td style="text-align: left;">Matches any word character (alphanumeric + underscore)</td>
</tr>
<tr>
<td style="text-align: left;"><code>\W</code></td>
<td style="text-align: left;"><code>[^0-9A-Za-z_]</code></td>
<td style="text-align: left;">Matches any non-word character</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{...}</code></td>
<td style="text-align: left;">(See <a href="#unicode-support">Unicode Support</a>)</td>
<td style="text-align: left;">Matches characters with specified Unicode property</td>
</tr>
<tr>
<td style="text-align: left;"><code>\P{...}</code></td>
<td style="text-align: left;">(See <a href="#unicode-support">Unicode Support</a>)</td>
<td style="text-align: left;">Matches characters without specified Unicode property</td>
</tr>
</tbody>
</table>
<p>All predefined character classes can be used inside character classes:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">d!</span><span class="sc">\&quot;</span><span class="st">#$%&amp;</span><span class="sc">\&#39;</span><span class="st">()]&#39;</span><span class="op">)</span>  <span class="co">-- Matches digits or punctuation</span></span></code></pre></div>
<p><strong>Note</strong>: The <code>\s</code> whitespace class automatically expands when new code points are added to Unicode category Zs.</p>
<h3 id="set-operations">Set Operations</h3>
<p>Character classes support advanced set operations for precise character matching. These operations are always available as standard features.</p>
<h4 id="intersection-with-">Intersection with <code>&amp;&amp;</code></h4>
<p>The intersection operator <code>&amp;&amp;</code> matches characters that belong to both sets:</p>
<pre><code>[A&amp;&amp;B]</code></pre>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match lowercase Latin letters only</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">p{sc=Latin}&amp;&amp;</span><span class="sc">\\</span><span class="st">p{Ll}]&#39;</span><span class="op">)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: a, b, c, ..., z, ñ, ø, etc. (lowercase Latin)</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: A, B, C, ... (not lowercase)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match ASCII letters only (not extended Latin)</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">p{sc=Latin}&amp;&amp;[A-Za-z]]&#39;</span><span class="op">)</span></span></code></pre></div>
<h4 id="subtraction-with---">Subtraction with <code>--</code></h4>
<p>The subtraction operator <code>--</code> matches characters in the first set but not in the second:</p>
<pre><code>[A--B]</code></pre>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match Latin letters that are NOT lowercase</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">p{sc=Latin}--</span><span class="sc">\\</span><span class="st">p{Ll}]&#39;</span><span class="op">)</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: A, B, C, ..., Z (uppercase, titlecase, etc.)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: a, b, c, ... (lowercase excluded)</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match letters except vowels</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A-Za-z--[AEIOUaeiou]]&#39;</span><span class="op">)</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: consonants only</span></span></code></pre></div>
<h4 id="string-sequences-with-q">String Sequences with <code>\q{...}</code></h4>
<p>The <code>\q{...}</code> syntax allows character classes to match multi-character sequences:</p>
<pre><code>[a-z\q{ch|th|ph}]</code></pre>
<p>This matches either:</p>
<ul>
<li>Any single character from <code>a-z</code>, OR</li>
<li>The sequence <code>&quot;ch&quot;</code>, OR</li>
<li>The sequence <code>&quot;th&quot;</code>, OR</li>
<li>The sequence <code>&quot;ph&quot;</code></li>
</ul>
<p><strong>Longest Match Priority</strong>: When strings are included in a character class, the longest matching string is always selected first:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-z</span><span class="sc">\\</span><span class="st">q{ch|chocolate}]&#39;</span><span class="op">)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- When matching &quot;chocolate&quot;, matches the full word &quot;chocolate&quot;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Not &quot;ch&quot; followed by &quot;ocolate&quot;</span></span></code></pre></div>
<p>The sequence <code>[a-z\q{ch|th|ph}]</code> is functionally equivalent to <code>(?:ch|th|ph|[a-z])</code>.</p>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match common digraphs or single letters</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-z</span><span class="sc">\\</span><span class="st">q{ch|sh|th|ph}]+&#39;</span><span class="op">)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match emoji sequences or letters</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A-Z</span><span class="sc">\\</span><span class="st">q{:-)|:-(|:-D}]&#39;</span><span class="op">)</span></span></code></pre></div>
<p>String sequences can be used with all set operators (union, intersection, subtraction).</p>
<h4 id="nesting-character-classes">Nesting Character Classes</h4>
<p>Character classes can be nested as operands for set operations:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid: nested classes with operators</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">p{sc=Latin}--[a-z]]&#39;</span><span class="op">)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid: nested union and subtraction</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A[B--C]D]&#39;</span><span class="op">)</span></span></code></pre></div>
<p><strong>Operator Restriction</strong>: Only one type of operator can be used per level of nesting:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- INVALID: mixing &amp;&amp; and -- at same level</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="op">[</span><span class="cn">AB</span><span class="co">--CD]           -- Error: union (AB) then subtraction (--)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- VALID: operators in different nesting levels</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="vs">[[AB]--[CD]]</span>       <span class="co">-- OK: separate nesting levels</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="op">[</span><span class="cn">A</span><span class="op">[</span><span class="cn">B</span><span class="co">--C]D]         -- OK: subtraction inside union</span></span></code></pre></div>
<p>Multiple uses of the same operator are permitted:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid: multiple subtractions at same level</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">[</span>\\p<span class="op">{</span><span class="va">sc</span><span class="op">=</span><span class="va">Latin</span><span class="op">}</span><span class="co">--\\p{Lu}--[a-z]]</span></span></code></pre></div>
<h4 id="character-escaping-in-character-classes">Character Escaping in Character Classes</h4>
<p>The following characters must be escaped with <code>\</code> when used literally in character classes:</p>
<ul>
<li><code>(</code>, <code>)</code>, <code>[</code>, <code>{</code>, <code>}</code>, <code>/</code>, <code>-</code>, <code>|</code></li>
<li><code>]</code> must always be escaped (even outside character classes)</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Correct</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">(</span><span class="sc">\\</span><span class="st">)</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">]</span><span class="sc">\\</span><span class="st">{</span><span class="sc">\\</span><span class="st">}]&#39;</span><span class="op">)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Incorrect (throws error_noescape)</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[(]&#39;</span><span class="op">)</span></span></code></pre></div>
<h4 id="reserved-double-punctuators">Reserved Double Punctuators</h4>
<p>The following 18 double-character sequences are reserved for future use and cannot appear in character classes:</p>
<pre><code>!!  ##  $$  %%  **  ++  ,,  ..
::  ;;  &lt;&lt;  ==  &gt;&gt;  ??  @@  ^^
``  ~~</code></pre>
<p>If any of these appear in a character class, an <code>error_operator</code> exception is thrown.</p>
<hr>
<h2 id="quantifiers">Quantifiers</h2>
<p>Quantifiers specify how many times a pattern element must match. Each quantifier has a greedy and non-greedy form.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Quantifier</th>
<th style="text-align: left;">Non-Greedy</th>
<th style="text-align: left;">Matches</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>*</code></td>
<td style="text-align: left;"><code>*?</code></td>
<td style="text-align: left;">0 or more</td>
<td style="text-align: left;">Repeats the preceding element zero or more times</td>
</tr>
<tr>
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;"><code>+?</code></td>
<td style="text-align: left;">1 or more</td>
<td style="text-align: left;">Repeats the preceding element one or more times</td>
</tr>
<tr>
<td style="text-align: left;"><code>?</code></td>
<td style="text-align: left;"><code>??</code></td>
<td style="text-align: left;">0 or 1</td>
<td style="text-align: left;">Makes the preceding element optional</td>
</tr>
<tr>
<td style="text-align: left;"><code>{n}</code></td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">Exactly n</td>
<td style="text-align: left;">Repeats the preceding element exactly n times</td>
</tr>
<tr>
<td style="text-align: left;"><code>{n,}</code></td>
<td style="text-align: left;"><code>{n,}?</code></td>
<td style="text-align: left;">n or more</td>
<td style="text-align: left;">Repeats the preceding element at least n times</td>
</tr>
<tr>
<td style="text-align: left;"><code>{n,m}</code></td>
<td style="text-align: left;"><code>{n,m}?</code></td>
<td style="text-align: left;">n to m</td>
<td style="text-align: left;">Repeats the preceding element between n and m times (inclusive)</td>
</tr>
</tbody>
</table>
<h3 id="greedy-vs-non-greedy">Greedy vs Non-Greedy</h3>
<p><strong>Greedy quantifiers</strong> (default) match as many characters as possible while still allowing the overall pattern to succeed:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a.*b&#39;</span><span class="op">)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;axxxbxxxb&#39;</span><span class="op">)</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;axxxbxxxb&quot; (matches up to the last &#39;b&#39;)</span></span></code></pre></div>
<p><strong>Non-greedy quantifiers</strong> (with <code>?</code> suffix) match as few characters as possible while still allowing the overall pattern to succeed:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a.*?b&#39;</span><span class="op">)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;axxxbxxxb&#39;</span><span class="op">)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;axxxb&quot; (stops at the first &#39;b&#39;)</span></span></code></pre></div>
<h3 id="quantifier-rules">Quantifier Rules</h3>
<ol type="1">
<li><p>Quantifiers must have a preceding expression to quantify. Using a quantifier without a preceding element (e.g., <code>*</code> at the start of a pattern) throws <code>error_badrepeat</code>.</p></li>
<li><p>If a quantifier range is invalid (e.g., <code>{3,2}</code> where n &gt; m), an <code>error_badbrace</code> exception is thrown.</p></li>
<li><p>Mismatched <code>{</code> or <code>}</code> characters throw <code>error_brace</code>.</p></li>
</ol>
<h3 id="examples">Examples</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match one or more digits</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match optional sign followed by digits</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[+-]?</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match exactly 3 letters</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A-Za-z]{3}&#39;</span><span class="op">)</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match 2 to 4 word characters (greedy)</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">w{2,4}&#39;</span><span class="op">)</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match 2 to 4 word characters (non-greedy)</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">w{2,4}?&#39;</span><span class="op">)</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match at least 5 digits</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{5,}&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="quantifiers-and-captured-groups">Quantifiers and Captured Groups</h3>
<p>When a capturing group is quantified, the captured value is updated on each iteration. Only the last iteration&#39;s match is preserved:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?:(a)|(b))+&#39;</span><span class="op">)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;ab&#39;</span><span class="op">)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;ab&quot; (full match)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[2] = &quot;&quot; (empty, last iteration captured &#39;b&#39;, not &#39;a&#39;)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[3] = &quot;b&quot; (last iteration captured &#39;b&#39;)</span></span></code></pre></div>
<hr>
<h2 id="grouping-and-backreferences">Grouping and Backreferences</h2>
<p>Parentheses create groups for capturing matches and controlling operator precedence.</p>
<h3 id="capturing-groups">Capturing Groups</h3>
<p>Capturing groups are created with <code>(...)</code> and are numbered starting from 1:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(</span><span class="sc">\\</span><span class="st">d{3})-(</span><span class="sc">\\</span><span class="st">d{3})-(</span><span class="sc">\\</span><span class="st">d{4})&#39;</span><span class="op">)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;555-123-4567&#39;</span><span class="op">)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;555-123-4567&quot; (full match, always at index 1)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[2] = &quot;555&quot; (first capturing group)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[3] = &quot;123&quot; (second capturing group)</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[4] = &quot;4567&quot; (third capturing group)</span></span></code></pre></div>
<p><strong>Group Numbering</strong>: Groups are numbered by the position of their opening <code>(</code> parenthesis from left to right:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;((a)(b))c&#39;</span><span class="op">)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Group 1: ((a)(b))</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Group 2: (a)</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Group 3: (b)</span></span></code></pre></div>
<h3 id="non-capturing-groups">Non-Capturing Groups</h3>
<p>Non-capturing groups <code>(?:...)</code> group expressions without creating a capture:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?:tak(?:e|ing))&#39;</span><span class="op">)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches &quot;take&quot; or &quot;taking&quot; without capturing</span></span></code></pre></div>
<p>Use non-capturing groups to:</p>
<ul>
<li>Apply quantifiers to multiple characters: <code>(?:ab)+</code></li>
<li>Group alternatives: <code>(?:cat|dog)</code></li>
<li>Improve performance (slightly faster than capturing groups)</li>
</ul>
<h3 id="named-capture-groups">Named Capture Groups</h3>
<p>Named groups associate a name with a captured substring:</p>
<pre><code>(?&lt;name&gt;...)</code></pre>
<p><strong>Example</strong>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;year&gt;</span><span class="sc">\\</span><span class="st">d{4})-(?&lt;month&gt;</span><span class="sc">\\</span><span class="st">d{2})-(?&lt;day&gt;</span><span class="sc">\\</span><span class="st">d{2})&#39;</span><span class="op">)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;2025-10-14&#39;</span><span class="op">)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;2025-10-14&quot;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[2] = &quot;2025&quot; (group 1, also accessible as &#39;year&#39;)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[3] = &quot;10&quot; (group 2, also accessible as &#39;month&#39;)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[4] = &quot;14&quot; (group 3, also accessible as &#39;day&#39;)</span></span></code></pre></div>
<p>Named groups are also assigned a number and can be accessed by both name and number.</p>
<h3 id="duplicate-named-groups">Duplicate Named Groups</h3>
<p>Named groups can be reused if they appear in different alternatives:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;year&gt;</span><span class="sc">\\</span><span class="st">d{4})-</span><span class="sc">\\</span><span class="st">d{1,2}|</span><span class="sc">\\</span><span class="st">d{1,2}-(?&lt;year&gt;</span><span class="sc">\\</span><span class="st">d{4})&#39;</span><span class="op">)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches &quot;2025-10&quot; or &quot;10-2025&quot;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- &#39;year&#39; captures the 4-digit year from either position</span></span></code></pre></div>
<p>This feature was introduced in ES2025.</p>
<h3 id="numeric-backreferences">Numeric Backreferences</h3>
<p>A backreference <code>\N</code> (where N is a positive integer starting from 1) matches the same text that was captured by group N:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(TO|to)..</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="op">)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches &quot;TOMATO&quot; or &quot;tomato&quot; but not &quot;Tomato&quot;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- \1 refers to captured text from group 1</span></span></code></pre></div>
<p><strong>Example</strong>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;([&quot;</span><span class="sc">\&#39;</span><span class="st">]).*?</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="op">)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches string in quotes: &quot;hello&quot; or &#39;hello&#39;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- But not mixed quotes: &quot;hello&#39;</span></span></code></pre></div>
<h3 id="named-backreferences">Named Backreferences</h3>
<p>A backreference <code>\k&lt;name&gt;</code> matches the text captured by a named group:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;quote&gt;[&quot;</span><span class="sc">\&#39;</span><span class="st">]).*?</span><span class="sc">\\</span><span class="st">k&lt;quote&gt;&#39;</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Same as above, but using named group</span></span></code></pre></div>
<h3 id="backreference-rules">Backreference Rules</h3>
<ol type="1">
<li><p><strong>Forward References</strong>: Backreferences can appear before their corresponding group:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">1(abc)&#39;</span><span class="op">)</span>  <span class="co">-- Valid in ECMAScript</span></span></code></pre></div></li>
<li><p><strong>Undefined Matches</strong>: A backreference to a group that hasn&#39;t captured anything matches the empty string:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(a)?b</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="op">)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches &quot;b&quot; (group 1 didn&#39;t capture, so \1 matches empty string)</span></span></code></pre></div></li>
<li><p><strong>Invalid Groups</strong>: If a backreference refers to a non-existent group number, an <code>error_backref</code> exception is thrown:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">5&#39;</span><span class="op">)</span>  <span class="co">-- Error: no group 5 exists</span></span></code></pre></div></li>
</ol>
<h3 id="group-capture-clearing">Group Capture Clearing</h3>
<p>When a capturing group is inside a quantified expression, captures are cleared on each iteration:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?:(a)|(b))+&#39;</span><span class="op">)</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;ab&#39;</span><span class="op">)</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Only the last iteration&#39;s captures are retained</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[2] = &quot;&quot; (group 1&#39;s last iteration matched nothing)</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[3] = &quot;b&quot; (group 2&#39;s last iteration matched &quot;b&quot;)</span></span></code></pre></div>
<hr>
<h2 id="flag-modifiers">Flag Modifiers</h2>
<p>Flag modifiers allow inline control of matching behaviour within specific parts of a pattern.</p>
<h3 id="bounded-flag-modifiers">Bounded Flag Modifiers</h3>
<p>Bounded flag modifiers enable or disable flags only within a specific group:</p>
<pre><code>(?ims-ims:...)</code></pre>
<p><strong>Available Flags</strong>:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Flag</th>
<th style="text-align: left;">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>i</code></td>
<td style="text-align: left;">Case-insensitive matching (icase)</td>
</tr>
<tr>
<td style="text-align: left;"><code>m</code></td>
<td style="text-align: left;">Multiline mode (^ and $ match line boundaries)</td>
</tr>
<tr>
<td style="text-align: left;"><code>s</code></td>
<td style="text-align: left;">Dotall mode (. matches line terminators)</td>
</tr>
<tr>
<td style="text-align: left;"><code>-i</code></td>
<td style="text-align: left;">Disable case-insensitive matching</td>
</tr>
<tr>
<td style="text-align: left;"><code>-m</code></td>
<td style="text-align: left;">Disable multiline mode</td>
</tr>
<tr>
<td style="text-align: left;"><code>-s</code></td>
<td style="text-align: left;">Disable dotall mode</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Case-insensitive only for middle section</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;hello(?i:world)THERE&#39;</span><span class="op">)</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;helloworldTHERE&quot;, &quot;helloWORLDTHERE&quot;, &quot;helloWoRlDTHERE&quot;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;HELLOworldthere&quot; (case-sensitive outside group)</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Combine multiple flags</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?ims:.*)&#39;</span><span class="op">)</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Case-insensitive + multiline + dotall for entire group</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Disable flags</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?i)hello(?-i:world)&#39;</span><span class="op">)</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="co">-- &quot;hello&quot; is case-insensitive, &quot;world&quot; is case-sensitive</span></span></code></pre></div>
<h3 id="flag-modifier-rules">Flag Modifier Rules</h3>
<ol type="1">
<li><p><strong>Single Use per Flag</strong>: Each flag letter can only appear once per modifier group:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- INVALID: &#39;i&#39; appears twice</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>?<span class="va">ii</span><span class="op">:...)</span>      <span class="co">-- Throws error_modifier</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>?<span class="va">i</span><span class="op">-</span><span class="va">i</span><span class="op">:...)</span>     <span class="co">-- Throws error_modifier</span></span></code></pre></div></li>
<li><p><strong>Scope</strong>: Flag modifiers affect only the expressions inside their group.</p></li>
<li><p><strong>ES2025 Feature</strong>: Bounded flag modifiers were introduced in ES2025 and are enabled by default.</p></li>
</ol>
<hr>
<h2 id="assertions">Assertions</h2>
<p>Assertions test conditions at the current position without consuming characters (zero-width).</p>
<h3 id="anchors">Anchors</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Assertion</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>^</code></td>
<td style="text-align: left;">Matches at the start of the string. With multiline flag, also matches immediately after line terminators.</td>
</tr>
<tr>
<td style="text-align: left;"><code>$</code></td>
<td style="text-align: left;">Matches at the end of the string. With multiline flag, also matches immediately before line terminators.</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match lines starting with &quot;#&quot;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^#.*&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">MULTILINE</span><span class="op">)</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match lines ending with &quot;;&quot;</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;.*;$&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">MULTILINE</span><span class="op">)</span></span></code></pre></div>
<h3 id="word-boundaries">Word Boundaries</h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Assertion</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>\b</code></td>
<td style="text-align: left;">Matches at a word boundary (between <code>\w</code> and <code>\W</code>)</td>
</tr>
<tr>
<td style="text-align: left;"><code>\B</code></td>
<td style="text-align: left;">Matches at a non-word boundary (not between <code>\w</code> and <code>\W</code>)</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match &quot;cat&quot; as a whole word</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">bcat</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">)</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;cat in hat&quot;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;concatenate&quot;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match &quot;cat&quot; not as a whole word</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">Bcat</span><span class="sc">\\</span><span class="st">B&#39;</span><span class="op">)</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;concatenate&quot;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;cat in hat&quot;</span></span></code></pre></div>
<p><strong>Note</strong>: Inside a character class <code>[...]</code>, <code>\b</code> matches the BEL character (U+0008), not a word boundary. Using <code>\B</code> inside a character class throws <code>error_escape</code>.</p>
<h3 id="lookahead-assertions">Lookahead Assertions</h3>
<p>Lookahead assertions check if a pattern matches ahead without consuming characters:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Assertion</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>(?=...)</code></td>
<td style="text-align: left;">Positive lookahead: succeeds if pattern matches ahead</td>
</tr>
<tr>
<td style="text-align: left;"><code>(?!...)</code></td>
<td style="text-align: left;">Negative lookahead: succeeds if pattern does NOT match ahead</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match &quot;a&quot; only if followed by &quot;bc&quot; or &quot;def&quot;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a(?=bc|def)&#39;</span><span class="op">)</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;abc&quot; (captures &quot;a&quot;), &quot;adef&quot; (captures &quot;a&quot;)</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;axyz&quot;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match &quot;a&quot; only if NOT followed by &quot;bc&quot; or &quot;def&quot;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a(?!bc|def)&#39;</span><span class="op">)</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;axyz&quot; (captures &quot;a&quot;)</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;abc&quot;, &quot;adef&quot;</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co">-- Find &amp; symbols that are not HTML entities</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&amp;(?!amp;|lt;|gt;|#)&#39;</span><span class="op">)</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches bare &quot;&amp;&quot; but not &quot;&amp;amp;&quot;, &quot;&amp;lt;&quot;, etc.</span></span></code></pre></div>
<h3 id="lookbehind-assertions">Lookbehind Assertions</h3>
<p>Lookbehind assertions check if a pattern matches behind without consuming characters:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Assertion</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>(?&lt;=...)</code></td>
<td style="text-align: left;">Positive lookbehind: succeeds if pattern matches behind</td>
</tr>
<tr>
<td style="text-align: left;"><code>(?&lt;!...)</code></td>
<td style="text-align: left;">Negative lookbehind: succeeds if pattern does NOT match behind</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match &quot;a&quot; only if preceded by &quot;bc&quot; or &quot;de&quot;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;=bc|de)a&#39;</span><span class="op">)</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;bca&quot; (captures &quot;a&quot;), &quot;dea&quot; (captures &quot;a&quot;)</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;xa&quot;</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match &quot;a&quot; only if NOT preceded by &quot;bc&quot; or &quot;de&quot;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;!bc|de)a&#39;</span><span class="op">)</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;xa&quot; (captures &quot;a&quot;)</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Does NOT match: &quot;bca&quot;, &quot;dea&quot;</span></span></code></pre></div>
<h3 id="assertion-combinations">Assertion Combinations</h3>
<p>Assertions can be combined for complex matching:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match words between 3-6 letters containing at least one vowel</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">b(?=</span><span class="sc">\\</span><span class="st">w*[aeiou])</span><span class="sc">\\</span><span class="st">w{3,6}</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match integer strings that are not part of larger numbers</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;!</span><span class="sc">\\</span><span class="st">d)</span><span class="sc">\\</span><span class="st">d+(?!</span><span class="sc">\\</span><span class="st">d)&#39;</span><span class="op">)</span></span></code></pre></div>
<hr>
<h2 id="unicode-support">Unicode Support</h2>
<p>Parasol&#39;s regex implementation provides full Unicode support with UTF-8 encoding enabled by default.</p>
<h3 id="unicode-properties">Unicode Properties</h3>
<p>Unicode properties match characters based on their Unicode characteristics using <code>\p{...}</code> and <code>\P{...}</code>:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Pattern</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>\p{Property}</code></td>
<td style="text-align: left;">Matches characters with the specified Unicode property</td>
</tr>
<tr>
<td style="text-align: left;"><code>\P{Property}</code></td>
<td style="text-align: left;">Matches characters without the specified Unicode property</td>
</tr>
</tbody>
</table>
<h3 id="common-unicode-properties">Common Unicode Properties</h3>
<h4 id="script-properties">Script Properties</h4>
<p>Match characters from specific writing systems:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match Latin characters</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{sc=Latin}+&#39;</span><span class="op">)</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match Greek characters</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{Script=Greek}+&#39;</span><span class="op">)</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match characters used in Latin or Common scripts</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{scx=Latin}+&#39;</span><span class="op">)</span></span></code></pre></div>
<p>Common scripts: <code>Latin</code>, <code>Greek</code>, <code>Cyrillic</code>, <code>Han</code>, <code>Arabic</code>, <code>Hebrew</code>, <code>Hiragana</code>, <code>Katakana</code>, etc.</p>
<h4 id="general-categories">General Categories</h4>
<p>Match characters by their general category:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Property</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>\p{Lu}</code></td>
<td style="text-align: left;">Uppercase letter</td>
<td style="text-align: left;">A, B, Z, À, Ω</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{Ll}</code></td>
<td style="text-align: left;">Lowercase letter</td>
<td style="text-align: left;">a, b, z, à, ω</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{Lt}</code></td>
<td style="text-align: left;">Titlecase letter</td>
<td style="text-align: left;">ǅ, ǈ, ǋ</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{L}</code></td>
<td style="text-align: left;">Any letter (Lu|Ll|Lt|Lm|Lo)</td>
<td style="text-align: left;">All letters</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{Nd}</code></td>
<td style="text-align: left;">Decimal number</td>
<td style="text-align: left;">0-9, ০-৯</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{N}</code></td>
<td style="text-align: left;">Any number (Nd|Nl|No)</td>
<td style="text-align: left;">All numbers</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{P}</code></td>
<td style="text-align: left;">Punctuation</td>
<td style="text-align: left;">., !, ?, ;</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{S}</code></td>
<td style="text-align: left;">Symbol</td>
<td style="text-align: left;">$, +, =, ©</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{Z}</code></td>
<td style="text-align: left;">Separator</td>
<td style="text-align: left;">Space, non-breaking space</td>
</tr>
<tr>
<td style="text-align: left;"><code>\p{C}</code></td>
<td style="text-align: left;">Other (control, format, etc.)</td>
<td style="text-align: left;">Control characters</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match any letter in any script</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{L}+&#39;</span><span class="op">)</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match digits in any script</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{Nd}+&#39;</span><span class="op">)</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match all punctuation</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{P}+&#39;</span><span class="op">)</span></span></code></pre></div>
<h4 id="binary-properties">Binary Properties</h4>
<p>Binary properties have true/false values:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match whitespace characters</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{White_Space}+&#39;</span><span class="op">)</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match emoji</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{Emoji}&#39;</span><span class="op">)</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match characters used in identifiers</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{ID_Start}</span><span class="sc">\\</span><span class="st">p{ID_Continue}*&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="unicode-property-syntax">Unicode Property Syntax</h3>
<p>Properties can be specified in several formats:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Short form</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>\\p<span class="op">{</span><span class="va">Lu</span><span class="op">}</span>              <span class="co">-- Uppercase letter</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>\\p<span class="op">{</span><span class="va">sc</span><span class="op">=</span><span class="va">Latin</span><span class="op">}</span>        <span class="co">-- Latin script</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Long form</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>\\p<span class="op">{</span><span class="va">Script</span><span class="op">=</span><span class="va">Latin</span><span class="op">}</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>\\p<span class="op">{</span><span class="va">General_Category</span><span class="op">=</span><span class="va">Uppercase_Letter</span><span class="op">}</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Binary properties</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>\\p<span class="op">{</span><span class="va">Emoji</span><span class="op">}</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>\\p<span class="op">{</span><span class="va">White_Space</span><span class="op">}</span></span></code></pre></div>
<p>For a complete list of available properties, see the <a href="https://tc39.es/ecma262/multipage/text-processing.html#sec-runtime-semantics-unicodematchproperty-p">ECMAScript Unicode Property Table</a>.</p>
<h3 id="string-properties">String Properties</h3>
<p>Some Unicode properties match sequences of multiple characters (string properties). These can be used in character classes except negated classes:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid: string property in positive class</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">p{RGI_Emoji}]&#39;</span><span class="op">)</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- INVALID: string property with negation</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[^</span><span class="sc">\\</span><span class="st">p{RGI_Emoji}]&#39;</span><span class="op">)</span>  <span class="co">-- Throws error_complement</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- INVALID: string property with \P{...}</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">P{RGI_Emoji}&#39;</span><span class="op">)</span>     <span class="co">-- Throws error_complement</span></span></code></pre></div>
<h3 id="unicode-case-folding">Unicode Case Folding</h3>
<p>When case-insensitive matching is enabled with the <code>icase</code> flag, Unicode case folding rules apply:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;café&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;café&quot;, &quot;CAFÉ&quot;, &quot;Café&quot;, &quot;cAfÉ&quot;, etc.</span></span></code></pre></div>
<p>Case folding follows Unicode rules, which may match more characters than simple ASCII uppercasing/lowercasing:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;ß&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;ß&quot; and &quot;SS&quot; (German sharp S case-folds to SS)</span></span></code></pre></div>
<h3 id="unicode-code-point-ranges">Unicode Code Point Ranges</h3>
<p>Character classes operate on Unicode code points:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match all characters in Basic Multilingual Plane</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">u0000-</span><span class="sc">\\</span><span class="st">uFFFF]+&#39;</span><span class="op">)</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match emoji range (partial)</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">u{1F600}-</span><span class="sc">\\</span><span class="st">u{1F64F}]+&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="invalid-utf-8-handling">Invalid UTF-8 Handling</h3>
<p>The regex engine validates UTF-8 sequences:</p>
<ol type="1">
<li><p><strong>Trailing bytes</strong> must be in range 0x80-0xBF. Invalid trailing bytes cause matching to fail at that position.</p></li>
<li><p><strong>Code points</strong> must be ≤ 0x10FFFF. Values exceeding this cause matching to fail.</p></li>
<li><p><strong>Non-shortest forms</strong> are rejected. For example, U+0030 (digit &#39;0&#39;) must be encoded as 0x30, not as the longer forms 0xC0 0xB0 or 0xE0 0x80 0xB0.</p></li>
</ol>
<p>At pattern compile time, invalid UTF-8 throws <code>error_utf8</code>. At matching time, invalid UTF-8 leads to match failure at that position.</p>
<hr>
<h2 id="compilation-flags">Compilation Flags</h2>
<p>Compilation flags affect how a regex pattern is compiled and interpreted. These flags are specified when creating a regex object.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Flag</th>
<th style="text-align: left;">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>ICASE</code></td>
<td style="text-align: left;">Case-insensitive matching. Matches characters regardless of case using Unicode case-folding rules.</td>
</tr>
<tr>
<td style="text-align: left;"><code>MULTILINE</code></td>
<td style="text-align: left;">Multiline mode. The <code>^</code> and <code>$</code> anchors match at line boundaries (after/before line terminators) in addition to string boundaries.</td>
</tr>
<tr>
<td style="text-align: left;"><code>DOTALL</code></td>
<td style="text-align: left;">Dotall (singleline) mode. The <code>.</code> metacharacter matches line terminators (U+000A, U+000D, U+2028, U+2029) in addition to all other characters.</td>
</tr>
</tbody>
</table>
<h3 id="flag-usage">Flag Usage</h3>
<p>The exact syntax for specifying flags depends on the language binding:</p>
<p><strong>Fluid</strong>:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;.*&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">DOTALL</span><span class="op">)</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^line&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">MULTILINE</span> <span class="op">+</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span></code></pre></div>
<p><strong>C++</strong>:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> pattern <span class="op">=</span> pf<span class="op">::</span>regex<span class="op">(</span><span class="st">&quot;hello&quot;</span><span class="op">,</span> pf<span class="op">::</span>regex<span class="op">::</span>ICASE<span class="op">);</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> pattern <span class="op">=</span> pf<span class="op">::</span>regex<span class="op">(</span><span class="st">&quot;.*&quot;</span><span class="op">,</span> pf<span class="op">::</span>regex<span class="op">::</span>DOTALL<span class="op">);</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> pattern <span class="op">=</span> pf<span class="op">::</span>regex<span class="op">(</span><span class="st">&quot;^line&quot;</span><span class="op">,</span> pf<span class="op">::</span>regex<span class="op">::</span>MULTILINE <span class="op">|</span> pf<span class="op">::</span>regex<span class="op">::</span>ICASE<span class="op">);</span></span></code></pre></div>
<h3 id="flag-effects">Flag Effects</h3>
<h4 id="icase-case-insensitive">ICASE (Case-Insensitive)</h4>
<p>Makes pattern matching case-insensitive using Unicode case-folding:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;hello&quot;, &quot;HELLO&quot;, &quot;Hello&quot;, &quot;HeLLo&quot;, etc.</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-z]+&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">ICASE</span><span class="op">)</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;abc&quot;, &quot;ABC&quot;, &quot;aBc&quot;, etc.</span></span></code></pre></div>
<h4 id="multiline">MULTILINE</h4>
<p>Changes behaviour of <code>^</code> and <code>$</code> anchors to match line boundaries:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^</span><span class="sc">\\</span><span class="st">w+&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">MULTILINE</span><span class="op">)</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Without MULTILINE: matches word at start of string only</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- With MULTILINE: matches word at start of string AND after each line terminator</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">text</span> <span class="op">=</span> <span class="st">&quot;first line</span><span class="sc">\n</span><span class="st">second line</span><span class="sc">\n</span><span class="st">third line&quot;</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^</span><span class="sc">\\</span><span class="st">w+&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">MULTILINE</span><span class="op">)</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;first&quot;, &quot;second&quot;, &quot;third&quot;</span></span></code></pre></div>
<h4 id="dotall">DOTALL</h4>
<p>Makes <code>.</code> match line terminators in addition to all other characters:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;.*&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">DOTALL</span><span class="op">)</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Without DOTALL: .* matches up to (but not including) line terminators</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- With DOTALL: .* matches everything including line terminators</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">text</span> <span class="op">=</span> <span class="st">&quot;line 1</span><span class="sc">\n</span><span class="st">line 2</span><span class="sc">\n</span><span class="st">line 3&quot;</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;.*&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">DOTALL</span><span class="op">)</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="va">text</span><span class="op">)</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;line 1\nline 2\nline 3&quot; (entire string)</span></span></code></pre></div>
<p><strong>Note</strong>: When <code>DOTALL</code> is set, <code>.*</code> will match all remaining characters in the subject string.</p>
<hr>
<h2 id="match-flags">Match Flags</h2>
<p>Match flags modify the behaviour of matching operations at runtime, after a pattern has been compiled. These flags are passed to matching functions (test, match, search, replace, split).</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Flag</th>
<th style="text-align: left;">Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>NOT_BEGIN_OF_LINE</code></td>
<td style="text-align: left;">Do not treat the beginning of the text as the start of a line (affects <code>^</code> in multiline mode)</td>
</tr>
<tr>
<td style="text-align: left;"><code>NOT_END_OF_LINE</code></td>
<td style="text-align: left;">Do not treat the end of the text as the end of a line (affects <code>$</code> in multiline mode)</td>
</tr>
<tr>
<td style="text-align: left;"><code>NOT_BEGIN_OF_WORD</code></td>
<td style="text-align: left;">Do not treat the beginning of the text as the start of a word (affects <code>\b</code>)</td>
</tr>
<tr>
<td style="text-align: left;"><code>NOT_END_OF_WORD</code></td>
<td style="text-align: left;">Do not treat the end of the text as the end of a word (affects <code>\b</code>)</td>
</tr>
<tr>
<td style="text-align: left;"><code>NOT_NULL</code></td>
<td style="text-align: left;">Do not match empty sequences</td>
</tr>
<tr>
<td style="text-align: left;"><code>CONTINUOUS</code></td>
<td style="text-align: left;">Only match at the beginning of the text (anchored search)</td>
</tr>
<tr>
<td style="text-align: left;"><code>PREV_AVAILABLE</code></td>
<td style="text-align: left;">Indicates that the previous character position is available for lookbehind assertions</td>
</tr>
<tr>
<td style="text-align: left;"><code>REPLACE_NO_COPY</code></td>
<td style="text-align: left;">In replace operations, do not copy non-matching parts of the text</td>
</tr>
<tr>
<td style="text-align: left;"><code>REPLACE_FIRST_ONLY</code></td>
<td style="text-align: left;">In replace operations, replace only the first occurrence</td>
</tr>
</tbody>
</table>
<h3 id="match-flag-usage">Match Flag Usage</h3>
<p><strong>Fluid</strong>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">w+&#39;</span><span class="op">)</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Replace only first occurrence</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">result</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>replace<span class="op">(</span><span class="st">&#39;hello world&#39;</span><span class="op">,</span> <span class="st">&#39;goodbye&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">REPLACE_FIRST_ONLY</span><span class="op">)</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- result = &quot;goodbye world&quot;</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Match only at beginning</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;hello world&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">CONTINUOUS</span><span class="op">)</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Succeeds (starts at beginning)</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;  hello&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">CONTINUOUS</span><span class="op">)</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co">-- Fails (does not start at beginning)</span></span></code></pre></div>
<h3 id="flag-details">Flag Details</h3>
<h4 id="not_begin_of_line--not_end_of_line">NOT_BEGIN_OF_LINE / NOT_END_OF_LINE</h4>
<p>Useful when matching in the middle of a larger text:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^hello&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">MULTILINE</span><span class="op">)</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Normal matching</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>test<span class="op">(</span><span class="st">&#39;hello&#39;</span><span class="op">)</span>  <span class="co">-- true (at beginning)</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- With NOT_BEGIN_OF_LINE</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>test<span class="op">(</span><span class="st">&#39;hello&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">NOT_BEGIN_OF_LINE</span><span class="op">)</span>  <span class="co">-- false (not treated as line start)</span></span></code></pre></div>
<h4 id="not_null">NOT_NULL</h4>
<p>Prevents matching empty strings:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a*&#39;</span><span class="op">)</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Normal: matches empty string</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>test<span class="op">(</span><span class="st">&#39;&#39;</span><span class="op">)</span>  <span class="co">-- true</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- With NOT_NULL: rejects empty match</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>test<span class="op">(</span><span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">NOT_NULL</span><span class="op">)</span>  <span class="co">-- false</span></span></code></pre></div>
<h4 id="continuous">CONTINUOUS</h4>
<p>Forces match to start at the beginning of the text:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Normal: finds &quot;123&quot; anywhere</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;  123&#39;</span><span class="op">)</span>  <span class="co">-- Matches &quot;123&quot;</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- With CONTINUOUS: must start at position 0</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;  123&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">CONTINUOUS</span><span class="op">)</span>  <span class="co">-- Fails</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;123&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">CONTINUOUS</span><span class="op">)</span>     <span class="co">-- Succeeds</span></span></code></pre></div>
<h4 id="replace_no_copy">REPLACE_NO_COPY</h4>
<p>Affects replace operations by excluding non-matching text:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Normal replace: keeps non-matching text</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>replace<span class="op">(</span><span class="st">&#39;a123b456c&#39;</span><span class="op">,</span> <span class="st">&#39;X&#39;</span><span class="op">)</span>  <span class="co">-- &quot;aXbXc&quot;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- With REPLACE_NO_COPY: only includes replacements</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>replace<span class="op">(</span><span class="st">&#39;a123b456c&#39;</span><span class="op">,</span> <span class="st">&#39;X&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">REPLACE_NO_COPY</span><span class="op">)</span>  <span class="co">-- &quot;XX&quot;</span></span></code></pre></div>
<h4 id="replace_first_only">REPLACE_FIRST_ONLY</h4>
<p>Limits replacement to the first match:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Normal replace: replaces all</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>replace<span class="op">(</span><span class="st">&#39;123 456 789&#39;</span><span class="op">,</span> <span class="st">&#39;X&#39;</span><span class="op">)</span>  <span class="co">-- &quot;X X X&quot;</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- With REPLACE_FIRST_ONLY: replaces only first</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="va">pattern</span><span class="op">.</span>replace<span class="op">(</span><span class="st">&#39;123 456 789&#39;</span><span class="op">,</span> <span class="st">&#39;X&#39;</span><span class="op">,</span> <span class="va">regex</span><span class="op">.</span><span class="cn">REPLACE_FIRST_ONLY</span><span class="op">)</span>  <span class="co">-- &quot;X 456 789&quot;</span></span></code></pre></div>
<hr>
<h2 id="regular-expression-features">Regular Expression Features</h2>
<p>Parasol&#39;s regex implementation is based on the ECMAScript specification and provides the following characteristics:</p>
<h3 id="ecmascript-compliance">ECMAScript Compliance</h3>
<p>The implementation supports expressions defined in the <a href="https://tc39.es/ecma262/multipage/text-processing.html#sec-regexp-regular-expression-objects">ECMAScript Specification</a> (latest draft), including:</p>
<ul>
<li>ECMAScript 2018 (ES9): Named capture groups, lookbehind assertions, Unicode property escapes</li>
<li>ECMAScript 2025: Duplicate named capture groups, bounded flag modifiers</li>
<li>Set operations for character classes (intersection, subtraction, string sequences)</li>
</ul>
<h3 id="differences-from-other-engines">Differences from Other Engines</h3>
<h4 id="vs-perl--pcre">vs. Perl / PCRE</h4>
<ul>
<li><strong>No <code>\Q...\E</code> literal sequences</strong>: Use explicit escaping instead</li>
<li><strong>No possessive quantifiers</strong>: Use atomic groups or lookahead for equivalent behaviour</li>
<li><strong>No recursive patterns</strong>: Not supported in ECMAScript</li>
<li><strong>No conditional patterns</strong>: Use alternation with lookahead instead</li>
<li><strong>Different Unicode categories</strong>: Follow ECMAScript Unicode property names</li>
</ul>
<h4 id="vs-net-regex">vs. .NET Regex</h4>
<ul>
<li><strong>No balanced groups</strong>: Named captures cannot be reused except in alternatives</li>
<li><strong>No inline comments</strong>: <code>(?#...)</code> is not supported</li>
<li><strong>Different flag syntax</strong>: Uses ECMAScript <code>(?ims:...)</code> instead of <code>(?imnsx-imnsx:...)</code></li>
</ul>
<h4 id="vs-posix">vs. POSIX</h4>
<ul>
<li><strong>No POSIX character classes</strong>: Use Unicode properties instead (e.g., <code>\p{Alpha}</code> instead of <code>[[:alpha:]]</code>)</li>
<li><strong>No collating sequences</strong>: <code>[.ch.]</code> not supported</li>
<li><strong>No equivalence classes</strong>: <code>[=e=]</code> not supported</li>
</ul>
<h3 id="notable-behaviours">Notable Behaviours</h3>
<h4 id="forward-backreferences">Forward Backreferences</h4>
<p>Backreferences can appear before their corresponding groups:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">1(abc)&#39;</span><span class="op">)</span>  <span class="co">-- Valid</span></span></code></pre></div>
<p>This is valid in ECMAScript but may fail or behave differently in other engines.</p>
<h4 id="undefined-group-matching">Undefined Group Matching</h4>
<p>Backreferences to groups that haven&#39;t captured anything match the empty string:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(a)?b</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="op">)</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches &quot;ab&quot; (group 1 captured nothing, so \1 matches empty string)</span></span></code></pre></div>
<h4 id="no-octal-escapes">No Octal Escapes</h4>
<p>The ECMAScript specification does not define octal escape sequences like <code>\ooo</code> or <code>\0ooo</code> (except <code>\0</code> for NULL):</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">0&#39;</span><span class="op">)</span>     <span class="co">-- Matches NULL (U+0000)</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid (not defined by ECMAScript)</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">101&#39;</span><span class="op">)</span>   <span class="co">-- Error: invalid escape</span></span></code></pre></div>
<p>Use hexadecimal or Unicode escapes instead:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">x41&#39;</span><span class="op">)</span>    <span class="co">-- &#39;A&#39; in hexadecimal</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">u0041&#39;</span><span class="op">)</span>  <span class="co">-- &#39;A&#39; in Unicode</span></span></code></pre></div>
<h3 id="substituting-advanced-features">Substituting Advanced Features</h3>
<p>Some operations not directly supported can be achieved through alternative patterns:</p>
<p><strong>Intersection (Alternative Method)</strong>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Direct: [\p{sc=Latin}&amp;&amp;\p{Ll}]</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Alternative: using lookahead</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>?<span class="op">=</span>\\p<span class="op">{</span><span class="va">sc</span><span class="op">=</span><span class="va">Latin</span><span class="op">})</span>\\p<span class="op">{</span><span class="va">Ll</span><span class="op">}</span></span></code></pre></div>
<p><strong>Subtraction (Alternative Method)</strong>:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Direct: [\p{sc=Latin}--\p{Ll}]</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Alternative: using negative lookahead</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="op">(</span>?!\\p<span class="op">{</span><span class="va">Ll</span><span class="op">})</span>\\p<span class="op">{</span><span class="va">sc</span><span class="op">=</span><span class="va">Latin</span><span class="op">}</span></span></code></pre></div>
<p><strong>Atomic Groups</strong>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Perl/PCRE: (?&gt;pattern)</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- ECMAScript equivalent: (?=(pattern))\1</span></span></code></pre></div>
<hr>
<h2 id="performance-considerations">Performance Considerations</h2>
<h3 id="compile-once-use-many-times">Compile Once, Use Many Times</h3>
<p>Regex patterns should be compiled once and reused:</p>
<p><strong>Inefficient</strong>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="va">i</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">10000</span> <span class="cf">do</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span>  <span class="co">-- Compiles pattern 10,000 times</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>   <span class="va">pattern</span><span class="op">.</span>test<span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">i</span><span class="op">])</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<p><strong>Efficient</strong>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span>  <span class="co">-- Compiles pattern once</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="va">i</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">10000</span> <span class="cf">do</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>   <span class="va">pattern</span><span class="op">.</span>test<span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="va">i</span><span class="op">])</span>  <span class="co">-- Reuses compiled pattern</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<h3 id="store-patterns-in-variables">Store Patterns in Variables</h3>
<p>Store frequently used patterns in variables (local or global) rather than recreating them:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Compiled patterns</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">emailPattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">w._%+-]+@[</span><span class="sc">\\</span><span class="st">w.-]+</span><span class="sc">\\</span><span class="st">.[A-Za-z]{2,}&#39;</span><span class="op">)</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">phonePattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{3}-</span><span class="sc">\\</span><span class="st">d{3}-</span><span class="sc">\\</span><span class="st">d{4}&#39;</span><span class="op">)</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">datePattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{4}-</span><span class="sc">\\</span><span class="st">d{2}-</span><span class="sc">\\</span><span class="st">d{2}&#39;</span><span class="op">)</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use patterns multiple times efficiently</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="cn">_</span><span class="op">,</span> <span class="va">contact</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">contacts</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> <span class="va">emailPattern</span><span class="op">.</span>test<span class="op">(</span><span class="va">contact</span><span class="op">.</span><span class="va">email</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>      processEmail<span class="op">(</span><span class="va">contact</span><span class="op">)</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>   <span class="cf">end</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> <span class="va">phonePattern</span><span class="op">.</span>test<span class="op">(</span><span class="va">contact</span><span class="op">.</span><span class="va">phone</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>      processPhone<span class="op">(</span><span class="va">contact</span><span class="op">)</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>   <span class="cf">end</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<h3 id="greedy-vs-non-greedy-quantifiers">Greedy vs Non-Greedy Quantifiers</h3>
<p>Non-greedy quantifiers can improve performance in some cases:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Greedy: tries to match as much as possible, then backtracks</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&lt;.*&gt;&#39;</span><span class="op">)</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;&lt;tag&gt;content&lt;/tag&gt;&quot; as one match (backtracks from end)</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Non-greedy: stops at first opportunity</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&lt;.*?&gt;&#39;</span><span class="op">)</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;&lt;tag&gt;&quot; and &quot;&lt;/tag&gt;&quot; separately (no backtracking)</span></span></code></pre></div>
<p>For HTML/XML parsing, non-greedy is typically faster:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Extract tag content efficiently</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&lt;([^&gt;]+)&gt;(.*?)&lt;/</span><span class="sc">\\</span><span class="st">1&gt;&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="avoid-catastrophic-backtracking">Avoid Catastrophic Backtracking</h3>
<p>Certain patterns can cause exponential time complexity:</p>
<p><strong>Dangerous Pattern</strong>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Exponential backtracking on non-match</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(a+)+b&#39;</span><span class="op">)</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">text</span> <span class="op">=</span> <span class="st">&#39;aaaaaaaaaaaaaaaaaac&#39;</span>  <span class="co">-- No &#39;b&#39; at end</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- This takes exponential time as pattern length increases</span></span></code></pre></div>
<p><strong>Solutions</strong>:</p>
<ol type="1">
<li><p><strong>Use possessive-like behaviour</strong>:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Prevent backtracking with atomic group simulation</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?=(a+))</span><span class="sc">\\</span><span class="st">1+b&#39;</span><span class="op">)</span></span></code></pre></div></li>
<li><p><strong>Use negated character classes</strong>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Clearer intent, better performance</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[^b]+b&#39;</span><span class="op">)</span></span></code></pre></div></li>
<li><p><strong>Be specific about what you&#39;re matching</strong>:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Instead of: .*</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use: [^&lt;]+ (if not matching &#39;&lt;&#39;)</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use: \\w+ (if matching word characters)</span></span></code></pre></div></li>
</ol>
<h3 id="character-class-optimisations">Character Class Optimisations</h3>
<p><strong>Use predefined classes</strong> when possible:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Faster</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Slower (equivalent but not optimised)</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[0-9]+&#39;</span><span class="op">)</span></span></code></pre></div>
<p><strong>Simplify complex classes</strong>:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Complex</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A-Za-z0-9_]+&#39;</span><span class="op">)</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Simpler and equivalent</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">w+&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="anchoring-patterns">Anchoring Patterns</h3>
<p>Anchor patterns to reduce search space:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Unanchored: searches entire string</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Anchored: only checks from beginning</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Anchored both ends: exact match only</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^</span><span class="sc">\\</span><span class="st">d+$&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="unicode-property-matching">Unicode Property Matching</h3>
<p>Unicode properties are optimised internally, but broad categories are faster than specific scripts:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Faster: general category</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{L}+&#39;</span><span class="op">)</span>  <span class="co">-- All letters</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Slower: specific script</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">p{sc=Latin}+&#39;</span><span class="op">)</span>  <span class="co">-- Latin letters only</span></span></code></pre></div>
<h3 id="best-practices-summary">Best Practices Summary</h3>
<ol type="1">
<li><strong>Compile patterns once</strong>, reuse many times</li>
<li><strong>Store patterns</strong> in variables</li>
<li><strong>Use non-greedy quantifiers</strong> when appropriate</li>
<li><strong>Anchor patterns</strong> when possible (<code>^</code>, <code>$</code>)</li>
<li><strong>Avoid nested quantifiers</strong> that can cause exponential backtracking</li>
<li><strong>Use predefined character classes</strong> (<code>\d</code>, <code>\w</code>, <code>\s</code>)</li>
<li><strong>Be specific</strong> in patterns to reduce backtracking</li>
<li><strong>Test performance</strong> with realistic data</li>
</ol>
<hr>
<h2 id="common-patterns-and-examples">Common Patterns and Examples</h2>
<p>This section provides practical regex patterns for common use cases.</p>
<h3 id="email-validation">Email Validation</h3>
<p><strong>Basic email pattern</strong>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">w._%+-]+@[</span><span class="sc">\\</span><span class="st">w.-]+</span><span class="sc">\\</span><span class="st">.[A-Za-z]{2,}&#39;</span><span class="op">)</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: user@example.com, first.last@sub.domain.co.uk</span></span></code></pre></div>
<p><strong>Explanation</strong>:</p>
<ul>
<li><code>[\w._%+-]+</code> - Username: word characters, dots, underscores, percent, plus, hyphen</li>
<li><code>@</code> - Literal @ symbol</li>
<li><code>[\w.-]+</code> - Domain name: word characters, dots, hyphens</li>
<li><code>\.</code> - Literal dot</li>
<li><code>[A-Za-z]{2,}</code> - Top-level domain: 2 or more letters</li>
</ul>
<p><strong>More strict pattern</strong>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+</span><span class="sc">\\</span><span class="st">.[a-zA-Z]{2,}$&#39;</span><span class="op">)</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Anchored to match entire string</span></span></code></pre></div>
<h3 id="url-matching">URL Matching</h3>
<p><strong>Basic URL pattern</strong>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(https?)://([^/</span><span class="sc">\\</span><span class="st">s]+)([^</span><span class="sc">\\</span><span class="st">s]*)&#39;</span><span class="op">)</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Captures: protocol, domain, path</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;https://example.com/path?query=value&#39;</span><span class="op">)</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[1] = &quot;https://example.com/path?query=value&quot; (full match)</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[2] = &quot;https&quot; (protocol)</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[3] = &quot;example.com&quot; (domain)</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="co">-- match[4] = &quot;/path?query=value&quot; (path)</span></span></code></pre></div>
<p><strong>With named captures</strong>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;protocol&gt;https?)://(?&lt;domain&gt;[^/</span><span class="sc">\\</span><span class="st">s]+)(?&lt;path&gt;[^</span><span class="sc">\\</span><span class="st">s]*)&#39;</span><span class="op">)</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">match</span> <span class="op">=</span> <span class="va">pattern</span><span class="op">.</span>match<span class="op">(</span><span class="st">&#39;https://example.com/path&#39;</span><span class="op">)</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Access by name: match.domain (language binding dependent)</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Access by number: match[3]</span></span></code></pre></div>
<h3 id="phone-numbers">Phone Numbers</h3>
<p><strong>US phone number</strong>:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Format: 555-123-4567</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{3}-</span><span class="sc">\\</span><span class="st">d{3}-</span><span class="sc">\\</span><span class="st">d{4}&#39;</span><span class="op">)</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- With optional country code: +1-555-123-4567</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(</span><span class="sc">\\</span><span class="st">+1-)?</span><span class="sc">\\</span><span class="st">d{3}-</span><span class="sc">\\</span><span class="st">d{3}-</span><span class="sc">\\</span><span class="st">d{4}&#39;</span><span class="op">)</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- With optional separators (-, ., space, or none)</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{3}[-. ]?</span><span class="sc">\\</span><span class="st">d{3}[-. ]?</span><span class="sc">\\</span><span class="st">d{4}&#39;</span><span class="op">)</span></span></code></pre></div>
<p><strong>International E.164 format</strong>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- +1234567890 to +123456789012345</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">d{1,15}&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="date-matching">Date Matching</h3>
<p><strong>ISO 8601 date (YYYY-MM-DD)</strong>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{4}-</span><span class="sc">\\</span><span class="st">d{2}-</span><span class="sc">\\</span><span class="st">d{2}&#39;</span><span class="op">)</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 2025-10-14</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- With validation (basic):</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]</span><span class="sc">\\</span><span class="st">d|3[01])&#39;</span><span class="op">)</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Validates month (01-12) and day (01-31)</span></span></code></pre></div>
<p><strong>US date format (MM/DD/YYYY)</strong>:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(0[1-9]|1[0-2])/(0[1-9]|[12]</span><span class="sc">\\</span><span class="st">d|3[01])/</span><span class="sc">\\</span><span class="st">d{4}&#39;</span><span class="op">)</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 10/14/2025</span></span></code></pre></div>
<p><strong>Flexible date format</strong>:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d{1,2}[-/]</span><span class="sc">\\</span><span class="st">d{1,2}[-/]</span><span class="sc">\\</span><span class="st">d{2,4}&#39;</span><span class="op">)</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 10/14/2025, 10-14-25, 1/5/2025</span></span></code></pre></div>
<h3 id="time-matching">Time Matching</h3>
<p><strong>24-hour time (HH:MM)</strong>:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;([01]?</span><span class="sc">\\</span><span class="st">d|2[0-3]):[0-5]</span><span class="sc">\\</span><span class="st">d&#39;</span><span class="op">)</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 09:30, 23:59, 8:05</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- With optional seconds:</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;([01]?</span><span class="sc">\\</span><span class="st">d|2[0-3]):[0-5]</span><span class="sc">\\</span><span class="st">d(:[0-5]</span><span class="sc">\\</span><span class="st">d)?&#39;</span><span class="op">)</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 09:30, 09:30:45</span></span></code></pre></div>
<p><strong>12-hour time with AM/PM</strong>:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(0?[1-9]|1[0-2]):[0-5]</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">s*([AaPp][Mm])&#39;</span><span class="op">)</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 9:30 AM, 12:45 PM, 9:30AM</span></span></code></pre></div>
<h3 id="password-validation">Password Validation</h3>
<p><strong>Minimum requirements</strong> (8+ chars, 1 uppercase, 1 lowercase, 1 digit):</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^(?=.*[a-z])(?=.*[A-Z])(?=.*</span><span class="sc">\\</span><span class="st">d).{8,}$&#39;</span><span class="op">)</span></span></code></pre></div>
<p><strong>Explanation</strong>:</p>
<ul>
<li><code>^</code> - Start of string</li>
<li><code>(?=.*[a-z])</code> - Lookahead: at least one lowercase</li>
<li><code>(?=.*[A-Z])</code> - Lookahead: at least one uppercase</li>
<li><code>(?=.*\d)</code> - Lookahead: at least one digit</li>
<li><code>.{8,}</code> - At least 8 characters</li>
<li><code>$</code> - End of string</li>
</ul>
<p><strong>With special character requirement</strong>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^(?=.*[a-z])(?=.*[A-Z])(?=.*</span><span class="sc">\\</span><span class="st">d)(?=.*[@$!%*?&amp;]).{8,}$&#39;</span><span class="op">)</span></span></code></pre></div>
<h3 id="ip-address-matching">IP Address Matching</h3>
<p><strong>IPv4 address</strong>:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">b(?:</span><span class="sc">\\</span><span class="st">d{1,3}</span><span class="sc">\\</span><span class="st">.){3}</span><span class="sc">\\</span><span class="st">d{1,3}</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">)</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 192.168.1.1, 10.0.0.1</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- With validation (0-255 per octet):</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">b(?:(?:25[0-5]|2[0-4]</span><span class="sc">\\</span><span class="st">d|[01]?</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d?)</span><span class="sc">\\</span><span class="st">.){3}(?:25[0-5]|2[0-4]</span><span class="sc">\\</span><span class="st">d|[01]?</span><span class="sc">\\</span><span class="st">d</span><span class="sc">\\</span><span class="st">d?)</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">)</span></span></code></pre></div>
<p><strong>IPv6 address (simplified)</strong>:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}&#39;</span><span class="op">)</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches full IPv6: 2001:0db8:85a3:0000:0000:8a2e:0370:7334</span></span></code></pre></div>
<h3 id="htmlxml-tag-matching">HTML/XML Tag Matching</h3>
<p><strong>Match opening and closing tags</strong>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&lt;([a-zA-Z][a-zA-Z0-9]*)</span><span class="sc">\\</span><span class="st">b[^&gt;]*&gt;(.*?)&lt;/</span><span class="sc">\\</span><span class="st">1&gt;&#39;</span><span class="op">)</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &lt;div&gt;content&lt;/div&gt;, &lt;span class=&quot;x&quot;&gt;text&lt;/span&gt;</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Captures: tag name (group 1), content (group 2)</span></span></code></pre></div>
<p><strong>Extract tag content</strong>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&lt;[^&gt;]+&gt;(.*?)&lt;/[^&gt;]+&gt;&#39;</span><span class="op">)</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Captures content between any tags</span></span></code></pre></div>
<p><strong>Match self-closing tags</strong>:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;&lt;[a-zA-Z][a-zA-Z0-9]*</span><span class="sc">\\</span><span class="st">b[^&gt;]*/&gt;&#39;</span><span class="op">)</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &lt;br/&gt;, &lt;img src=&quot;x&quot; /&gt;</span></span></code></pre></div>
<h3 id="csv-parsing">CSV Parsing</h3>
<p><strong>Basic CSV field</strong>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;([^,]+),?&#39;</span><span class="op">)</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches fields separated by commas</span></span></code></pre></div>
<p><strong>CSV with quoted fields</strong>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?:^|,)(?:</span><span class="sc">\&quot;</span><span class="st">([^</span><span class="sc">\&quot;</span><span class="st">]*(?:</span><span class="sc">\&quot;\&quot;</span><span class="st">[^</span><span class="sc">\&quot;</span><span class="st">]*)*)</span><span class="sc">\&quot;</span><span class="st">|([^,]*))&#39;</span><span class="op">)</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Handles: &quot;quoted field&quot;, unquoted, &quot;field with &quot;&quot;quotes&quot;&quot;&quot;</span></span></code></pre></div>
<h3 id="word-extraction">Word Extraction</h3>
<p><strong>Extract words</strong>:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">b</span><span class="sc">\\</span><span class="st">w+</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">)</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: any word (alphanumeric + underscore)</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">b[A-Za-z]+</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">)</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: only alphabetic words</span></span></code></pre></div>
<p><strong>Extract words with apostrophes</strong>:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">b[A-Za-z]+(?:</span><span class="sc">\&#39;</span><span class="st">[A-Za-z]+)?</span><span class="sc">\\</span><span class="st">b&#39;</span><span class="op">)</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: don&#39;t, it&#39;s, can&#39;t, etc.</span></span></code></pre></div>
<h3 id="number-extraction">Number Extraction</h3>
<p><strong>Integer</strong>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;-?</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 123, -456</span></span></code></pre></div>
<p><strong>Floating point</strong>:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;-?</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+&#39;</span><span class="op">)</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 123.45, -67.89</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- With optional decimal part:</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;-?</span><span class="sc">\\</span><span class="st">d+(?:</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+)?&#39;</span><span class="op">)</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 123, 123.45, -67.89</span></span></code></pre></div>
<p><strong>Scientific notation</strong>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;-?</span><span class="sc">\\</span><span class="st">d+(?:</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+)?(?:[eE][+-]?</span><span class="sc">\\</span><span class="st">d+)?&#39;</span><span class="op">)</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 1.23e10, -4.5E-6, 123</span></span></code></pre></div>
<h3 id="whitespace-handling">Whitespace Handling</h3>
<p><strong>Trim leading/trailing whitespace</strong>:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^</span><span class="sc">\\</span><span class="st">s+|</span><span class="sc">\\</span><span class="st">s+$&#39;</span><span class="op">)</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use with replace to remove leading/trailing spaces</span></span></code></pre></div>
<p><strong>Collapse multiple spaces</strong>:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">s+&#39;</span><span class="op">)</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Replace with single space to normalize whitespace</span></span></code></pre></div>
<p><strong>Split on whitespace</strong>:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">s+&#39;</span><span class="op">)</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Use with split to separate words</span></span></code></pre></div>
<h3 id="file-path-matching">File Path Matching</h3>
<p><strong>Unix/Linux path</strong>:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^(/[^/]+)+/?$&#39;</span><span class="op">)</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: /home/user/file.txt, /usr/local/bin/</span></span></code></pre></div>
<p><strong>Windows path</strong>:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^[A-Za-z]:</span><span class="sc">\\\\</span><span class="st">(?:[^</span><span class="sc">\\\\</span><span class="st">/:*?</span><span class="sc">\&quot;</span><span class="st">&lt;&gt;|]+</span><span class="sc">\\\\</span><span class="st">)*[^</span><span class="sc">\\\\</span><span class="st">/:*?</span><span class="sc">\&quot;</span><span class="st">&lt;&gt;|]*$&#39;</span><span class="op">)</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: C:\Users\Name\file.txt</span></span></code></pre></div>
<p><strong>File extension</strong>:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">.([A-Za-z0-9]+)$&#39;</span><span class="op">)</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Captures file extension: .txt, .pdf, .jpg</span></span></code></pre></div>
<h3 id="version-number-matching">Version Number Matching</h3>
<p><strong>Semantic versioning</strong>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;^(0|[1-9]</span><span class="sc">\\</span><span class="st">d*)</span><span class="sc">\\</span><span class="st">.(0|[1-9]</span><span class="sc">\\</span><span class="st">d*)</span><span class="sc">\\</span><span class="st">.(0|[1-9]</span><span class="sc">\\</span><span class="st">d*)(?:-((?:0|[1-9]</span><span class="sc">\\</span><span class="st">d*|</span><span class="sc">\\</span><span class="st">d*[a-zA-Z-][0-9a-zA-Z-]*)(?:</span><span class="sc">\\</span><span class="st">.(?:0|[1-9]</span><span class="sc">\\</span><span class="st">d*|</span><span class="sc">\\</span><span class="st">d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:</span><span class="sc">\\</span><span class="st">+([0-9a-zA-Z-]+(?:</span><span class="sc">\\</span><span class="st">.[0-9a-zA-Z-]+)*))?$&#39;</span><span class="op">)</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 1.0.0, 2.1.3, 1.0.0-alpha.1, 1.0.0+build.123</span></span></code></pre></div>
<p><strong>Simple version</strong>:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">d+</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+(?:</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+)?&#39;</span><span class="op">)</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: 1.0, 1.0.5, 2.10.1</span></span></code></pre></div>
<hr>
<h2 id="error-handling">Error Handling</h2>
<p>When pattern compilation or matching fails, specific error types indicate the nature of the problem. Understanding these errors helps diagnose and fix pattern issues.</p>
<h3 id="compilation-errors">Compilation Errors</h3>
<p>These errors occur when compiling a regex pattern:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Error</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>error_escape</code></td>
<td style="text-align: left;">Invalid escape sequence</td>
<td style="text-align: left;"><code>\q</code> (undefined escape), <code>\c</code> (not followed by letter), <code>\x</code> (not followed by two hex digits), <code>\u{GGGG}</code> (invalid hex)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_brack</code></td>
<td style="text-align: left;">Mismatched square brackets</td>
<td style="text-align: left;"><code>[abc</code>, <code>abc]</code>, <code>[a[b]</code> (nested)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_paren</code></td>
<td style="text-align: left;">Mismatched parentheses</td>
<td style="text-align: left;"><code>(abc</code>, <code>abc)</code>, <code>((a)</code> (unclosed)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_brace</code></td>
<td style="text-align: left;">Mismatched curly braces</td>
<td style="text-align: left;"><code>a{3</code>, <code>a3}</code>, <code>a{2,}</code> (missing closing brace)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_badbrace</code></td>
<td style="text-align: left;">Invalid quantifier range</td>
<td style="text-align: left;"><code>{3,2}</code> (n &gt; m), <code>{-1}</code> (negative), <code>{,5}</code> (missing n)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_range</code></td>
<td style="text-align: left;">Invalid character range in class</td>
<td style="text-align: left;"><code>[z-a]</code> (reversed), <code>[\u0100-\u0010]</code> (start &gt; end)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_backref</code></td>
<td style="text-align: left;">Invalid backreference</td>
<td style="text-align: left;"><code>\9</code> (group doesn&#39;t exist), <code>\k&lt;name&gt;</code> (name doesn&#39;t exist)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_modifier</code></td>
<td style="text-align: left;">Invalid flag modifier</td>
<td style="text-align: left;"><code>(?ii:...)</code> (duplicate flag), <code>(?i-i:...)</code> (contradictory)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_operator</code></td>
<td style="text-align: left;">Invalid set operator usage</td>
<td style="text-align: left;"><code>[AB--CD]</code> (mixed operators at same level), <code>!!</code> (reserved double punctuator in class)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_noescape</code></td>
<td style="text-align: left;">Character must be escaped</td>
<td style="text-align: left;"><code>[(]</code> (should be <code>[\(]</code>), <code>[{]</code> (should be <code>[\{]</code>) in character classes</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_complement</code></td>
<td style="text-align: left;">Invalid negation</td>
<td style="text-align: left;"><code>[^\p{RGI_Emoji}]</code> (string property in negated class), <code>\P{RGI_Emoji}</code> (string property with \P)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_badrepeat</code></td>
<td style="text-align: left;">Quantifier without preceding expression</td>
<td style="text-align: left;"><code>*abc</code> (starts with quantifier), <code>a**</code> (double quantifier)</td>
</tr>
<tr>
<td style="text-align: left;"><code>error_utf8</code></td>
<td style="text-align: left;">Invalid UTF-8 sequence in pattern</td>
<td style="text-align: left;">Pattern contains invalid UTF-8 bytes, overlong encoding, or code point &gt; U+10FFFF</td>
</tr>
</tbody>
</table>
<h3 id="error-examples">Error Examples</h3>
<h4 id="error_escape">error_escape</h4>
<div class="sourceCode" id="cb116"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: \q is not defined</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">q&#39;</span><span class="op">)</span>  <span class="co">-- Error: invalid escape sequence</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: \c not followed by letter</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">c5&#39;</span><span class="op">)</span>  <span class="co">-- Error: expected A-Z or a-z after \c</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: \x not followed by two hex digits</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">xGG&#39;</span><span class="op">)</span>  <span class="co">-- Error: expected two hex digits</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: code point exceeds maximum</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">u{110000}&#39;</span><span class="op">)</span>  <span class="co">-- Error: code point &gt; U+10FFFF</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid alternatives:</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;q&#39;</span><span class="op">)</span>           <span class="co">-- Literal q</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">x71&#39;</span><span class="op">)</span>       <span class="co">-- Hex escape for q</span></span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">u0071&#39;</span><span class="op">)</span>     <span class="co">-- Unicode escape for q</span></span></code></pre></div>
<h4 id="error_brack">error_brack</h4>
<div class="sourceCode" id="cb117"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: unclosed bracket</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[abc&#39;</span><span class="op">)</span>  <span class="co">-- Error: missing ]</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: extra closing bracket</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;abc]&#39;</span><span class="op">)</span>  <span class="co">-- Error: unmatched ]</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[abc]&#39;</span><span class="op">)</span>       <span class="co">-- Correct bracket pair</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">]&#39;</span><span class="op">)</span>         <span class="co">-- Escaped bracket (literal)</span></span></code></pre></div>
<h4 id="error_paren">error_paren</h4>
<div class="sourceCode" id="cb118"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: unclosed parenthesis</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(abc&#39;</span><span class="op">)</span>  <span class="co">-- Error: missing )</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: extra closing parenthesis</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;abc)&#39;</span><span class="op">)</span>  <span class="co">-- Error: unmatched )</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(abc)&#39;</span><span class="op">)</span>       <span class="co">-- Correct parenthesis pair</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">(abc</span><span class="sc">\\</span><span class="st">)&#39;</span><span class="op">)</span>   <span class="co">-- Escaped parentheses (literals)</span></span></code></pre></div>
<h4 id="error_brace">error_brace</h4>
<div class="sourceCode" id="cb119"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: unclosed brace</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{3&#39;</span><span class="op">)</span>  <span class="co">-- Error: missing }</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{3}&#39;</span><span class="op">)</span>        <span class="co">-- Correct quantifier</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">{3</span><span class="sc">\\</span><span class="st">}&#39;</span><span class="op">)</span>     <span class="co">-- Escaped braces (literals)</span></span></code></pre></div>
<h4 id="error_badbrace">error_badbrace</h4>
<div class="sourceCode" id="cb120"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: n &gt; m in range</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{5,3}&#39;</span><span class="op">)</span>  <span class="co">-- Error: 5 &gt; 3</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: missing n</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{,5}&#39;</span><span class="op">)</span>  <span class="co">-- Error: must specify n</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{3,5}&#39;</span><span class="op">)</span>      <span class="co">-- n ≤ m</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{3,}&#39;</span><span class="op">)</span>       <span class="co">-- n or more (no maximum)</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a{3}&#39;</span><span class="op">)</span>        <span class="co">-- exactly n</span></span></code></pre></div>
<h4 id="error_range">error_range</h4>
<div class="sourceCode" id="cb121"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: reversed range</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[z-a]&#39;</span><span class="op">)</span>  <span class="co">-- Error: z (U+007A) &gt; a (U+0061)</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: empty range</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">u0100-</span><span class="sc">\\</span><span class="st">u0010]&#39;</span><span class="op">)</span>  <span class="co">-- Error: start &gt; end</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-z]&#39;</span><span class="op">)</span>       <span class="co">-- Correct range</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[z]&#39;</span><span class="op">)</span>         <span class="co">-- Single character (no range)</span></span></code></pre></div>
<h4 id="error_backref">error_backref</h4>
<div class="sourceCode" id="cb122"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: group doesn&#39;t exist</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">5&#39;</span><span class="op">)</span>  <span class="co">-- Error: no group 5</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: named group doesn&#39;t exist</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">k&lt;missing&gt;&#39;</span><span class="op">)</span>  <span class="co">-- Error: no group named &#39;missing&#39;</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(a)</span><span class="sc">\\</span><span class="st">1&#39;</span><span class="op">)</span>            <span class="co">-- Backreference to group 1</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?&lt;x&gt;a)</span><span class="sc">\\</span><span class="st">k&lt;x&gt;&#39;</span><span class="op">)</span>    <span class="co">-- Named backreference</span></span></code></pre></div>
<h4 id="error_modifier">error_modifier</h4>
<div class="sourceCode" id="cb123"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: duplicate flag</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?ii:abc)&#39;</span><span class="op">)</span>  <span class="co">-- Error: &#39;i&#39; appears twice</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: contradictory flags</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?i-i:abc)&#39;</span><span class="op">)</span>  <span class="co">-- Error: both +i and -i</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?i:abc)&#39;</span><span class="op">)</span>          <span class="co">-- Single flag</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?im:abc)&#39;</span><span class="op">)</span>         <span class="co">-- Multiple different flags</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(?i-m:abc)&#39;</span><span class="op">)</span>        <span class="co">-- Enable and disable flags</span></span></code></pre></div>
<h4 id="error_operator">error_operator</h4>
<div class="sourceCode" id="cb124"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: mixed operators at same level</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[AB--CD]&#39;</span><span class="op">)</span>  <span class="co">-- Error: union (AB) then subtraction</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: reserved double punctuator</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-z!!]&#39;</span><span class="op">)</span>  <span class="co">-- Error: !! is reserved</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[[AB]--[CD]]&#39;</span><span class="op">)</span>      <span class="co">-- Nested classes</span></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[A[B--C]D]&#39;</span><span class="op">)</span>        <span class="co">-- Operator in nested level</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[a-z</span><span class="sc">\\</span><span class="st">!</span><span class="sc">\\</span><span class="st">!]&#39;</span><span class="op">)</span>       <span class="co">-- Escaped (two separate !)</span></span></code></pre></div>
<h4 id="error_noescape">error_noescape</h4>
<div class="sourceCode" id="cb125"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: ( must be escaped in character class</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[(]&#39;</span><span class="op">)</span>  <span class="co">-- Error: must escape (</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: { must be escaped</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[{]&#39;</span><span class="op">)</span>  <span class="co">-- Error: must escape {</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">(]&#39;</span><span class="op">)</span>             <span class="co">-- Escaped (</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">{</span><span class="sc">\\</span><span class="st">}]&#39;</span><span class="op">)</span>          <span class="co">-- Escaped braces</span></span></code></pre></div>
<h4 id="error_complement">error_complement</h4>
<div class="sourceCode" id="cb126"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: string property in negated class</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[^</span><span class="sc">\\</span><span class="st">p{RGI_Emoji}]&#39;</span><span class="op">)</span>  <span class="co">-- Error: cannot negate string property</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: string property with \P</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">P{RGI_Emoji}&#39;</span><span class="op">)</span>     <span class="co">-- Error: \P doesn&#39;t support string properties</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[</span><span class="sc">\\</span><span class="st">p{RGI_Emoji}]&#39;</span><span class="op">)</span>      <span class="co">-- String property in positive class</span></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">P{Emoji}&#39;</span><span class="op">)</span>             <span class="co">-- Character property (not string)</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[^</span><span class="sc">\\</span><span class="st">p{Emoji}]&#39;</span><span class="op">)</span>          <span class="co">-- Character property negated</span></span></code></pre></div>
<h4 id="error_badrepeat">error_badrepeat</h4>
<div class="sourceCode" id="cb127"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: quantifier at start</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;*abc&#39;</span><span class="op">)</span>  <span class="co">-- Error: nothing to repeat</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: double quantifier</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a**&#39;</span><span class="op">)</span>   <span class="co">-- Error: quantifier on quantifier</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a*bc&#39;</span><span class="op">)</span>              <span class="co">-- Quantifier after character</span></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">*abc&#39;</span><span class="op">)</span>            <span class="co">-- Escaped * (literal)</span></span></code></pre></div>
<h4 id="error_utf8">error_utf8</h4>
<div class="sourceCode" id="cb128"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid UTF-8 in pattern</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- (This typically occurs when pattern strings contain invalid byte sequences)</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Invalid: overlong encoding</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">xC0</span><span class="sc">\\</span><span class="st">xB0&#39;</span><span class="op">)</span>  <span class="co">-- Error: overlong form of U+0030</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Valid:</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">x30&#39;</span><span class="op">)</span>             <span class="co">-- Shortest form</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;</span><span class="sc">\\</span><span class="st">u0030&#39;</span><span class="op">)</span>           <span class="co">-- Unicode escape</span></span></code></pre></div>
<h3 id="handling-errors-in-code">Handling Errors in Code</h3>
<p><strong>Fluid</strong>:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Using catch for error handling</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">err</span><span class="op">,</span> <span class="va">pattern</span> <span class="op">=</span> catch<span class="op">(</span><span class="kw">function</span><span class="op">()</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[invalid&#39;</span><span class="op">)</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span><span class="op">)</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">err</span> <span class="cf">then</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>   <span class="fu">print</span><span class="op">(</span><span class="st">&#39;Pattern compilation failed: &#39;</span> <span class="op">..</span> <span class="va">err</span><span class="op">.</span><span class="va">message</span><span class="op">)</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">print</span><span class="op">(</span><span class="st">&#39;Error line: &#39;</span> <span class="op">..</span> <span class="op">(</span><span class="va">err</span><span class="op">.</span><span class="va">line</span> <span class="kw">or</span> <span class="st">&#39;unknown&#39;</span><span class="op">))</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a>   <span class="co">-- Use pattern</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
<p><strong>C++</strong>:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span> <span class="op">{</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">auto</span> pattern <span class="op">=</span> pf<span class="op">::</span>regex<span class="op">(</span><span class="st">&quot;[invalid&quot;</span><span class="op">);</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">catch</span> <span class="op">(</span><span class="at">const</span> <span class="bu">std::</span>exception<span class="op">&amp;</span> e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>   <span class="bu">std::</span>cerr <span class="op">&lt;&lt;</span> <span class="st">&quot;Pattern compilation failed: &quot;</span> <span class="op">&lt;&lt;</span> e<span class="op">.</span>what<span class="op">()</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="debugging-tips">Debugging Tips</h3>
<ol type="1">
<li><p><strong>Test patterns incrementally</strong>: Build complex patterns step by step, testing each addition</p></li>
<li><p><strong>Use online regex testers</strong>: Many tools visualise patterns and highlight errors (ensure they support ECMAScript syntax)</p></li>
<li><p><strong>Check bracket matching</strong>: Count opening and closing brackets/parentheses/braces</p></li>
<li><p><strong>Validate escape sequences</strong>: Ensure all <code>\</code> sequences are valid</p></li>
<li><p><strong>Review operator precedence</strong>: Verify set operations are properly nested</p></li>
<li><p><strong>Examine Unicode sequences</strong>: Confirm <code>\u{...}</code> values are valid code points</p></li>
<li><p><strong>Test with edge cases</strong>: Try empty strings, very long strings, and strings with special characters</p></li>
</ol>
<h3 id="common-mistakes">Common Mistakes</h3>
<p><strong>Forgetting to escape special characters</strong>:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Wrong: . matches any character</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;file.txt&#39;</span><span class="op">)</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;file.txt&quot;, &quot;file?txt&quot;, &quot;fileXtxt&quot;</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Correct: \. matches literal dot</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;file</span><span class="sc">\\</span><span class="st">.txt&#39;</span><span class="op">)</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Matches: &quot;file.txt&quot; only</span></span></code></pre></div>
<p><strong>Incorrect bracket nesting</strong>:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Wrong: brackets don&#39;t nest this way</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[[a-z]&#39;</span><span class="op">)</span>  <span class="co">-- Error</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Correct: nest with operators</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;[[a-m][n-z]]&#39;</span><span class="op">)</span>  <span class="co">-- Union of two ranges</span></span></code></pre></div>
<p><strong>Quantifier on quantifier</strong>:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Wrong: double quantifier</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;a*+&#39;</span><span class="op">)</span>  <span class="co">-- Error</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Correct: quantify group</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">pattern</span> <span class="op">=</span> <span class="va">regex</span><span class="op">.</span>new<span class="op">(</span><span class="st">&#39;(a*)+&#39;</span><span class="op">)</span></span></code></pre></div>
<hr>
<h2 id="summary">Summary</h2>
<p>This manual has covered the complete regular expression syntax and features supported by the Parasol Framework:</p>
<ul>
<li><strong>Character matching</strong> including Unicode escapes and special characters</li>
<li><strong>Character classes</strong> with ranges, predefined classes, and set operations</li>
<li><strong>Quantifiers</strong> for controlling repetition (greedy and non-greedy)</li>
<li><strong>Groups and backreferences</strong> for capturing and reusing matched text</li>
<li><strong>Assertions</strong> for zero-width matching conditions</li>
<li><strong>Unicode support</strong> with full UTF-8 and property matching</li>
<li><strong>Flags</strong> for controlling compilation and matching behaviour</li>
<li><strong>Performance considerations</strong> for efficient pattern usage</li>
<li><strong>Common patterns</strong> for practical applications</li>
<li><strong>Error handling</strong> for debugging pattern issues</li>
</ul>
<p>For API documentation on the Regex class and its methods, please refer to the Regex module documentation in the Parasol API reference.</p>
<hr>
<p><em>This manual documents the regex implementation as of 2025. For updates and the latest specification, refer to the <a href="https://tc39.es/ecma262/multipage/text-processing.html#sec-regexp-regular-expression-objects">ECMAScript Specification</a>.</em></p>
</div></div></div></div>

<script src="../js/bootstrap.bundle.min.js"></script>
<script src="../js/base.js"></script>
<script>

   // Auto-open the relevant sidebar branch

   var url = window.location.pathname;
   var filename = url.substring(url.lastIndexOf('/')+1);
   var el = document.querySelector('li[class="api-ref"] > a[href="' + filename + '"]');
   if (el) {
      var parent = getParentNode(el, '[class="collapse"]');
      if (parent) new bootstrap.Collapse(parent, { show: true }); // Causes animation

      el.style.backgroundColor = '#d2f4ea';
   }

   cancelAnimations();
    </script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-8254DG7MT6"> </script><script>
	   window.dataLayer = window.dataLayer || [];
	   function gtag(){dataLayer.push(arguments);}
	   gtag('js', new Date());
      gtag('config', 'G-8254DG7MT6');</script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Parasol Framework documentation, machine generated from source">
<meta name="author" content="Paul Manias">
<link rel="icon" href="/favicon.ico">
<title>Parasol Wiki - Action Reference Manual</title>
<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../css/module-template.css" rel="stylesheet">
<link href="../css/github-markdown.css" rel="stylesheet">
</head>

<body>
<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
  <div class="container-fluid">
    <div class="navbar-header"><a class="navbar-brand" href="../index.html">Parasol Framework</a></div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav"><li class="nav-item">
        <li class="nav-item"><a class="nav-link" href="../gallery.html">Gallery</a></li>
        <li class="nav-item"><a class="nav-link" href="../modules/api.html">API</a></li>
        <li class="nav-item"><a class="nav-link" href="Home.html">Wiki</a></li>
        <li class="nav-item"><a class="nav-link" href="https://github.com/parasol-framework/parasol">GitHub</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="d-sm-block d-none col-3 sidebar" style="max-width: 230px;">
      <div class="flex-shrink-1 pt-2 pe-2 sticky-top overflow-auto vh-100 b-shadow">

<ul class="list-unstyled">
  <li>
    <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#wiki-collapse" aria-expanded="true">Wiki</button>
    <div class="collapse show" id="wiki-collapse">
      <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3">
         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#bp-collapse" aria-expanded="false">Build Process</button>
         <div class="collapse" id="bp-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="Linux-Builds.html">Linux Builds</a></li>
              <li class="api-ref"><a class="rounded" href="Windows-Builds.html">Windows Builds</a></li>
              <li class="api-ref"><a class="rounded" href="Customising-Your-Build.html">Customising Your Build</a></li>
            </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#tm-collapse" aria-expanded="false">Technical Manuals</button>
         <div class="collapse" id="tm-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
             <li class="api-ref"><a class="rounded" href="Parasol-Objects.html">Parasol Objects</a></li>
             <li class="api-ref"><a class="rounded" href="Parasol-In-Depth.html">Parasol In Depth</a></li>
             <li class="api-ref"><a class="rounded" href="Coding-With-AI.html">Coding With AI</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#fg-collapse" aria-expanded="false">Fluid</button>
         <div class="collapse" id="fg-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
            <li class="api-ref"><a class="rounded" href="Fluid-Reference-Manual.html">Fluid Reference Manual</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-Common-API.html">Common API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-FileSearch-API.html">FileSearch API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-GUI-API.html">GUI API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-HTTPServer-API.html">HTTPServer API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-IO-API.html">I/O API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-JSON-API.html">JSON API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-URL-API.html">URL API</a></li>
            <li class="api-ref"><a class="rounded" href="Fluid-VFX-API.html">VFX API</a></li>
            <li class="api-ref"><a class="rounded" href="Widgets.html">Widgets</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#rrm-collapse" aria-expanded="false">RIPL</button>
         <div class="collapse" id="rrm-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="RIPL-Reference-Manual.html">RIPL Reference Manual</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#tools-collapse" aria-expanded="false">Tools</button>
         <div class="collapse" id="tools-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="Parasol-Cmd-Tool.html">Parasol Cmd Tool</a></li>
              <li class="api-ref"><a class="rounded" href="Unit-Testing.html">Flute / Unit Testing</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#doc-collapse" aria-expanded="false">Doc Generation</button>
         <div class="collapse" id="doc-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
              <li class="api-ref"><a class="rounded" href="Embedded-Document-Formatting.html">Embedded Document Format</a></li>
              <li class="api-ref"><a class="rounded" href="FDL-Reference-Manual.html">FDL Reference Manual</a></li>
              <li class="api-ref"><a class="rounded" href="FDL-Tools.html">FDL Tools</a></li>
           </ul>
         </div></li>

         <li><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#app-collapse" aria-expanded="false">Appendix</button>
         <div class="collapse" id="app-collapse">
            <ul class="btn-toggle-nav list-unstyled pb-1">
             <li class="api-ref"><a class="rounded" href="Action-Reference-Manual.html">Action Reference Manual</a></li>
             <li class="api-ref"><a class="rounded" href="System-Error-Codes.html">System Error Codes</a></li>
           </ul>
         </div></li>
      </ul>
    </div>
  </li>
</ul>

<ul class="list-unstyled">
  <li class="border-top my-3"></li>
  <li>
    <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#mod-collapse" aria-expanded="false">Modules</button>
    <div class="collapse" id="mod-collapse">
      <ul class="btn-toggle-nav list-unstyled fw-normal">
      <li class="api-ref"><a href="../modules/audio.html" class="rounded">Audio</a></li>
      <li class="api-ref"><a href="../modules/core.html" class="rounded">Core</a></li>
      <li class="api-ref"><a href="../modules/display.html" class="rounded">Display</a></li>
      <li class="api-ref"><a href="../modules/fluid.html" class="rounded">Fluid</a></li>
      <li class="api-ref"><a href="../modules/font.html" class="rounded">Font</a></li>
      <li class="api-ref"><a href="../modules/network.html" class="rounded">Network</a></li>
      <li class="api-ref"><a href="../modules/vector.html" class="rounded">Vector</a></li>
      </ul>
    </div>
  </li>
</ul>

<ul class="list-unstyled">
  <li class="border-top my-3"></li>
  <li>
    <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#class-collapse" aria-expanded="false">Classes</button>
    <div class="collapse" id="class-collapse">
      <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 ps-3">
        <li>
          <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#audio-collapse" aria-expanded="false">Audio</button>
          <div class="collapse" id="audio-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1">
            <li><a href="../modules/classes/audio.html" class="rounded">Audio</a></li>
            <li><a href="../modules/classes/sound.html" class="rounded">Sound</a></li>
            </ul>
          </div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#core-collapse" aria-expanded="false">Core</button><div class="collapse" id="core-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a href="../modules/classes/file.html" class="rounded">File</a></li>
        <li><a href="../modules/classes/metaclass.html" class="rounded">MetaClass</a></li>
        <li><a href="../modules/classes/module.html" class="rounded">Module</a></li>
        <li><a href="../modules/classes/storagedevice.html" class="rounded">StorageDevice</a></li>
        <li><a href="../modules/classes/task.html" class="rounded">Task</a></li>
        <li><a href="../modules/classes/thread.html" class="rounded">Thread</a></li>
        <li><a href="../modules/classes/time.html" class="rounded">Time</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#data-collapse" aria-expanded="false">Data</button><div class="collapse" id="data-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a href="../modules/classes/compression.html" class="rounded">Compression</a></li>
        <li><a href="../modules/classes/config.html" class="rounded">Config</a></li>
        <li><a href="../modules/classes/script.html" class="rounded">Script</a></li>
        <li><a href="../modules/classes/xml.html" class="rounded">XML</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#devices-collapse" aria-expanded="false">Devices</button><div class="collapse" id="devices-collapse"><ul class="btn-toggle-nav list-unstyled pb-1"><li><a href="../modules/classes/controller.html" class="rounded">Controller</a></li></ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#effects-collapse" aria-expanded="false">Effects</button><div class="collapse" id="effects-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/blurfx.html">BlurFX</a></li>
        <li><a class="rounded" href="../modules/classes/colourfx.html">ColourFX</a></li>
        <li><a class="rounded" href="../modules/classes/compositefx.html">CompositeFX</a></li>
        <li><a class="rounded" href="../modules/classes/convolvefx.html">ConvolveFX</a></li>
        <li><a class="rounded" href="../modules/classes/displacementfx.html">DisplacementFX</a></li>
        <li><a class="rounded" href="../modules/classes/filtereffect.html">FilterEffect</a></li>
        <li><a class="rounded" href="../modules/classes/floodfx.html">FloodFX</a></li>
        <li><a class="rounded" href="../modules/classes/imagefx.html">ImageFX</a></li>
        <li><a class="rounded" href="../modules/classes/lightingfx.html">LightingFX</a></li>
        <li><a class="rounded" href="../modules/classes/mergefx.html">MergeFX</a></li>
        <li><a class="rounded" href="../modules/classes/morphologyfx.html">MorphologyFX</a></li>
        <li><a class="rounded" href="../modules/classes/offsetfx.html">OffsetFX</a></li>
        <li><a class="rounded" href="../modules/classes/remapfx.html">RemapFX</a></li>
        <li><a class="rounded" href="../modules/classes/sourcefx.html">SourceFX</a></li>
        <li><a class="rounded" href="../modules/classes/turbulencefx.html">TurbulenceFX</a></li>
        <li><a class="rounded" href="../modules/classes/wavefunctionfx.html">WaveFunctionFX</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#ext-collapse" aria-expanded="false">Extensions</button><div class="collapse" id="ext-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/scintilla.html">Scintilla</a></li>
        <li><a class="rounded" href="../modules/classes/scintillasearch.html">ScintillaSearch</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#gfx-collapse" aria-expanded="false">Graphics</button><div class="collapse" id="gfx-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/bitmap.html">Bitmap</a></li>
        <li><a class="rounded" href="../modules/classes/clipboard.html">Clipboard</a></li>
        <li><a class="rounded" href="../modules/classes/display.html">Display</a></li>
        <li><a class="rounded" href="../modules/classes/document.html">Document</a></li>
        <li><a class="rounded" href="../modules/classes/font.html">Font</a></li>
        <li><a class="rounded" href="../modules/classes/picture.html">Picture</a></li>
        <li><a class="rounded" href="../modules/classes/pointer.html">Pointer</a></li>
        <li><a class="rounded" href="../modules/classes/surface.html">Surface</a></li>
        <li><a class="rounded" href="../modules/classes/svg.html">SVG</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#net-collapse" aria-expanded="false">Network</button><div class="collapse" id="net-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/clientsocket.html">ClientSocket</a></li>
        <li><a class="rounded" href="../modules/classes/http.html">HTTP</a></li>
        <li><a class="rounded" href="../modules/classes/netsocket.html">NetSocket</a></li>
        <li><a class="rounded" href="../modules/classes/proxy.html">Proxy</a></li>
        </ul></div>
        </li>
        <li>
        <button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle="collapse" data-bs-target="#vectors-collapse" aria-expanded="false">Vectors</button><div class="collapse" id="vectors-collapse"><ul class="btn-toggle-nav list-unstyled pb-1">
        <li><a class="rounded" href="../modules/classes/vector.html">Vector</a></li>
        <li><a class="rounded" href="../modules/classes/vectorclip.html">VectorClip</a></li>
        <li><a class="rounded" href="../modules/classes/vectorcolour.html">VectorColour</a></li>
        <li><a class="rounded" href="../modules/classes/vectorellipse.html">VectorEllipse</a></li>
        <li><a class="rounded" href="../modules/classes/vectorfilter.html">VectorFilter</a></li>
        <li><a class="rounded" href="../modules/classes/vectorgradient.html">VectorGradient</a></li>
        <li><a class="rounded" href="../modules/classes/vectorgroup.html">VectorGroup</a></li>
        <li><a class="rounded" href="../modules/classes/vectorimage.html">VectorImage</a></li>
        <li><a class="rounded" href="../modules/classes/vectorpath.html">VectorPath</a></li>
        <li><a class="rounded" href="../modules/classes/vectorpattern.html">VectorPattern</a></li>
        <li><a class="rounded" href="../modules/classes/vectorpolygon.html">VectorPolygon</a></li>
        <li><a class="rounded" href="../modules/classes/vectorrectangle.html">VectorRectangle</a></li>
        <li><a class="rounded" href="../modules/classes/vectorscene.html">VectorScene</a></li>
        <li><a class="rounded" href="../modules/classes/vectorshape.html">VectorShape</a></li>
        <li><a class="rounded" href="../modules/classes/vectorspiral.html">VectorSpiral</a></li>
        <li><a class="rounded" href="../modules/classes/vectortext.html">VectorText</a></li>
        <li><a class="rounded" href="../modules/classes/vectortransition.html">VectorTransition</a></li>
        <li><a class="rounded" href="../modules/classes/vectorviewport.html">VectorViewport</a></li>
        <li><a class="rounded" href="../modules/classes/vectorwave.html">VectorWave</a></li>
        </ul></div>
        </li>
      </ul>
    </div>
  </li>
</ul>

</div>
</div>

<div class="col-sm-9" style="max-width: 1200px;">
<div class="docs-content" id="default-page">
<h1>Action Reference Manual</h1>
<p>Actions are an implementation of the design-by-contract approach to object orientation. Common activities such as showing and hiding an object on the display, or reading and writing data have been given a dedicated action interface. The &#39;contract&#39; exists in the strict objectives of each action, as documented in this manual. For instance, calling <code>Show</code> and <code>Hide</code> actions on a UI object will change its visibility as one would expect.</p>
<p>If an action isn&#39;t applicable to an object, calling it is legal but will do nothing.</p>
<p>This document describes the available action interfaces, including the expectations of behaviour for the client, as well as implementation details of each contract.</p>
<p>Where necessary, classes will often clarify the details of how they support their actions. These details are documented in the class manuals.</p>
<h1 id="action-interfaces">Action Interfaces</h1>
<p>The Core API provides multiple functions for action related tasks. <code>Action()</code> is used to make immediate calls, and requires an object pointer. <code>AsyncAction()</code> launches the action in a separate thread and returns immediately. <code>QueueAction()</code> is a pure messaging function, requiring only the object UID and delaying the call until the next message processing cycle. The aforementioned functions are documented completely in the Core API.</p>
<p>For C++ users, additional macros are also provided. All actions listed in this document will have an associated stub function prefixed with <code>ac</code>. For example, <code>acShow(Object)</code> and <code>acSetKey(Object, Key, Value)</code>. Automated header generation also ensures that relevant methods are created at class level, meaning <code>Object-&gt;show()</code> and <code>Object-&gt;setKey(Key, Value)</code> are similarly valid.</p>
<p>Fluid users can call actions with the <code>acName</code> template, in this case <code>object.acShow()</code> and <code>object.acSetKey(Key, Value)</code> would be equivalent to the C++ counterpart.</p>
<p>Run-time inspection is supported with the Core API&#39;s <code>CheckAction()</code> function, which confirms if an object&#39;s class supports a given action. The <code>ActionList()</code> function provides insight into all known actions and their parameters.</p>
<p>Finally, the <code>SubscribeAction()</code> function provides a monitoring feature that will call a custom function whenever a given action has been executed for a target object.</p>
<h1 id="action-index">Action Index</h1>
<p><a href="#activate"><code>Activate</code></a> <a href="#clear"><code>Clear</code></a> | <a href="#clipboard"><code>Clipboard</code></a> | <a href="#copydata"><code>CopyData</code></a> | <a href="#datafeed"><code>DataFeed</code></a> | <a href="#deactivate"><code>Deactivate</code></a> | <a href="#disable"><code>Disable</code></a> | <a href="#dragdrop"><code>DragDrop</code></a> | <a href="#draw"><code>Draw</code></a> | <a href="#enable"><code>Enable</code></a> | <a href="#flush"><code>Flush</code></a> | <a href="#focus"><code>Focus</code></a> | <a href="#free"><code>Free</code></a> | <a href="#getkey"><code>GetKey</code></a> | <a href="#hide"><code>Hide</code></a> | <a href="#init"><code>Init</code></a> | <a href="#lock"><code>Lock</code></a> | <a href="#move"><code>Move</code></a> | <a href="#movetoback"><code>MoveToBack</code></a> | <a href="#movetofront"><code>MoveToFront</code></a> | <a href="#movetopoint"><code>MoveToPoint</code></a> | <a href="#next"><code>Next</code></a> | <a href="#Prev"><code>Prev</code></a> | <a href="#query"><code>Query</code></a> | <a href="#read"><code>Read</code></a> | <a href="#redimension"><code>Redimension</code></a> | <a href="#redo"><code>Redo</code></a> | <a href="#refresh"><code>Refresh</code></a> | <a href="#rename"><code>Rename</code></a> | <a href="#reset"><code>Reset</code></a> | <a href="#resize"><code>Resize</code></a> | <a href="#saveimage"><code>SaveImage</code></a> | <a href="#savesettings"><code>SaveSettings</code></a> | <a href="#savetoobject"><code>SaveToObject</code></a> | <a href="#seek"><code>Seek</code></a> | <a href="#setfield"><code>SetField</code></a> | <a href="#setkey"><code>SetKey</code></a> | <a href="#show"><code>Show</code></a> | <a href="#signal"><code>Signal</code></a> | <a href="#undo"><code>Undo</code></a> | <a href="#unlock"><code>Unlock</code></a> | <a href="#write"><code>Write</code></a></p>
<h1 id="internal-actions">Internal Actions</h1>
<p>These actions are implemented for use internally, and must never be called from client code.</p>
<p><a href="#freewarning"><code>FreeWarning</code></a> <a href="#lostfocus"><code>LostFocus</code></a> | <a href="#newchild"><code>NewChild</code></a> | <a href="#newobject"><code>NewObject</code></a> | <a href="#newowner"><code>NewOwner</code></a></p>
<hr>
<h2 id="activate">Activate</h2>
<p><code>ERR acActivate(Object)</code></p>
<p><code>Activate</code> causes an object to perform its &quot;native activity&quot;. Although ambiguous, the activity should be relevant to the class in question. Here are a few examples of what some existing classes do when their objects are activated:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Class</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Sound</td>
<td style="text-align: left;">Plays audio data.</td>
</tr>
<tr>
<td style="text-align: left;">Script</td>
<td style="text-align: left;">Runs a scripted program.</td>
</tr>
<tr>
<td style="text-align: left;">Picture</td>
<td style="text-align: left;">Loads a source image.</td>
</tr>
</tbody>
</table>
<p>It is typical for most classes that support the loading and processing of data to do so in their <code>Activate</code> support.</p>
<p>Some objects will continue to perform their native activity after they return back to the client - for example, activating a <code>Sound</code> object will cause it to play audio in the background. If background processing needs to be cancelled, this should be done with a <a href="#Deactivate"><code>Deactivate</code></a> call.</p>
<h3 id="implementation-details">Implementation Details</h3>
<p>The <code>Activate</code> action is intentionally ambiguous, giving free reign as to the nature of the implementation. Even so, it should be intuitively clear what the user would expect from the activation process. If that is not the case, the <code>Activate</code> action should probably go unsupported.</p>
<p>Remember to support the <code>Deactivate</code> action if background activity can be cancelled.</p>
<h2 id="clear">Clear</h2>
<p><code>ERR acClear(Object)</code></p>
<p>This action will clear an object of all its data. Typical use cases are the clearing of graphics and data records. Here are some examples:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Class</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">File</td>
<td style="text-align: left;">Clears file data by reducing the file length down to 0.</td>
</tr>
<tr>
<td style="text-align: left;">Text</td>
<td style="text-align: left;">Deletes all lines of text.</td>
</tr>
<tr>
<td style="text-align: left;">Bitmap</td>
<td style="text-align: left;">Clears the bitmap of graphics data.</td>
</tr>
</tbody>
</table>
<p>The overall state of the object will normally remain intact - so clearing a file will not cause the file handle to be closed for instance.</p>
<h2 id="clipboard">Clipboard</h2>
<p><code>ERR acClipboard(Object, OBJECTID Clipboard, CLIPMODE Mode)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Mode</td>
<td style="text-align: left;">CLIPMODE</td>
<td style="text-align: left;">The mode that will be used to shift data between the target object and clipboard system.</td>
</tr>
</tbody>
</table>
<p>The <code>Clipboard</code> action is used on objects for the purpose of shifting data between them and the clipboard system. Generally, clients should only use this action when the user has done something that requires it to be called, for instance, holding the <code>CTRL+C</code> keys to make a copy operation.</p>
<p>Three modes are currently available for performing clip operations, as illustrated in the following table:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">CLIPMODE</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">CUT</td>
<td style="text-align: left;">Cut (copy and delete) the currently selected data from the target object and copy it into the clipboard.</td>
</tr>
<tr>
<td style="text-align: left;">COPY</td>
<td style="text-align: left;">Copy the currently selected data from the target object into the clipboard.</td>
</tr>
<tr>
<td style="text-align: left;">PASTE</td>
<td style="text-align: left;">Paste the most recent data from the clipboard into the target object.</td>
</tr>
</tbody>
</table>
<p>The specifics of how a target object interacts with a clipboard is down to the developer of the object&#39;s class. If you need more information on how an object might interface with the clipboard system, check its class documentation.</p>
<h3 id="implementation-details-1">Implementation Details</h3>
<p>Supporting the system-wide clipboard service requires code to be written for the <code>Clipboard</code> action. This action is closely related to the <code>Clipboard</code> class, which you will need to instantiate as necessary. The <code>Mode</code> reflects the type of action that needs to be performed.</p>
<p>Copy and cut operations are identical, apart from the fact that cutting data will require you to delete the information after pasting it into the clipboard. To copy data to a clipboard, use any of the mechanisms supported by the <code>Clipboard</code> class, such as the <code>AddText()</code> method. Please refer to the documentation for the <code>Clipboard</code> class for more information.</p>
<p>To paste data from a clipboard into one of your objects, call the <code>GetFiles()</code> method to retrieve the data from the file system. You may be &#39;selective&#39; in the data that you retrieve from the clipboard, for instance, if the next clip is an image and your class only supports text data, you can ignore the image and extract the text data instead. The documentation for the <code>Clipboard</code> class has more information on how to scan the data store.</p>
<h2 id="copydata">CopyData</h2>
<p><code>ERR acCopyData(Object, OBJECTID Dest)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Dest</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">The unique ID of the destination object.</td>
</tr>
</tbody>
</table>
<p>The <code>CopyData</code> action is used to copy data between objects. To execute the copy process, call the <code>CopyData</code> action on the <em>source</em> object, and set the <code>Dest</code> to the object that you are copying the data to. If the source object does not recognise the destination object type, it will make calls to the <a href="#Write"><code>Write</code></a> action to copy the data across. If it does understand the destination object type, it may make an &#39;intelligent&#39; copy. For instance, when copying the data from one Bitmap to another, the image source will be <em>drawn</em> to the destination.</p>
<h3 id="implementation-details-2">Implementation Details</h3>
<p>The <code>CopyData</code> action is provided so that data in one object can be copied across to another. This may or may not involve data conversion. For example, copying data between files is a straight forward process of copying a raw binary stream. However, copying data between two Bitmaps would be more complicated, because we need to consider clipping and colour conversion issues. Copying between different classes is also permitted, for example copying a <code>Picture</code> to a <code>File</code> could output the image as raw data.</p>
<p>If you wish to write your routine so that it only supports recognised classes, return <code>ERR::NoSupport</code> for those at are unsupported. To support all classes, include a fallback that uses the <a href="#Write"><code>Write</code></a> action to stream data to the destination object.</p>
<h2 id="datafeed">DataFeed</h2>
<pre><code>ERR acDataFeed(Object, OBJECTID Object, DATA Datatype, APTR Buffer, LONG Size)
ERR acDataXML(Object, CSTRING Buffer)
ERR acDataContent(Object, CSTRING Buffer)
ERR acDataText(Object, CSTRING Buffer)</code></pre>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Object</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">Must refer to the unique ID of the object that you represent. If you do not represent an object, set this parameter to the current task ID.</td>
</tr>
<tr>
<td style="text-align: left;">Datatype</td>
<td style="text-align: left;">DATA</td>
<td style="text-align: left;">The type of data being sent.</td>
</tr>
<tr>
<td style="text-align: left;">Buffer</td>
<td style="text-align: left;">APTR</td>
<td style="text-align: left;">The data being sent to the target object.</td>
</tr>
<tr>
<td style="text-align: left;">Size</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">The size of the data in <code>Buffer</code>.</td>
</tr>
</tbody>
</table>
<p>The <code>DataFeed</code> action provides a mechanism for writing typed data to objects. The target <code>Object</code> will check the <code>Datatype</code> to determine if the <code>Buffer</code> content is supported, and if so, will process the data according to what is appropriate for the object&#39;s class.</p>
<p>The following <code>Datatype</code> values are supported:</p>
<!-- #### DATA::AUDIO -->

<h4 id="datacontent">DATA::CONTENT</h4>
<p>This is a special datatype used by the <code>Document</code> class to pass XML content to embedded objects. Although this duplicates the <code>DATA::XML</code> type, it may be desirable to parse such data differently to <code>DATA::XML</code> due to nature of the content.</p>
<!-- #### DATA::DEVICE -->

<h4 id="datafile">DATA::FILE</h4>
<p>This datatype is used to declare a file path that contains the data to be transferred. It is frequently used to speed up data transfers where loading file data into a buffer and passing it through the DataFeed system would be inefficient. Set the <code>Size</code> to the path&#39;s string length, including the null byte.</p>
<h4 id="dataraw">DATA::RAW</h4>
<p>Sending raw binary data to an object is equivalent to calling the <a href="#Write"><code>Write</code></a> action. Set the <code>Size</code> to the byte length of the data.</p>
<h4 id="datareceipt">DATA::RECEIPT</h4>
<p>In response to a <code>DATA::REQUEST</code> from an object, a <code>RECEIPT</code> must be sent to the requesting object. The receipt will contain a null-terminated XML string with the data that has been requested. Please refer to the <a href="#DragDrop"><code>DragDrop</code></a> action for further information.</p>
<!-- #### DATA::RECORD -->

<h4 id="datarequest">DATA::REQUEST</h4>
<p>The <code>REQUEST</code> datatype is intended for supporting drag and drop operations, but theoretically can be used for any type of data transfer between objects where uniquely numbered items may be used.</p>
<p>A request for data is achieved by passing an <code>Item</code> UID and indicating up to three types of data formats that would be accepted from the source. The <code>dcRequest</code> structure for managing the request is configured as follows:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Field</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Item</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">Item to retrieve from the source.</td>
</tr>
<tr>
<td style="text-align: left;">Preference</td>
<td style="text-align: left;">DATA [4]</td>
<td style="text-align: left;">Data preferences for the returned item(s).</td>
</tr>
</tbody>
</table>
<p>The datatypes indicated by the Preference field can be any of the pure datatypes supported by the <code>DataFeed</code> action, for example <code>DATA::TEXT</code> or <code>DATA::XML</code>. Any unused elements of the <code>Preference</code> array must be set to zero.</p>
<h4 id="datatext">DATA::TEXT</h4>
<p>Use the <code>TEXT</code> datatype when sending UTF-8 text to an object. The <code>Size</code> of the string must include the null byte.</p>
<h4 id="dataxml">DATA::XML</h4>
<p>The XML datatype shares the same qualities as <code>DATA::TEXT</code>, but explicitly declares the content as being XML formatted. How the information is interpreted by the receiving class is context dependent. It is recommended that you check the class&#39; documentation to see the level of support that is offered.</p>
<h2 id="deactivate">Deactivate</h2>
<p><code>ERR acDeactivate(Object)</code></p>
<p>Deactivating an object that is still in an active state from the <a href="#Activate"><code>Activate</code></a> action will cause it to halt its activity. If the object is not in an active state, this action does nothing.</p>
<h3 id="implementation-details-3">Implementation Details</h3>
<p>A class that supports the <code>Activate</code> action should consider support for <code>Deactivate</code> if the object&#39;s active state persists beyond the original <code>Activate</code> call.</p>
<p>If the target object is in an inactive state at the time of the <code>Deactivate</code> call, do nothing and return <code>ERR::Okay</code> to the client.</p>
<h2 id="disable">Disable</h2>
<p><code>ERR acDisable(Object)</code></p>
<p>The <code>Disable</code> action is used to put an object into a state where it cannot respond to user interaction. It is typically used to temporarily &quot;turn off&quot; objects in the interface. For instance, disabling a <code>Vector</code> object will cause it to drop incoming user events such as button clicks and cursor motion. An object will remain in a disabled state until enabled again with the <a href="#Enable"><code>Enable</code></a> action.</p>
<p>Multiple calls to the <code>Disable</code> action will not nest unless the documentation for the object&#39;s class states otherwise.</p>
<h3 id="implementation-details-4">Implementation Details</h3>
<p>The Disable action is provided for the purposes of disabling the interactive elements of an object. It is typically supported by classes that have a presence in the UI, or have some other form of user interaction.</p>
<p>It is important that only the user-interactive elements of the object are disabled. The object should not be disabled to the point of being useless, as non-interactive changes are still valid.</p>
<p>If necessary, a class can nest multiple calls to the Disable action, although this would be considered to be an exception to the rule. If you are going to support nesting, document this fact in the class.</p>
<p>Support for the <code>Disable</code> action should also be matched with support for the <a href="#Enable"><code>Enable</code></a> action. This will allow your disabled objects to return to a normal state, as disablement is usually only a temporary measure.</p>
<h2 id="dragdrop">DragDrop</h2>
<p><code>ERR acDragDrop(Object, OBJECTID Source, LONG Item, DATA Datatype)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Source</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">Refers to the object containing the source data.</td>
</tr>
<tr>
<td style="text-align: left;">Item</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">An item ID, relevant to the source object.</td>
</tr>
<tr>
<td style="text-align: left;">Datatype</td>
<td style="text-align: left;">DATA</td>
<td style="text-align: left;">The type of data represented by the source item.</td>
</tr>
</tbody>
</table>
<p>The <code>DragDrop</code> action provides the core functionality of a universal drag and drop system. The process of drag and drop works as follows:</p>
<ol type="1">
<li>The user initiates a drag and drop operation by clicking and holding the mouse button on an interface item.</li>
<li>The owner of that item will monitor click and motion activity that could instigate a drag and drop operation.</li>
<li>On detecting the initial stages of the drag and drop operation, the object will create a new graphics <code>Surface</code> utilising the <code>COMPOSITE</code> and <code>STICK_TO_FRONT</code> flags. The Display API&#39;s <code>StartCursorDrag()</code> function is called to link this surface to the mouse pointer. No further action needs to be taken until the mouse button is released.</li>
</ol>
<p>When the item is dropped by releasing the mouse button over a <code>Surface</code>, the following occurs:</p>
<ol type="1">
<li>The mouse pointer will hide the draggable surface that was attached to it.</li>
<li>The <code>DragDrop</code> action will be called on the surface that is under the pointer&#39;s hot spot. The <code>Source</code>, <code>Item</code> number and datatype originally passed to <code>StartCursorDrag()</code> will be included in this action call.</li>
<li>If a listener is subscribed to the <code>DragDrop</code> action of the targeted surface, it will be able to respond to the drag and drop operation. The listener will need to send a <code>DATA::REQUEST</code> via the <a href="#DataFeed"><code>DataFeed</code></a> action to the object that is referenced in the <code>Source</code> parameter. The listener can indicate supported datatypes that it will accept from the source (see the <code>DataFeed</code> action for further information) and the Item number received from the <code>DragDrop</code> action.</li>
<li>The source object will respond by sending a <code>DATA::RECEIPT</code> message via the <a href="#DataFeed"><code>DataFeed</code></a> action. This contains the item data in one of the requested formats.</li>
</ol>
<p>Data for drag and drop activity is defined in XML format. The following template must be adhered to:</p>
<pre><code>&lt;receipt id=&quot;[SourceID]&quot; totalItems=&quot;[Total]&gt;
  ...list of items...
&lt;/receipt&gt;</code></pre>
<p>The official list of items that can be contained in the receipt are as follows:</p>
<h4 id="dataaudio">DATA::AUDIO</h4>
<p><code>&lt;audio path=&quot;[FilePath]&quot; object=&quot;[SoundObject]&quot;/&gt;</code></p>
<p>A choice can be made between defining a <code>path</code> or <code>object</code>. The <code>object</code> must belong to the <code>Sound</code> class.</p>
<h4 id="datafile-1">DATA::FILE</h4>
<p><code>&lt;file path=&quot;[FilePath]&quot;/&gt;</code></p>
<h4 id="dataimage">DATA::IMAGE</h4>
<p><code>&lt;audio path=&quot;[FilePath]&quot; object=&quot;[Object]&quot;/&gt;</code></p>
<p>A choice can be made between defining a <code>path</code> or <code>object</code>. The object must belong to either the <code>Picture</code> or <code>Bitmap</code> classes.</p>
<h4 id="dataraw-1">DATA::RAW</h4>
<p><code>&lt;raw path=&quot;[FilePath]&quot; object=&quot;[Object]&quot;/&gt;</code></p>
<p>A choice can be made between defining a <code>path</code> or <code>object</code>. The object must support the <code>Read</code> action for reading the data.</p>
<h4 id="datatext-1">DATA::TEXT</h4>
<p><code>&lt;text&gt;[UTF8Content]&lt;/text&gt;</code></p>
<h4 id="dataxml-1">DATA::XML</h4>
<p><code>&lt;xml&gt;[XMLContent]&lt;/xml&gt;</code></p>
<h3 id="implementation-details-5">Implementation Details</h3>
<p>To support drag and drop, do not write a routine specifically targeting the <code>DragDrop</code> action. Instead, use <code>SubscribeAction()</code> to listen to the <code>DragDrop</code> action of the surface that is used by your object. In response to the receipt of a <code>DragDrop</code> action, send a <code>DATA::REQUEST</code> (via data feed) to the indicated Source object. The rest of your support code for drag and drop will need to be written in your <a href="#DataFeed"><code>DataFeed</code></a> support routine.</p>
<h2 id="draw">Draw</h2>
<pre><code>ERR acDrawArea(Object, LONG X, LONG Y, DOUBLE LONG, LONG Height)
ERR acDraw(Object)</code></pre>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">X, Y</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">The top-left position of the region to be drawn.</td>
</tr>
<tr>
<td style="text-align: left;">Width, Height</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">The size of the region to be drawn.</td>
</tr>
</tbody>
</table>
<p>This action will draw an object&#39;s graphics, either to the video display or to a virtual drawing space, according to the object state and class specifications. If the object is not linked to a drawable area, or if the object belongs to a non-graphical class, calling this action will usually have no effect and an error code will be returned.</p>
<p>The dimension parameters specify the size of the region that will be drawn. The <code>Width</code> and <code>Height</code> can both be zero if the entire region of the object should be drawn.</p>
<h3 id="implementation-details-6">Implementation Details</h3>
<p>The <code>Draw</code> action is provided for classes that need graphics support. The client should configure the object with sufficient information to draw something of value. A &#39;target&#39; field will be needed in the class spec so that <code>Draw</code> has an appropriate graphics destination. The exact technical details of the process are for you to define.</p>
<p>The dimension parameters are provided so that the client can declare the precise region that needs to be drawn. Supporting these parameters is optional - if they are not appropriate for the class, ignore them.</p>
<h2 id="enable">Enable</h2>
<p><code>ERR acEnable(Object)</code></p>
<p>The Enable action is provided for the purposes of reactivating objects that have been disabled with the <a href="#Disable"><code>Disable</code></a> action. When an object is enabled, it should be operating in its normal state.</p>
<h3 id="implementation-details-7">Implementation Details</h3>
<p>The Enable action is implemented as a counter to <code>Disable</code>. If your <code>Disable</code> code includes support for nesting then you will also need to take this into consideration.</p>
<p>If an <code>Enable</code> call is made to an object that is not disabled, do nothing and return <code>ERR::Okay</code>.</p>
<h2 id="flush">Flush</h2>
<p><code>ERR acFlush(Object)</code></p>
<p>This action will flush all buffered data from an object. Flushing can be useful when applied to I/O based objects that buffer data to speed up processing times. As a result of flushing, unwritten data will either be dumped to its physical location or related output device, depending on the object specifications.</p>
<p>Note that any object using a buffering technique will automatically flush its data when you <a href="#Free"><code>Free</code></a> it.</p>
<h3 id="implementation-details-8">Implementation Details</h3>
<p>Flush is a useful action for buffered objects such as files, as it ensures that buffered content is permanently saved to its destination. Novel applications for data flushing are also possible, for instance the flushing of a series of graphics commands to the display would be valid. In general, if a class is designed to buffer content then giving consideration for <code>Flush</code> should be a priority.</p>
<h2 id="focus">Focus</h2>
<p><code>ERR acFocus(Object)</code></p>
<p>The <code>Focus</code> action is primarily used within the UI for focussing on interactive widgets. Objects supporting the <code>Focus</code> action are typically members of the Drawable category, of which the <code>Surface</code> and <code>Vector</code> classes currently qualify.</p>
<p>When a drawable object receives the focus it will usually do very little, but external objects that are listening for focus activity will respond to the change accordingly. For instance, input based objects within surface areas often listen to focus changes so that they know when to start responding to keyboard input.</p>
<h3 id="implementation-details-9">Implementation Details</h3>
<p>This action is usually called on drawable objects (e.g. <code>Surface</code> objects) when the user interacts with them. Your class should only support this action if it is used in an area that is in close proximity to the user&#39;s actions.</p>
<p>If your class requires notification when a drawable object has received the focus, do not write support for the <code>Focus</code> action. You should instead use the <code>SubscribeAction()</code> function to listen to the <code>Focus</code> action of the drawable object that you are interested in.</p>
<p>If your class needs to be informed when one of its objects has lost the focus, support the <a href="#LostFocus"><code>LostFocus</code></a> action.</p>
<h2 id="free">Free</h2>
<p><code>ERR FreeResource(Object)</code></p>
<p>Objects are permanently removed with the <code>Free</code> action, which is achieved via a call to <code>FreeResource()</code>. If the object has one or more child objects attached to it, they will also be removed as a result of calling this action. After calling <code>Free</code>, remove any UID and pointer references to the object as a measure of bug prevention.</p>
<p>If an exclusive lock is active at the time of calling <code>Free</code>, the object will be <em>marked for deletion</em> only. The object will not be permanently removed until the last lock is released.</p>
<div class="note">
<div class="title">
<p>Note</p>
</div>
<p>The means of terminating an object can vary between languages. C++ uses <code>FreeResource()</code>, while in Fluid, objects are manually terminated with the <code>obj:free()</code> interface, or automatically via garbage collection. The specifics of this should be documented in your language of choice.</p>
</div>
<h3 id="implementation-details-10">Implementation Details</h3>
<p><code>Free</code> support is essential for all classes that allocate resources. It is correctly implemented by removing all resources that were created during an object&#39;s life-cycle.</p>
<p>Sub-classes need to support this action if their code tracks resources seperately to the base class. To prevent allocations between a base-class and sub-class from being confused, the fields that reference resources should be driven to <code>NULL</code> after their termination. If your sub-class requires its own private data area for resource management, the <code>ChildPrivate</code> field is available for this purpose.</p>
<h2 id="freewarning-">FreeWarning <!-- Private --></h2>
<p>This is an internal action that is used for receiving a warning prior to an object being freed. It should never be called from client code.</p>
<h3 id="implementation-details-11">Implementation Details</h3>
<p><code>FreeWarning</code> is useful for preventing an object from being terminated when it is in an unready state. This is achieved by returning an error code of <code>ERR::InUse</code>. All other error codes are ignored.</p>
<p>If an object is in a <code>collecting</code> state, for instance if the app is shutting down, then it will not be possible to abort termination. If this is an important factor for your code, use the C++ <code>collecting()</code> method to verify the object&#39;s state.</p>
<h2 id="getkey">GetKey</h2>
<p><code>ERR acGetKey(Object, STRING Key, STRING Value, LONG Size)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Key</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">The name of a key value.</td>
</tr>
<tr>
<td style="text-align: left;">Value</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">Pointer to a buffer space large enough to hold the retrieved value.</td>
</tr>
<tr>
<td style="text-align: left;">Size</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">Indicates the byte size of the Buffer.</td>
</tr>
</tbody>
</table>
<p>The <code>GetKey</code> action is used to retrieve custom key-values from an object. Keys can either be functional, as is the case for <code>XML</code>&#39;s xpath support, or they can be created by the client using <a href="#SetKey"><code>SetKey</code></a>.</p>
<p>To retrieve a key-value, set the <code>Key</code> and use <code>Value</code> to point to a buffer large enough to hold the string that is expected. The <code>Size</code> declares the maximum number of bytes that can be written to <code>Value</code>, including the null terminator.</p>
<p><code>Key</code> names are case-insensitive unless documented otherwise. If the requested <code>Key</code> doesn&#39;t exist, <code>ERR::UnsupportedField</code> will typically be returned from the object&#39;s class.</p>
<h3 id="implementation-details-12">Implementation Details</h3>
<p>If your class design allows for key-values then you will need to support <code>GetKey</code>. This can include support for functional keys, which are key names that are documented in advance and backed by coded functionality. The <code>XML</code> class is one such example that does this to support the xpath standard.</p>
<p>Keys should be case-insensitive by default. If this is not the case, document this fact for the client.</p>
<p>If the requested <code>Key</code> does not exist, return an error code of <code>ERR::UnsupportedField</code>.</p>
<p>Use the <code>Size</code> parameter to prevent overwriting the <code>Value</code> buffer. If there is insufficient space, clip the outgoing string and return <code>ERR::Okay</code> (a warning message printed to the log may be advised).</p>
<p>Adequate documentation for the client is strongly recommended when supporting this action.</p>
<h2 id="hide">Hide</h2>
<p><code>ERR acHide(Object)</code></p>
<p>Hiding is used to remove objects from the sight of the user. Examples of this include hiding <code>Vector</code> and <code>File</code> objects. Use the <a href="#Show"><code>Show</code></a> action to make the object visible again.</p>
<h3 id="implementation-details-13">Implementation Details</h3>
<p>If a class represents objects that are visible to the user (for example, a UI class) then being able to control that visibility is usually necessary.</p>
<p>If the visible state of the object is already hidden, do nothing and return <code>ERR::Okay</code>.</p>
<p>Changing the visible state of a graphics object can trigger a redraw of the display, but this is at your discretion. Documenting whether or not the changes will be immediately visible is advised.</p>
<p><code>Hide</code> and <code>Show</code> should always be supported in tandem as would be expected by the client.</p>
<h2 id="init">Init</h2>
<p><code>ERR acInit(Object)</code></p>
<p>This action initialises objects so that they can be used for their intended purpose. The process of initialisation is compulsory, and <em>you may not use any other actions on an object until it has been initialised</em>. Exceptions to this rule only apply to the <a href="#Free"><code>Free</code></a>, <a href="#GetKey"><code>GetKey</code></a> and <a href="#SetKey"><code>SetKey</code></a> actions.</p>
<p>If the initialisation of an object fails due to a support problem (for example, if you ask a <code>Picture</code> object to load a TIFF image when it only supports PNG), the <code>Init</code> action can look for a sub-class that handles the data. If a supporting sub-class exists, a partial transfer of ownership will occur and the object&#39;s management will be shared between both the base-class and the sub-class.</p>
<p>Part of the initialisation process is to check a client&#39;s configuration settings up-front, and a suitable error code will be returned if these checks are failed.</p>
<p>C++ users can check the initialisation state of an object by calling its <code>initialised()</code> method.</p>
<h3 id="implementation-details-14">Implementation Details</h3>
<p>This action is called when a program initialises an object that belongs to your class. The purpose of this action is to prepare the object for the necessary handling for other actions such as <code>Draw</code>, <code>Activate</code>, <code>Show</code> etc.</p>
<p>Data-centric classes that fail to recognise the source data should always return <code>ERR::NoSupport</code> (e.g. a PNG class cannot process a JPEG file). Your code should also strive to keep the object state untarnished. The initialisation manager will look for a sub-class that can support the object correctly. If your class supports the data but initialisation fails due to a system error or similar, return any error-code other than <code>ERR::NoSupport</code> and <code>ERR::Okay</code>. This will cause the initialisation process to fail immediately and return to the program.</p>
<p>It is a requirement that the object state is sufficiently validated when <code>Init</code> is called. Do not assume that the object is configured correctly by the client.</p>
<p>Never free an object from inside its own initialisation routine; this is a matter for the client.</p>
<h2 id="lock">Lock</h2>
<p><code>ERR acLock(Object)</code></p>
<p>The <code>Lock</code> action can be used on an object when you don&#39;t want it to be moved, deleted or otherwise altered by other processes for a period of time. This is commonly needed for files.</p>
<p>Each initial and subsequent calls to Lock must be matched with calls to the <a href="#Unlock"><code>Unlock</code></a> action, because locks will nest. Once all locks have been removed, manipulation of the object is possible again. The following conditions apply to locking behaviour:</p>
<ul>
<li>Other tasks <em>may</em> be able to gain limited access to the object&#39;s data after you have locked it (e.g. locking a file may prevent writing, but other processes could still read the file). The class should document this behaviour. If it doesn&#39;t, work on the assumption that other processes will have read access to the object&#39;s data.</li>
<li>The object will be fixed in place and cannot be moved or deleted, even by your own process, until it is unlocked.</li>
<li>If you <a href="#Free"><code>Free</code></a> a locked object, its class will automatically reverse all locks that exist at the time of termination.</li>
</ul>
<p>Please be aware that the <code>Lock</code> action and <code>LockObject()</code> are functionally very different. To clarify, the <code>LockObject()</code> function is used to gain exclusive, temporary access to the use of an object&#39;s interface. It has no impact on the material use of the underlying data that the object might be referencing.</p>
<h3 id="implementation-details-15">Implementation Details</h3>
<p>Locking is provided for developers that need to prevent object data from being altered. Locks can either be shared or exclusive to processes, depending on what is suitable for the object and its class.</p>
<p>As a result of locking, the object will be fixed in place and cannot be moved or deleted, even by the process that holds the lock, until the object is unlocked with the <code>Unlock</code> action. As the developer, you have a responsibility to enforce your own rules to support locks. Feel free to place other restrictions on the object where appropriate.</p>
<p>Detailed documentation on locking behaviour is strongly recommended for the client.</p>
<p>Supporting the <a href="#Unlock"><code>Unlock</code></a> action is required in tandem with <code>Lock</code>. Multiple locking calls are expected to nest, and a counter should be used to ensure that this is the case.</p>
<h2 id="lostfocus-">LostFocus <!-- Private --></h2>
<p>This is an internal action managed by the <code>Surface</code> class. It should never be called by the client.</p>
<h3 id="implementation-details-16">Implementation Details</h3>
<p>This action is automatically called on <code>Surface</code> objects when they lose the user focus. Other UI classes are not expected to support it.</p>
<h2 id="move">Move</h2>
<p><code>ERR acMove(Object, DOUBLE DeltaX, DOUBLE DeltaY, DOUBLE DeltaZ)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">DeltaX, DeltaY, DeltaZ</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">The number of units to move along each axis.</td>
</tr>
</tbody>
</table>
<p>The <code>Move</code> action is provided to move graphical objects to a new position. Coordinates are specified as a delta, so the current position of the object will be taken into account. If the current coordinates of an object are needed to compute the desired target position, reading the <code>X</code> and <code>Y</code> fields is the most typical way of doing so.</p>
<p>Note: The <code>DeltaZ</code> parameter is ignored if the target does not support three dimensions.</p>
<p>The <a href="#MoveToPoint"><code>MoveToPoint</code></a> action may also be available as an alternative choice to <code>Move</code>, and uses absolute positioning.</p>
<h3 id="implementation-details-17">Implementation Details</h3>
<p>If a class supports a coordinate system (typically the case for all graphics classes) then supporting the <code>Move</code> action is advised. Movement is achieved with delta values, so the current X, Y and Z positions will need to be tracked and available to the client via equivalent field values.</p>
<p>If there is a limit as to how far an object can move in any direction, keeping the object to the edge of its bounds is permitted. You should still return an error code of <code>ERR::Okay</code> in cases where it was not possible to move by the requested amount.</p>
<h2 id="movetoback">MoveToBack</h2>
<p><code>ERR acMoveToBack(Object)</code></p>
<p>The <code>MoveToBack</code> and <code>MoveToFront</code> actions are used for shuffling objects to the back or front of their containers. Generally this is applied to graphics classes, but other class types can support these actions for sorting purposes.</p>
<p>In some instances it may not be possible for an object to be moved completely to the front or back, in which case the object will move as close to the requested position as possible. This situation will typically occur when groups of objects are locked to their position, preventing others from being promoted ahead of them.</p>
<h3 id="implementation-details-18">Implementation Details</h3>
<p>Support <code>MoveToBack</code> and <code>MoveToFront</code> to allow the client to make adjustments to the sort order of overlapping objects.</p>
<p>If your class supports the <code>Lock</code> action, it may be appropriate for locked objects to hold their position when at the front of the queue. This is a design choice, so documenting the class&#39; behaviour in this area is recommended.</p>
<h2 id="movetofront">MoveToFront</h2>
<p><code>ERR acMoveToFront(Object)</code></p>
<p>The <code>MoveToBack</code> and <code>MoveToFront</code> actions are used for shuffling objects to the back or front of their containers. Generally this is applied to graphics classes, but other class types can support these actions for sorting purposes.</p>
<p>In some instances it may not be possible for an object to be moved completely to the front or back, in which case the object will move as close to the requested position as possible. This situation will typically occur when groups of objects are locked to their position, preventing others from being promoted ahead of them.</p>
<h3 id="implementation-details-19">Implementation Details</h3>
<p>Support <code>MoveToBack</code> and <code>MoveToFront</code> to allow the client to make adjustments to the sort order of overlapping objects.</p>
<p>If your class supports the <code>Lock</code> action, it may be appropriate for locked objects to hold their position when at the front of the queue. This is a design choice, so documenting the class&#39; behaviour in this area is recommended.</p>
<h2 id="movetopoint">MoveToPoint</h2>
<p><code>ERR acMoveToPoint(Object, DOUBLE X, DOUBLE Y, DOUBLE Z, MTF Flags)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">X, Y, Z</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">The new position to move the object to.</td>
</tr>
<tr>
<td style="text-align: left;">Flags</td>
<td style="text-align: left;">MTF</td>
<td style="text-align: left;">Set the relevant <code>MTF</code> flag for each provided parameter.</td>
</tr>
</tbody>
</table>
<p>The <code>MoveToPoint</code> action is provided to move graphical objects to a new position. The shift to the new position is immediate, but may be subject to certain conditions - for instance it may not be possible to move to negative coordinates. Limitations may be circumstantial and subject to class specifications. An <code>ERR::Okay</code> code will be returned irrespective of whether or not movement to the requested position was succesful. The coordinates of the object can be confirmed after the move by reading the <code>X</code> and <code>Y</code> fields.</p>
<p>The client is required to set the <code>MTF::X</code>, <code>MTF::Y</code> and/or <code>MTF::Z</code> flags according to the parameters that were specified. This feature allows you to move the object to a specific horizontal coordinate without altering the vertical position, for example.</p>
<p>The <a href="#Move"><code>Move</code></a> action may also be available as an alternative choice to <code>MoveToPoint</code>, and uses relative positioning.</p>
<h2 id="newchild-">NewChild <!-- Private --></h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">NewChild</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">Pointer to the new child.</td>
</tr>
</tbody>
</table>
<p>For internal use only.</p>
<h3 id="implementation-details-20">Implementation Details</h3>
<p>The <code>NewChild</code> action is used to alert an object that it has inherited a new child from the Core&#39;s <code>SetOwner()</code> function. By supporting this action you can respond to the presence of new children immediately, as well as preventing objects from forming an attachment if they fail your own criteria (return an error code to do this).</p>
<p>In some circumstances it may be necessary for a new child to be forwarded to another object that is better suited as the owner. To do this legitimately, call the <code>SetOwner()</code> function to forward the child to the other object, then return <code>ERR::OwnerPassThrough</code>. Any other error code will be interpreted as failure, which would cause the process to abort.</p>
<h2 id="newowner">NewOwner</h2>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">NewOwner</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">Pointer to the new owner.</td>
</tr>
</tbody>
</table>
<p>For internal use only.</p>
<h3 id="implementation-details-21">Implementation Details</h3>
<p>The <code>NewOwner</code> action is used to alert an object that its owner has been changed successfully. Supporting this action provides an opportunity to respond to the change before the client next uses the object.</p>
<p>The error code returned by your function will have no effect on the <code>SetOwner()</code> process.</p>
<h2 id="newobject-">NewObject <!-- Private --></h2>
<p>For internal use only.</p>
<h3 id="implementation-details-22">Implementation Details</h3>
<p><code>NewObject</code> is called when a new object instance from your class has been created. It is recommended that your support routine performs the bare necessities only, meaning the setting of default values and allocating resources without initialising them. Anything more important should occur in the <code>Init</code> action.</p>
<p>Returning an error code will cause the object creation process to fail.</p>
<h2 id="query">Query</h2>
<p><code>ERR acQuery(Object)</code></p>
<p>Calling the <code>Query</code> action will update the target object&#39;s state to match its source, typically in the form of a file or hardware device.</p>
<p>Check the class documentation for the target object before utilising <code>Query</code>, as the exact nature of the process will be implementation dependent.</p>
<h3 id="implementation-details-23">Implementation Details</h3>
<p><code>Query</code> is useful action for ensuring that an object&#39;s state is reflective of the external source that it represents. Classes that are linked to some form of hardware will often benefit by supporting it. A basic example is the <code>Time</code> class, which updates its time values whenever <code>Query</code> is used.</p>
<p>It is advised that your documentation specifies the exact fields that are updated after a successful <code>Query</code> call.</p>
<h2 id="read">Read</h2>
<p><code>ERR acRead(Object, APTR Buffer, LONG Length, LONG *Result)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Buffer</td>
<td style="text-align: left;">APTR</td>
<td style="text-align: left;">Points a buffer that will receive the data.</td>
</tr>
<tr>
<td style="text-align: left;">Length</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">The total number of bytes to read from the object. This value cannot exceed the size of the <code>Buffer</code>.</td>
</tr>
<tr>
<td style="text-align: left;">Result</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">The Read action will write this parameter with the total number of bytes read into the <code>Buffer</code>.</td>
</tr>
</tbody>
</table>
<p>Use the <code>Read</code> action to read data from an object and into a supplied memory buffer. While commonly used for file I/O, <code>Read</code> is useful for many situations involving the streaming of data from an external source.</p>
<p>Making a <code>Read</code> call will result in the object reading the total number of bytes defined by <code>Length</code> into the provided <code>Buffer</code>. If the class supports a seek marker, the read will start from the <code>Position</code> field&#39;s index. The <code>Position</code> will be incremented by the amount of bytes read if the call succeeds. Altering the position of the seek marker is possible with the <a href="#Seek"><code>Seek</code></a> action, if the class supports it.</p>
<p>If the <code>Length</code> exceeds the total number of bytes left in the object, <code>Read</code> will only read as many bytes as there are available. If the class supports a <code>Size</code> field then it can be used to determine the number of bytes that are left to read.</p>
<p>The <code>Result</code> parameter will be updated to reflect the total amount of data that was read into the supplied <code>Buffer</code>. If an error occurred, or if no data is left to read, the <code>Result</code> will be set to zero.</p>
<h3 id="implementation-details-24">Implementation Details</h3>
<p>The <code>Read</code> action is commonly used to read data from files, but can theoretically be used in any circumstance involving data storage and streaming content.</p>
<p>The <code>Buffer</code> parameter points directly to the area that will receive data from your object. The <code>Length</code> will indicate the number of bytes that a program wants to retrieve. If the <code>Length</code> is larger than the amount of data that is available, write out the full amount of data remaining.</p>
<p>Your class should support a <code>Position</code> field to indicate the current byte position from which the <code>Read</code> action will start. Increment the <code>Position</code> by the number of bytes that were read from the object&#39;s data store before returning to the client. Also consider supporting the <a href="#Seek"><code>Seek</code></a> action to manipulate the <code>Position</code> value.</p>
<p>Your class should also support a <code>Size</code> field if the total amount of available data is a known quantity. If the source is a stream of unknown size then the <code>Size</code> should be set to zero, and the client should be given a means to determine that the source is streaming.</p>
<p>Before returning, your support routine must set the <code>Result</code> parameter to indicate the total amount of bytes that were read from the object. If no data is available to read, return <code>ERR::Okay</code> and make sure that the <code>Result</code> is set to zero.</p>
<h2 id="redimension">Redimension</h2>
<p><code>ERR acRedimension(Object, DOUBLE X, DOUBLE Y, DOUBLE Z, DOUBLE Width, DOUBLE Height, DOUBLE Depth)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">X, Y, Z</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">The new position to apply to the target object.</td>
</tr>
<tr>
<td style="text-align: left;">Width, Height, Depth</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">The new size of the target object.</td>
</tr>
</tbody>
</table>
<p>Use <code>Redimension</code> to reposition and resize an object in a single action call. This is considered to be more optimal than moving and resizing an object with sequential calls to the <code>Move</code> and <code>Resize</code> actions. By default, the target object will be redrawn automatically as a result of calling this action.</p>
<p>If the target contains other drawable objects, they will often respond by adjusting their dimensions to the new size. The exact result will depend on their configuration.</p>
<p>Setting any of the <code>Width</code>, <code>Height</code> and <code>Depth</code> values to zero is permitted if the existing dimension should be unchanged.</p>
<p>The <code>Depth</code> parameter is typically used for objects supporting a Z-order or Z-axis, and can be set to zero if not applicable. If the <code>Z</code> coordinate represents a scale factor, a setting of <code>1.0</code> would represent the normal size of the target object.</p>
<h2 id="redo">Redo</h2>
<p><code>ERR acRedo(Object)</code></p>
<p>Calling Redo will reverse previous calls to the <a href="#Undo"><code>Undo</code></a> action. This action can be called once for every previous call to Undo. If there is nothing to undo, <code>ERR::NothingDone</code> will be returned.</p>
<h2 id="refresh">Refresh</h2>
<p><code>ERR acRefresh(Object)</code></p>
<p>Some classes support the <code>Refresh</code> action if their objects represent external data sources. For example, the Document class can be refreshed if the source has changed.</p>
<p>If a <code>Refresh</code> action fails, the object should remain in its original state unless the object&#39;s class states otherwise.</p>
<h3 id="implementation-details-25">Implementation Details</h3>
<p>A class that represents a view of an &#39;external&#39; data source should typically support the <code>Refresh</code> action. The purpose of a refresh is to re-read the origins of an object&#39;s data and then update the object to reflect any differences between the object and its data source.</p>
<p>If the refresh process fails, avoid allowing the object to fall into an invalid state. It is recommended that either the object is left in its original state, or that the object reports the error in a way that makes it known to the user.</p>
<h2 id="rename">Rename</h2>
<p><code>ERR acRename(Object, STRING Name)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Name</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">The new name for the object.</td>
</tr>
</tbody>
</table>
<p>Objects that support naming conventions will typically support the <code>Rename</code> action. The <code>File</code> class is a typical example of a class that provides this kind of support to change filenames.</p>
<p><code>Rename</code> does not impose limits on the length of the supplied <code>Name</code>, but the underlying system might; for instance all filesystems impose a hard limit on filename length.</p>
<h3 id="implementation-details-26">Implementation Details</h3>
<p>If your class supports naming (e.g. for the purpose of representing a data location such as a filename) then support the <code>Rename</code> action. If there is a limit on the number of characters that are supported by your code, document this restriction in the class manual.</p>
<h2 id="reset">Reset</h2>
<p><code>ERR acReset(Object)</code></p>
<p>Using <code>Reset</code> on an object will revert its state to one that is similar to when it was first initialised.</p>
<p>The exact behaviour of a reset is class dependent, but as a rule, object data will not be destroyed as a result of calling this action (the <a href="#Clear"><code>Clear</code></a> action is typically used for this purpose). A common example of a reset is to <a href="#Seek"><code>Seek</code></a> back to a position of zero, stop any currently running activity, then reset the object state back to normal.</p>
<p>Be wary of confusing the consequences of a <code>Reset</code> with the <a href="#Flush"><code>Flush</code></a> action. Some objects will flush themselves as a consequence of a <code>Reset</code>, but the key difference is that calling <a href="#Flush"><code>Flush</code></a> will not result in a change of state.</p>
<h3 id="implementation-details-27">Implementation Details</h3>
<p>The most common reason for supporting the <code>Reset</code> action is to allow an object to get back to its most basic state, similar to when the object was first initialised. Examples could be resetting a file position back to the beginning, or restarting a running procedure from scratch.</p>
<p>It is strongly recommended that you do not destroy any data in your support routine, but you may manipulate the object&#39;s state as required.</p>
<h2 id="resize">Resize</h2>
<p><code>ERR acResize(Object, DOUBLE Width, DOUBLE Height, DOUBLE Depth)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Width, Height, Depth</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">The new size of the object.</td>
</tr>
</tbody>
</table>
<p>The <code>Resize</code> action is used to alter the size of an object with a single action call. Resizing is commonly used in the UI for manipulating vector dimensions.</p>
<p>If a resized object contains other drawable objects, they may respond to the resize by adjusting their dimensions to the new size. The exact result will dependent on their configuration.</p>
<p>Setting any of the <code>Width</code>, <code>Height</code> and <code>Depth</code> values to zero is permitted if the existing dimension should be unchanged.</p>
<h2 id="saveimage">SaveImage</h2>
<p><code>ERR acSaveImage(Object, OBJECTID Dest)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Dest</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">Refers to an object that will receive the encoded image data.</td>
</tr>
<tr>
<td style="text-align: left;">ClassID</td>
<td style="text-align: left;">CLASSID</td>
<td style="text-align: left;">The <code>Picture</code> class to use for encoding the image data.</td>
</tr>
</tbody>
</table>
<p><code>SaveImage</code> is used to save an object&#39;s graphics to a storage object of your choosing. The process of saving the image will leverage the <code>Picture</code> class, which by default saves images in PNG format. If an alternative image format provided by a <code>Picture</code> sub-class is desired, it can be referenced in the <code>ClassID</code> parameter. For instance, specifying <code>ID_JPEG</code> in <code>ClassID</code> is sufficient to save an image in JPEG format.</p>
<p>The object referenced in <code>Dest</code> must be from a class that supports the <a href="#Write"><code>Write</code></a> action. Typically this would be a <code>File</code> object, but this is not imposed as a restriction.</p>
<p>In some cases, the <code>SaveImage</code> and <a href="#SaveToObject"><code>SaveToObject</code></a> actions will both save image information (for example the <code>Picture</code> and <code>Bitmap</code> classes will do this) but objects that can be represented as an image and in a native data format will make a clear distinction between the two.</p>
<h3 id="implementation-details-28">Implementation Details</h3>
<p>This action is provided for classes that wish to make a distinction between the image of an object and the data of an object. For instance, using <code>SaveToObject</code> on a GUI object could store its meta information, while <code>SaveToImage</code> can save the object as it is seen by the user.</p>
<p>When supporting this action you must save the image using the <code>Picture</code> class so that the data can be saved in the user&#39;s preferred format.</p>
<h2 id="savesettings">SaveSettings</h2>
<p><code>ERR acSaveSettings(Object)</code></p>
<p>The SaveSettings action exists to simplify the saving of configuration information to a default file path. In some classes it can also save altered object data back to its origin file.</p>
<h2 id="savetoobject">SaveToObject</h2>
<p><code>ERR acSaveToObject(Object, OBJECTID Dest, CLASSID ClassID)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Dest</td>
<td style="text-align: left;">OBJECTPTR</td>
<td style="text-align: left;">Refers to an object that will receive the encoded data.</td>
</tr>
<tr>
<td style="text-align: left;">ClassID</td>
<td style="text-align: left;">CLASSID</td>
<td style="text-align: left;">Can refer to a sub-class that should be used when encoding the data.</td>
</tr>
</tbody>
</table>
<p>This action will save an object&#39;s data to a storage object of your choosing. The data will be saved in a file format that can be reloaded at a later time using the same class.</p>
<p>The object referenced in <code>Dest</code> must be from a class that supports the <a href="#Write"><code>Write</code></a> action. Typically this would be a <code>File</code> object, but this is not imposed as a restriction.</p>
<p>The <code>ClassID</code> is optional, and can be used to specify a sub-class that is preferred for encoding the object data. For example, the <code>Sound</code> class supports WAV data by default, but we could save audio in MP3 format if the <code>MP3</code> class was referenced here.</p>
<h3 id="implementation-details-29">Implementation Details</h3>
<p>By supporting the <code>SaveToObject</code> action, you can make it possible to save an object&#39;s data to a <code>File</code> or similar data storage object.</p>
<p>It is a requirement that the data being saved can be loaded by the class at a later time.</p>
<h2 id="seek">Seek</h2>
<pre><code>ERR acSeek(Object, DOUBLE Offset, LONG Position)
ERR acSeekStart(Object, DOUBLE Offset)
ERR acSeekEnd(Object, DOUBLE Offset)
ERR acSeekCurrent(Object, DOUBLE Offset)</code></pre>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Offset</td>
<td style="text-align: left;">DOUBLE</td>
<td style="text-align: left;">The desired offset to seek to, relative to the <code>Position</code> parameter.</td>
</tr>
<tr>
<td style="text-align: left;">Position</td>
<td style="text-align: left;">POS</td>
<td style="text-align: left;">The position that defines the starting point for <code>Offset</code>.</td>
</tr>
</tbody>
</table>
<p>The <code>Seek</code> action defines the next read/write position for the <a href="#read"><code>Read</code></a> and <a href="#write"><code>Write</code></a> actions. In some cases this can affect live tracking, for instance seeking to a new position in an active <code>MP3</code> object has an immediate effect on audio playback.</p>
<p>The <code>Position</code> can be set to <code>POS::START</code>, <code>POS::CURRENT</code> or <code>POS::END</code> to indicate the relative start position. For example, +20 from <code>POS::CURRENT</code> is <code>20</code> bytes from the current position, while <code>-20</code> would be <code>20</code> bytes back from the current position. In <code>POS::START</code> and <code>POS::END</code> modes the <code>Position</code> should be unsigned; if the value is negative then the sign will be dropped.</p>
<p>You cannot seek beyond the &#39;end&#39; of an object, nor can you seek to a position less than zero.</p>
<p>To get the current position of an object, read its <code>Position</code> field.</p>
<h3 id="implementation-details-30">Implementation Details</h3>
<p>A class that supports the <code>Read</code> and <code>Write</code> actions should support <code>Seek</code> wherever possible. Seeking is used to position the &#39;read/write head&#39; so that the next time some I/O occurs, it will start at the seeked position.</p>
<p>Your class is required to define a <code>Position</code> field that always reflects the current byte position in your object&#39;s data. When the <code>Seek</code> action is called, the <code>Position</code> must be altered to reflect the absolute byte position that the program has seeked to.</p>
<p>When writing your support routine, you must write code for each of the three different modes - <code>POS::START</code>, <code>POS::CURRENT</code> and <code>POS::END</code>. <code>POS::START</code> refers to the beginning of the data, <code>POS::CURRENT</code> refers to the current byte position and <code>POS::END</code> refers to the end of the data. The <code>Position</code> parameter can be either negative or positive when used in conjunction with <code>POS::CURRENT</code>, but in the <code>POS::START</code> and <code>POS::END</code> modes the sign of the <code>Position</code> is ignored (i.e. read it as an absolute value and then offset in the appropriate direction).</p>
<p>Seeking beyond the boundaries of an object&#39;s data is not permitted. If the client makes such a request, the new position value must be clamped and <code>ERR::Okay</code> should still be returned.</p>
<h2 id="setkey">SetKey</h2>
<p><code>ERR acSetKey(Object, STRING Key, STRING Value)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Key</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">The name of the target key.</td>
</tr>
<tr>
<td style="text-align: left;">Value</td>
<td style="text-align: left;">STRING</td>
<td style="text-align: left;">The string value to associate with <code>Key</code>.</td>
</tr>
</tbody>
</table>
<p>The <code>SetKey</code> action is used to set custom key-values on an object. Keys can either be functional, as is the case for <code>XML</code>&#39;s xpath support, or they can be created by the client ad-hoc and permanently stored with the object.</p>
<p><code>Key</code> names are case-insensitive unless documented otherwise, and can be retrieved with the <a href="#getkey"><code>GetKey</code></a> action.</p>
<h3 id="implementation-details-31">Implementation Details</h3>
<p>If your class design allows for key-values then you will need to support <code>SetKey</code> as the mechanism for setting the values.</p>
<p>The general recommendation for C++ developers to use a <code>std::unordered_map</code> to store the key values. Be sure that your method can overwrite existing values when the same key is set more than once.</p>
<p>Keys should be case-insensitive by default. If this is not the case, document this fact for the client.</p>
<p>Please note that if you support this action then it is recommended that you provide a reasonable amount of documentation so that the developer knows just how your class supports key values.</p>
<h2 id="show">Show</h2>
<p><code>ERR acShow(Object)</code></p>
<p>Calling this action will make the target object visible to the user. While graphics objects are the obvious use-case for this action, non-visual objects such as files can also support visibility changes.</p>
<p>Showing an object that is already visible has no effect. To make the target object invisible, call the <a href="#Hide"><code>Hide</code></a> action.</p>
<h3 id="implementation-details-32">Implementation Details</h3>
<p>If a class represents objects that are visible to the user (for example, a UI class) then being able to control that visibility is usually necessary.</p>
<p>If the visible state of the object is already <code>true</code>, do nothing and return <code>ERR::Okay</code>.</p>
<p>Changing the visible state of a graphics object can trigger a redraw of the display, but this is at your discretion. Documenting whether or not the changes will be immediately visible is advised.</p>
<p><code>Hide</code> and <code>Show</code> should always be supported in tandem as would be expected by the client.</p>
<h2 id="signal">Signal</h2>
<p><code>ERR acSignal(Object)</code></p>
<p>The signalling of objects is a feature created specifically for the Core API&#39;s <code>WaitForObjects()</code> function. By calling <code>Signal</code> on an object that has been referenced in a <code>WaitForObjects()</code> call, the process will be woken up.</p>
<p>Further detail is available in the <code>WaitForObjects()</code> documentation.</p>
<h2 id="undo">Undo</h2>
<p><code>ERR acUndo(Object)</code></p>
<p>The <code>Undo</code> action reverses the last activity performed by the object. Objects that support this action maintain an internal stack of operations that have been performed since the creation of the object (subject to undo buffer limits). You may call <code>Undo</code> for as many operations as have been recorded on the stack.</p>
<p>There is no distinction between user and automated operations performed against the object&#39;s data - both are treated equally.</p>
<p>Some class types may need to be configured before they will initialise an undo buffer that can be utilised by this action.</p>
<h2 id="unlock">Unlock</h2>
<p><code>ERR acUnlock(Object)</code></p>
<p>The <code>Unlock</code> action complements <a href="#lock"><code>Lock</code></a> in order to provide the necessary means for releasing locks. Unlocking an object will release all the locking conditions that have been placed on it (but bear in mind that multiple locks will nest).</p>
<p>If you <a href="#Free"><code>Free</code></a> an object that is still under lock conditions, the object will automatically unlock itself.</p>
<h2 id="write">Write</h2>
<p><code>ERR acWrite(Object, APTR Buffer, LONG Length, LONG Result)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Type</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Buffer</td>
<td style="text-align: left;">APTR</td>
<td style="text-align: left;">A buffer containing the data that will be written to the object.</td>
</tr>
<tr>
<td style="text-align: left;">Length</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">The total number of bytes to write to the object.</td>
</tr>
<tr>
<td style="text-align: left;">Result</td>
<td style="text-align: left;">LONG</td>
<td style="text-align: left;">This parameter with be updated with the total number of bytes written from the buffer.</td>
</tr>
</tbody>
</table>
<p>Use the <code>Write</code> action to write data from a buffer to an object. While commonly used for file I/O, <code>Write</code> is useful for many situations involving the streaming of data to an external source.</p>
<p>Making a <code>Write</code> call will write <code>Length</code> number of bytes from the provided <code>Buffer</code> to the object. If the class supports a seek marker, it will start the write operation from the point determined by the <code>Position</code> field. The <code>Position</code> field will be incremented to <code>Position + Length</code> if the call succeeds. Altering the position of the seek marker is possible with the <a href="#Seek"><code>Seek</code></a> action, if the class supports it.</p>
<p>If the object is at capacity then it may attempt to increase its space to write out the entire <code>Buffer</code> that has been provided. If it cannot do this, it will attempt to write as much information as possible and return an <code>ERR::Okay</code> code. If it cannot write out any data, it will return a fail code. If the object&#39;s class has a <code>Size</code> field, this may be expanded as a result of the call.</p>
<p>To confirm how much data was written after a successful <code>Write</code> call, check the <code>Result</code> parameter and compare it to the <code>Length</code> that was supplied.</p>
<h3 id="implementation-details-33">Implementation Details</h3>
<p>The <code>Write</code> action is commonly used to write data to files, but can theoretically be used in any circumstance involving data storage and streaming content.</p>
<p>If the <code>Length</code> exceeds the total amount of space available for writing data and nothing further can be written, return an error code of <code>ERR::LowCapacity</code>.</p>
<p>Your class should support a <code>Position</code> field to indicate the current byte position from which the <code>Write</code> action will start. Increment the <code>Position</code> by the number of bytes that were written to the object&#39;s data store before returning to the client. Also consider supporting the <a href="#Seek"><code>Seek</code></a> action to manipulate the <code>Position</code> value.</p>
<p>Your class should also support a <code>Size</code> field if the size of its objects is discrete. If an object is functioning as a stream, the <code>Size</code> should be set to zero, and the client should be given a means to determine that the object is in streaming mode.</p>
<p>Before returning to the client, your support routine must set the <code>Result</code> parameter to indicate the total number of bytes that were written to the object.</p>
</div></div></div></div>

<script src="../js/bootstrap.bundle.min.js"></script>
<script src="../js/base.js"></script>
<script>

   // Auto-open the relevant sidebar branch

   var url = window.location.pathname;
   var filename = url.substring(url.lastIndexOf('/')+1);
   var el = document.querySelector('li[class="api-ref"] > a[href="' + filename + '"]');
   if (el) {
      var parent = getParentNode(el, '[class="collapse"]');
      if (parent) new bootstrap.Collapse(parent, { show: true }); // Causes animation

      el.style.backgroundColor = '#d2f4ea';
   }

   cancelAnimations();
    </script>
  </body>
</html>

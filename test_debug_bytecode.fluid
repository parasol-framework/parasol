-- Test with bytecode debugging

-- Enable debug logging
local debugging = require('common')

print("=== Bytecode Test ===")
local guest = nil

-- Test in one expression
print("\n1. Combined expression:")
local result = guest?.profile?.name ? "Guest"
print("Result: " .. tostring(result))

-- Test in two steps
print("\n2. Separate steps:")
local step1 = guest?.profile?.name
print("Step 1: " .. tostring(step1))
local step2 = step1 ? "Guest"
print("Step 2: " .. tostring(step2))

-- Test with non-nil safe nav
print("\n3. Non-nil safe nav:")
local user = { profile = { name = "Alice" } }
local result3 = user?.profile?.name ? "Guest"
print("Result: " .. tostring(result3))

-- Test with simple value
print("\n4. Simple if-empty:")
local val = nil
local result4 = val ? "Default"
print("Result: " .. tostring(result4))
